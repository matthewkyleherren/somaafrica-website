(this["webpackJsonpstore-admin"]=this["webpackJsonpstore-admin"]||[]).push([[0],{325:function(e,t,a){e.exports=a(670)},438:function(e,t,a){},478:function(e,t){},605:function(e,t,a){e.exports=a.p+"static/media/terms.5d0699ec.md"},664:function(e,t,a){},670:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(54),c=a.n(o),l=a(5),s=a(686),i=a(10),m=a(297),d=a(1),u=a(50),p=new u.a,_={shopId:-1,userId:"",platform:"",accountType:"",email:"",authed:!1,loading:!0,returnToLogin:!1,expiredToken:null,loginProcessing:!1,loginFailed:!1,validSession:!1,firstTimeUser:!1,shopDomain:"",oAuth:!1,passwordResetSent:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,a=window._env_.REACT_APP_SESSION_DURATION||12,n="production"===window._env_.REACT_APP_ENV;switch(t.type){case"VERIFY_SHOPIFY_SHOP_OAUTH_RES":return p.set("clydePlatform","Shopify",{path:"/",secure:n,maxAge:3600*a}),Object(d.a)(Object(d.a)({},e),{},{loading:!1,platform:"Shopify",shopId:t.payload.shopId,shopDomain:t.payload.shopDomain});case"VERIFY_SHOPIFY_USER_OAUTH_RES":return p.set("clydeShopId",t.payload.shopId,{path:"/",secure:n,maxAge:3600*a}),p.set("clydeToken",t.payload.token,{path:"/",secure:n,maxAge:3600*a}),p.set("clydePlatform","Shopify",{path:"/",secure:n,maxAge:3600*a}),Object(d.a)(Object(d.a)({},e),{},{loading:!1,platform:"Shopify",authed:!0,shopId:t.payload.shopId,shopDomain:t.payload.shopDomain,accountType:t.payload.accountType,userId:t.payload.userId,oAuth:!0});case"BC_LOGIN_RES":return p.set("clydeShopId",t.payload.shopId,{path:"/",secure:!0,maxAge:3600*a,sameSite:"none"}),p.set("clydeToken",t.payload.token,{path:"/",secure:!0,maxAge:3600*a,sameSite:"none"}),p.set("clydePlatform","BigCommerce",{path:"/",secure:!0,maxAge:3600*a,sameSite:"none"}),Object(d.a)(Object(d.a)({},e),{},{loading:!1,platform:"BigCommerce",authed:!0,shopId:t.payload.shopId,accountType:t.payload.accountType,userId:t.payload.userId,oAuth:!0,validSession:!0});case"AUTH_FAILED":return p.remove("clydeShopId"),p.remove("clydeToken"),p.remove("clydePlatform"),p.remove("clydeAccountType"),Object(d.a)(Object(d.a)({},e),{},{returnToLogin:!0,loading:!1,authed:!1,shopId:void 0});case"RETURNED_TO_LOGIN":return Object(d.a)(Object(d.a)({},e),{},{authed:!1,returnToLogin:!1});case"EXPIRED_TOKEN":return Object(d.a)(Object(d.a)({},e),{},{authed:!1,returnToLogin:!0,loading:!1,expiredToken:t.payload.auth});case"CLEAR_EXPIRED_TOKEN":return Object(d.a)(Object(d.a)({},e),{},{expiredToken:null});case"SET_LOGIN_PLATFORM":return Object(d.a)(Object(d.a)({},e),{},{platform:t.payload.platform});case"LOGIN_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{loginFailed:!1,loginProcessing:!0,platform:t.payload.platform});case"SUBMIT_LOGIN_RES":p.set("clydeShopId",t.payload.shopId,{path:"/",secure:n,maxAge:3600*a}),p.set("clydeToken",t.payload.token,{path:"/",secure:n,maxAge:3600*a}),p.set("clydePlatform",t.payload.platform||"Clyde",{path:"/",secure:n,maxAge:3600*a}),p.set("clydeAccountType",t.payload.accountType,{path:"/",secure:n,maxAge:3600*a});var r=Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{authed:!0,firstTimeUser:!1,loading:!1,loginProcessing:!1});return delete r.token,r;case"AUTH_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{authed:!0,firstTimeUser:!1,loading:!0,platform:t.payload.platform||e.platform,validSession:!!t.payload.shopId,oAuth:t.payload.oAuth});case"GET_ONBOARDING_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{loading:!1});case"SET_LOGIN_EMAIL":return Object(d.a)(Object(d.a)({},e),{},{email:t.payload});case"CHECK_USERID_PROCESSING":return Object(d.a)({},e);case"CHECK_USER_FIRST_LOGIN_RES":return t.payload.email?Object(d.a)(Object(d.a)({},e),{},{firstTimeUser:!0,email:t.payload.email}):Object(d.a)({},e);case"RESET_USER_PASSWORD_EMAIL_RES":return Object(d.a)(Object(d.a)({},e),{},{loginProcessing:!1,passwordResetSent:!0});case"LOGOUT":return p.remove("clydeShopId"),p.remove("clydeToken"),p.remove("clydePlatform"),p.remove("clydeAccountType"),Object(d.a)(Object(d.a)({},_),{},{platform:e.platform});case"ERROR":switch(t.payload.reqType){case"SUBMIT_FIRST_LOGIN_REQ":case"SUBMIT_LOGIN_REQ":return Object(d.a)(Object(d.a)({},e),{},{authed:!1,loginFailed:!0,loginProcessing:!1});default:return e}default:return e}},E=a(19),g={claim:{claimExternalId:null,claimState:"",claimType:"",createdAt:"",denialReason:null,descriptionOfProblem:"",failureDate:"",productStillFunctional:"",productUsedAsIntended:""},claimHistory:[],contract:{contractAdh:"",contractDop:"",contractId:"",contractTerm:"",deliveryDate:""},customer:{address:"",city:"",customerAccountId:null,customerId:null,email:"",firstName:"",lastName:"",phone:"",state:"",zip:""},processing:{claim:!1,claimHistory:!1,contract:!1,customer:!1,product:!1,resolutionSubmit:!1,supportingInfoFiles:!1},product:{productManufacturer:"",productName:"",productPurchasePrice:0,productRetailPrice:0,productSku:""},remainingLimitOfLiability:0,productParts:[],supportingInfoFiles:[],shopClaimSettings:{retailerResolutions:!1,repairEnabled:!1,replaceEnabled:!1,promoCodeEnabled:!1,payoutEnabled:!1,depotRepairEnabled:!1},reviewData:{cost:null,type:null},transferHistory:[]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CLAIM_DETAILS":return Object(d.a)(Object(d.a)({},e),{},{processing:Object(d.a)(Object(d.a)({},e.processing),{},{claim:!0,claimHistory:!0,contract:!0,customer:!0,product:!0,supportingInfoFiles:!0})});case"FETCH_CLAIM_DETAILS_RES":return Object(d.a)(Object(d.a)({},e),{},{claim:t.payload.claim,claimHistory:t.payload.claimHistory,customer:t.payload.customer,processing:Object(d.a)(Object(d.a)({},e.processing),{},{claim:!1,claimHistory:!1,customer:!1}),resolution:Object(d.a)(Object(d.a)({},e.resolution),t.payload.resolution),shopClaimSettings:Object(d.a)(Object(d.a)({},e.shopClaimSettings),{},{retailerResolutions:t.payload.retailerResolutions,repairEnabled:t.payload.repairEnabled,replaceEnabled:t.payload.replaceEnabled,promoCodeEnabled:t.payload.promoCodeEnabled,payoutEnabled:t.payload.payoutEnabled,depotRepairEnabled:t.payload.depotRepairEnabled}),transferHistory:Object(E.a)(t.payload.transferHistory)});case"FETCH_CLAIM_SALE_DETAILS_RES":return Object(d.a)(Object(d.a)({},e),{},{contract:t.payload.contract,processing:Object(d.a)(Object(d.a)({},e.processing),{},{contract:!1,product:!1}),product:t.payload.product});case"FETCH_CLAIM_PRODUCT_PARTS_RES":return Object(d.a)(Object(d.a)({},e),{},{productParts:t.payload});case"FETCH_CLAIM_LOL_DETAILS_RES":return Object(d.a)(Object(d.a)({},e),{},{remainingLimitOfLiability:t.payload});case"FETCH_CLAIM_SUPPORTING_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{processing:Object(d.a)(Object(d.a)({},e.processing),{},{supportingInfoFiles:!1}),supportingInfoFiles:t.payload});case"SUBMIT_CLAIM_NEEDS_REVIEW_UPDATE_RES":return Object(d.a)({},e);case"FETCH_CLAIM_REVIEW_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{reviewData:Object(d.a)({},t.payload.data)});default:return e}},b=a(15),v={closed:!1,openCosts:"",resolutionProductPartIds:[],cost:"",executor:"",fullReplacement:!1,id:null,programType:"repair",serviceType:"depot",payoutType:"",payoutDate:"",processing:{close:!1,fetch:!1,files:!1,submit:!1},promoCode:"",proofFiles:[],receiptFiles:[],retailerTicketId:"",settings:{proofOfWork:""},shippingCarrier:"",shippingNumber:"",source:"",uploadedProofFiles:[],replaceCost:0,isReplaceRequested:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CLAIM_RESOLUTION":return Object(d.a)(Object(d.a)({},e),{},{processing:Object(d.a)(Object(d.a)({},e.processing),{},{fetch:!0,files:!0})});case"FETCH_CLAIM_RESOLUTION_RES":var a=Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload.claimResolution),t.payload.depotRepairInfo),{},{settings:Object(d.a)({},t.payload.claimSettings),processing:Object(d.a)(Object(d.a)({},e.processing),{},{fetch:!1})}),n=t.payload.claimResolution&&t.payload.claimResolution.closed;!n&&a.settings&&a.settings.depotRepairEnabled&&(a=Object(d.a)(Object(d.a)({},a),{},{cost:t.payload.depotRepairInfo.depotRepaircost}));var r=t.payload.claimSettings.depotRepairEnabled,o=Object.keys(t.payload.claimResolution).length>0,c=t.payload.claimResolution.programType&&"repair"===t.payload.claimResolution.programType;return r&&o&&c&&(a.serviceType="depot"),a;case"SUBMIT_DEPOT_REPAIR_UPDATE_RES":var l=Object(d.a)(Object(d.a)({},e),t.payload.depotRepairInfo),s=t.payload.depotReapairRecord.depotRepairSelectedParts;return 3===t.payload.depotReapairRecord.depotRepairStep&&(l=Object(d.a)(Object(d.a)({},l),{},{cost:t.payload.depotReapairRecord.depotRepaircost,resolutionProductPartIds:s?s.map((function(e){return e.id})):[],serviceType:"depot"})),l;case"FETCH_CLAIM_RESOLUTION_FILES_RES":return Object(d.a)(Object(d.a)({},e),{},{processing:Object(d.a)(Object(d.a)({},e.processing),{},{files:!1}),uploadedProofFiles:t.payload.proofFiles});case"CLEAR_RESOLUTION_DETAIL":return v;case"HANDLE_CLAIM_DETAIL_RESOLUTION_DATA_CHANGE":return Object(d.a)(Object(d.a)({},e),{},Object(b.a)({},t.payload.name,t.payload.value));case"SUBMIT_CLAIM_RESOLUTION":return Object(d.a)(Object(d.a)({},e),{},{processing:Object(d.a)(Object(d.a)({},e.processing),{},{submit:!0,files:!0})});case"SUBMIT_CLAIM_RESOLUTION_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{processing:Object(d.a)(Object(d.a)({},e.processing),{},{submit:!1}),proofFiles:[]});case"CLOSE_CLAIM_RESOLUTION":return Object(d.a)(Object(d.a)({},e),{},{processing:Object(d.a)(Object(d.a)({},e.processing),{},{close:!0,files:!0})});case"CLOSE_CLAIM_RESOLUTION_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{processing:Object(d.a)(Object(d.a)({},e.processing),{},{close:!1}),proofFiles:[]});default:return e}},N=a(18),O=a.n(N),C={claims:[],pageNumber:1,claimsCount:0,selectedFilter:"none",selectedSort:"requiresAction",searchType:"email",searchValue:"",fetchPending:!1,selectedWarrantyFilter:"extendedWarranty",issueTypes:[],claimsExportProcessing:!1,claimsExportFile:{data:null,name:null,download:!1}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SHOP_CLAIMS_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{fetchPending:!0});case"GET_CLAIMS_RES":return Object(d.a)(Object(d.a)({},e),{},{fetchPending:!1,claims:t.payload.map((function(e){var t="";return"approved"!==e.claimState&&"repairInitiated"!==e.claimState||(t="new"),e.claimResolutionId&&(t="pending"),e.claimClosed&&(t="resolved"),Object(d.a)(Object(d.a)({},e),{},{lastUpdated:O()(e.lastUpdated.slice(0,10)).format("M/D/YY"),claimClass:t})}))});case"SET_CLAIMS_PAGE_NUMBER":return Object(d.a)(Object(d.a)({},e),{},{pageNumber:t.payload.pageNumber});case"SET_CLAIMS_FILTER":return Object(d.a)(Object(d.a)({},e),{},{pageNumber:1,selectedFilter:t.payload.filter});case"SET_WARRANTY_FILTER":return Object(d.a)(Object(d.a)({},e),{},{pageNumber:1,selectedWarrantyFilter:t.payload.filter});case"SET_CLAIMS_SORT":return Object(d.a)(Object(d.a)({},e),{},{pageNumber:1,selectedSort:t.payload.sort});case"SET_CLAIMS_SEARCH_TYPE":return Object(d.a)(Object(d.a)({},e),{},{searchType:t.payload.type});case"SET_CLAIMS_SEARCH_VALUE":return Object(d.a)(Object(d.a)({},e),{},{searchValue:t.payload.value});case"CLAIM_COUNT_RES":return Object(d.a)(Object(d.a)({},e),{},{fetchPending:!1,claimsCount:Number(t.payload.count)});case"CLAIMS_FOR_RESOLUTION_COUNT_RES":return Object(d.a)(Object(d.a)({},e),{},{claimsForResolutionCount:t.payload});case"GET_LIMITED_CLAIMS_EXPORT_RES":case"GET_ALL_CLAIMS_EXPORT_RES":return Object(d.a)(Object(d.a)({},e),{},{claimsExportProcessing:!1,claimsExportFile:Object(d.a)(Object(d.a)({},e.claimsExportFile),{},{data:t.payload,name:t.payload.fileName,download:!0})});case"CLAIMS_EXPORT_DOWNLOAD_FALSE":return Object(d.a)(Object(d.a)({},e),{},{claimsExportFile:Object(d.a)(Object(d.a)({},e.invoiceExportFile),{},{data:null,name:null,download:!1})});case"ERROR":switch(t.payload.reqType){case"GET_CLAIMS_EXPORT_REQ":return Object(d.a)(Object(d.a)({},e),{},{claimsExportProcessing:!1,claimsExportFile:Object(d.a)(Object(d.a)({},e.claimsExportFile),{},{data:null,name:null,download:!1})});default:return e}case"GET_ISSUE_TYPES_RES":return Object(d.a)(Object(d.a)({},e),{},{issueTypes:t.payload.issueTypes});default:return e}},I={products:[],productTypes:[],filterTypes:[],productTags:[],filterTags:[],productManufacturers:[],filterManufacturers:[],productSearch:"",pageNumber:1,productCount:0,taxonomyItems:[],taxonomyCount:0,refresh:!1,preservePage:!0,openUploadModal:!1,importStep:"start",importProductsProcessing:!1,importSummary:{insert:[],skuDuplicates:[],ignore:[],ignoreCount:0,insertCount:0,updateCount:0},importFileKey:"",importFileRowCount:0,importResult:{inserted:[],updated:[],ignored:[],ignoreCount:0,insertCount:0,updateCount:0},openProductModal:!1,saveProductProcessing:!1,editProduct:null,productType:null,skuExport:null,skuExportProcessing:!1,getFiltersProcessing:!1,getProductsProcessing:!1,saveProcessing:!1,launchProcessing:!1,launched:!0,matchingComplete:!1,launchInstrSeen:!1,needLaunch:!1,excelExport:null,download:!1,showSaveButton:!1,registrableProductChange:!1},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case"SET_SEARCH":return Object(d.a)(Object(d.a)({},e),{},{productSearch:a});case"SET_PAGE_NUMBER":return Object(d.a)(Object(d.a)({},e),{},{pageNumber:a.pageNumber,refresh:!0,preservePage:!0,registrableProductChange:!1});case"GET_FILTERS_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{getFiltersProcessing:!0});case"GET_TAXONOMY_INFO_PROCESSING":case"GET_PRODUCTS_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{getProductsProcessing:!0});case"GET_PRODUCTS_RES":return Object(d.a)(Object(d.a)({},e),{},{products:a.products,launched:a.launched,matchingComplete:a.matchingComplete,getProductsProcessing:!1,pageNumber:a.pageNumber,needLaunch:a.needLaunch,refresh:!1,preservePage:!0,registrableProductChange:!1});case"GET_TAXONOMY_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{taxonomyItems:a.taxonomyItems,refresh:!1,preservePage:!0,getProductsProcessing:!1});case"SEND_PRODUCT_COUNT":return Object(d.a)(Object(d.a)({},e),{},{productCount:parseInt(a.productCount,10),taxonomyCount:a.taxonomyCount});case"GET_FILTERS_RES":return Object(d.a)(Object(d.a)({},e),{},{productTags:a.tags,productTypes:a.types,productManufacturers:a.manufacturers,getFiltersProcessing:!1});case"SET_FILTER_TAGS":return Object(d.a)(Object(d.a)({},e),{},{filterTags:a.tags,refresh:!0,preservePage:!1,registrableProductChange:!1});case"SET_FILTER_TYPES":return Object(d.a)(Object(d.a)({},e),{},{filterTypes:a.types,refresh:!0,preservePage:!1,registrableProductChange:!1});case"SET_FILTER_MANUFACTURERS":return Object(d.a)(Object(d.a)({},e),{},{filterManufacturers:a.manufacturers,refresh:!0,preservePage:!1,registrableProductChange:!1});case"OPEN_NEW_PRODUCT_MODAL":return Object(d.a)(Object(d.a)({},e),{},{openProductModal:!0,productType:"new",editProduct:null});case"OPEN_EDIT_PRODUCT_MODAL":return Object(d.a)(Object(d.a)({},e),{},{openProductModal:!0,productType:"edit",editProduct:a.product});case"SAVE_PRODUCT_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{saveProductProcessing:!0});case"SAVE_PRODUCT_RES":return Object(d.a)(Object(d.a)({},e),{},{refresh:!0,openProductModal:!1,productType:null,editProduct:null,saveProductProcessing:!1});case"REGISTRABLE_PRODUCT_RES":return Object(d.a)(Object(d.a)({},e),{},{refresh:!0,registrableProductChange:!0});case"UPDATE_PLATFORM_PRODUCT_RES":return Object(d.a)(Object(d.a)({},e),{},{refresh:!0,openProductModal:!1,productType:null,editProduct:null,saveProductProcessing:!1});case"CLOSE_PRODUCT_MODAL":return Object(d.a)(Object(d.a)({},e),{},{openProductModal:!1,productType:null,editProduct:null,productError:null});case"OPEN_UPLOAD_MODAL":return Object(d.a)(Object(d.a)({},e),{},{openUploadModal:!0});case"IMPORT_SUMMARY_RES":return Object(d.a)(Object(d.a)({},e),{},{importProductsProcessing:!1,importSummary:a.importSummary,importFileKey:a.importFileKey,importFileRowCount:a.rowCount,importStep:"confirm"});case"IMPORT_PRODUCTS_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{importProgressPercent:0,importProductsProcessing:!0});case"IMPORT_PRODUCTS_RES":return Object(d.a)(Object(d.a)({},e),{},{importProductsProcessing:!1,importResult:a.importResult,importFileKey:"",importFileRowCount:0,refresh:!0,importStep:"finish"});case"CLOSE_UPLOAD_MODAL":return Object(d.a)(Object(d.a)({},e),{},{openUploadModal:!1,importProductsProcessing:!1,importFileKey:"",importFileRowCount:0,importSummary:I.importSummary,importResult:I.importResult,importStep:"start"});case"GET_SKU_EXPORT_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{skuExportProcessing:!0});case"GET_SKU_EXPORT_RES":return Object(d.a)(Object(d.a)({},e),{},{skuExport:a,skuExportProcessing:!1});case"RESET_EXPORT":return Object(d.a)(Object(d.a)({},e),{},{skuExport:null});case"PRODUCTS_LAUNCH_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{launchProcessing:!0});case"LAUNCH_SHOP_PRODUCTS_RES":return Object(d.a)(Object(d.a)({},e),{},{launchProcessing:!1,launched:a.launched,needLaunch:!1,openLaunchModal:!1,showSaveButton:!1});case"GET_LAUNCHING_STATUS_RES":return Object(d.a)(Object(d.a)({},e),{},{launchProcessing:a});case"LAUNCH_STARTED":return Object(d.a)(Object(d.a)({},e),{},{launchProcessing:!0});case"LAUNCH_FINISHED":return Object(d.a)(Object(d.a)({},e),{},{launchProcessing:!1,launched:!0,needLaunch:!1});case"TOGGLE_PRODUCT_ACTIVE_RES":return Object(d.a)(Object(d.a)({},e),{},{products:[].concat(Object(E.a)(e.products.slice(0,a.productIndex)),[Object(d.a)(Object(d.a)({},e.products[a.productIndex]),{},{Active:a.active?"on":"off",Variants:e.products[a.productIndex].Variants.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{Active:a.active})}))})],Object(E.a)(e.products.slice(a.productIndex+1))),needLaunch:a.needLaunch||e.needLaunch,showSaveButton:a.needLaunch||e.needLaunch});case"TOGGLE_PRODUCT_VARIANT_ACTIVE_RES":var n=[].concat(Object(E.a)(e.products[a.productIndex].Variants.slice(0,a.variantIndex)),[Object(d.a)(Object(d.a)({},e.products[a.productIndex].Variants[a.variantIndex]),{},{Active:a.active})],Object(E.a)(e.products[a.productIndex].Variants.slice(a.variantIndex+1))),r=n.filter((function(e){return e.Active})),o="partial";return n.length===r.length?o="on":0===r.length&&(o="off"),Object(d.a)(Object(d.a)({},e),{},{products:[].concat(Object(E.a)(e.products.slice(0,a.productIndex)),[Object(d.a)(Object(d.a)({},e.products[a.productIndex]),{},{Active:o,Variants:n})],Object(E.a)(e.products.slice(a.productIndex+1))),needLaunch:a.needLaunch||e.needLaunch,showSaveButton:a.needLaunch||e.needLaunch});case"DISMISS_LAUNCH_INSTR":return Object(d.a)(Object(d.a)({},e),{},{launchInstrSeen:!0});case"GET_RATE_SHEET_EXPORT_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},e),a),{},{download:!0});case"TOGGLE_DOWNLOAD_FALSE":return Object(d.a)(Object(d.a)({},e),{},{download:!1});case"LOGOUT":return Object(d.a)(Object(d.a)({},e),I);case"ERROR":switch(a.reqType){case"GET_PRODUCTS_REQ":return Object(d.a)(Object(d.a)({},e),{},{getProductsProcessing:!1});case"GET_FILTERS_REQ":return Object(d.a)(Object(d.a)({},e),{},{getFiltersProcessing:!1});case"UPDATE_PRODUCT_REQ":case"CREATE_PRODUCT_REQ":return Object(d.a)(Object(d.a)({},e),{},{saveProductProcessing:!1});case"IMPORT_SUMMARY_REQ":case"IMPORT_PRODUCTS_REQ":return Object(d.a)(Object(d.a)({},e),{},{importProductsProcessing:!1,importStep:"start"});case"GET_SKU_EXPORT_REQ":return Object(d.a)(Object(d.a)({},e),{},{skuExportProcessing:!1});case"LAUNCH_SHOP_PRODUCTS_REQ":return"NoConcurrentLaunch"===a.name?e:Object(d.a)(Object(d.a)({},e),{},{launchProcessing:!1});default:return e}default:return e}},P={productRegistrationsExport:[],viewRegistrableProducts:!1},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PRODUCT_REGISTRATIONS_EXPORT_RES":return Object(d.a)(Object(d.a)({},e),{},{productRegistrationsExport:t.payload});case"TOGGLE_REGISTRABLE_PRODUCT_VIEW":return Object(d.a)(Object(d.a)({},e),{},{viewRegistrableProducts:t.payload.viewRegistrableProducts||!e.viewRegistrableProducts});default:return e}},w={firstName:"",lastName:"",email:"",secondaryEmail:"",shopName:"",phoneNumber:"",domain:"",address1:"",address2:"",city:"",province:"",zip:"",country:"",contactId:"",contactType:"",warrantyType:"none",oemWarrantyLength:0,warrantyDataAccessible:!1,getProcessing:!1,saveProcessing:!1,formErrors:{firstName:!1,lastName:!1,email:!1,secondaryEmail:!1,phoneNumber:!1,shopName:!1,domain:!1,address1:!1,city:!1,province:!1,zip:!1,oemWarrantyLength:!1},showSaveButton:!1},j=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0,r=n.payload;switch(n.type){case"SHOP_GET_PROCESSING":return Object(d.a)(Object(d.a)({},a),{},{getProcessing:!0});case"GET_SHOP_INFO_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},a),{},{firstName:r.firstName,lastName:r.lastName,shopName:r.shopName,domain:r.domain,getProcessing:!1},r.contactInfo[0]),{},{contactId:r.contactInfo[0].id});case"SET_TEXT_FIELD":return Object(d.a)(Object(d.a)({},a),{},(e={},Object(b.a)(e,r.profileField,r.text),Object(b.a)(e,"showSaveButton",!0),e));case"SET_BOOLEAN_FIELD":return Object(d.a)(Object(d.a)({},a),{},(t={},Object(b.a)(t,r.profileField,"true"===r.value),Object(b.a)(t,"showSaveButton",!0),t));case"SHOP_PROFILE_SAVE_PROCESSING":return Object(d.a)(Object(d.a)({},a),{},{saveProcessing:!0});case"UPDATE_SHOP_INFO_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},a),r),{},{saveProcessing:!1,showSaveButton:!1});case"COMPLETE_ONBOARDING_PROFILE_RES":return a;case"GET_ONBOARDING_INFO_RES":return Object(d.a)(Object(d.a)({},a),{},{shopName:r.shopName});case"SET_VALIDATION_ERRORS":return Object(d.a)(Object(d.a)({},a),{},{formErrors:r.formErrors});case"LOGOUT":return w;case"ERROR":switch(r.reqType){case"GET_SHOP_INFO_REQ":return Object(d.a)(Object(d.a)({},a),{},{getProcessing:!1});case"UPDATE_SHOP_INFO_REQ":return Object(d.a)(Object(d.a)({},a),{},{saveProcessing:!1});default:return a}default:return a}},k={firstName:"",lastName:"",email:"",secondaryEmail:"",phoneNumber:"",address1:"",city:"",province:"",zip:""},A={getProcessing:!1,saveProcessing:!1,formErrors:new Array(3).fill({}),showSaveButton:!1,contactList:[Object(d.a)({},k),Object(d.a)({},k),Object(d.a)({},k)]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOP_GET_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{getProcessing:!0});case"GET_SHOP_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{shopID:{},contactList:t.payload.contactInfo.slice(1),getProcessing:!1});case"SET_CONTACT_TEXT_FIELD":var a=t.payload,n=a.index,r=a.name,o=a.value,c=Object(d.a)({},e.contactList[n]);return c[r]=o,c.hasUpdate=!0,Object(d.a)(Object(d.a)({},e),{},{contactList:[].concat(Object(E.a)(e.contactList.slice(0,n)),[c],Object(E.a)(e.contactList.slice(n+1))),showSaveButton:!0});case"SHOP_CONTACTS_SAVE_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{saveProcessing:!0});case"UPDATE_SHOP_CONTACTS_RES":var l=t.payload.updatedContacts;return Object(d.a)(Object(d.a)({},e),{},{contactList:l,saveProcessing:!1,showSaveButton:!1});case"COMPLETE_ONBOARDING_PROFILE_RES":return e;case"GET_ONBOARDING_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{shopName:t.payload.shopName});case"SET_CONTACT_VALIDATION_ERRORS":return Object(d.a)(Object(d.a)({},e),{},{formErrors:t.payload.formErrors});case"LOGOUT":return A;case"ERROR":switch(t.payload.reqType){case"GET_SHOP_INFO_REQ":case"UPDATE_SHOP_INFO_REQ":return Object(d.a)(Object(d.a)({},e),{},{getProcessing:!1});default:return e}default:return e}},L={apiKeys:{liveKeys:{},testKeys:{}},getProcessing:!1,isBasicAuth:!0,saveProcessing:!1,showSaveButton:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_BASIC_AUTH":return Object(d.a)(Object(d.a)({},e),{},{isBasicAuth:t.payload,showSaveButton:!0});case"SHOP_GET_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{getProcessing:!0});case"GET_SHOP_DEVELOPER_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{apiKeys:t.payload.apiKeys,getProcessing:!1,isBasicAuth:t.payload.isBasicAuth});case"SHOP_SECURITY_SAVE_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{saveProcessing:!0});case"UPDATE_SHOP_SECURITY_INFO_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{saveProcessing:!1,showSaveButton:!1});case"ERROR":switch(t.payload.reqType){case"GET_SHOP_DEVELOPER_INFO_REQ":return Object(d.a)(Object(d.a)({},e),{},{getProcessing:!1});case"UPDATE_SHOP_SECURITY_INFO_REQ":return Object(d.a)(Object(d.a)({},e),{},{saveProcessing:!1});default:return e}default:return e}},F={allIntegrations:[],filterValue:"all",getProcessing:!1,oAuthData:{getProcessing:!1,modalOpen:!1,integration:{config:{},display:{},status:"",type:"",error:""}},saveProcessing:!1,searchString:"",showSaveButton:!1,removeIntegrationProcessing:!1,setupModal:{authRequirements:{},getProcessing:!1,modalOpen:!1,selectedIntegration:{},submitProcessing:!1,submitSuccess:!1,setOAuthProcessing:!0}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SHOP_INTEGRATIONS_INFO":return Object(d.a)(Object(d.a)({},e),{},{getProcessing:!0});case"GET_SHOP_INTEGRATIONS_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{getProcessing:!1,allIntegrations:t.payload});case"INTEGRATIONS_TAB_FILTER_INTEGRATIONS":return Object(d.a)(Object(d.a)({},e),{},{filterValue:t.filterValue});case"INTEGRATIONS_TAB_SEARCH_INTEGRATIONS":return Object(d.a)(Object(d.a)({},e),{},{searchString:t.searchString.toLowerCase()});case"INTEGRATIONS_TAB_RESET_SETTINGS":return F;case"UPDATE_SHOP_INTEGRATIONS_INFO_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{saveProcessing:!1,showSaveButton:!1});case"INTEGRATIONS_SETUP_MODAL_OPEN":return Object(d.a)(Object(d.a)({},e),{},{setupModal:Object(d.a)(Object(d.a)({},e.setupModal),{},{getProcessing:!0,modalOpen:!0,integrationData:{},selectedIntegration:t.selectedIntegration})});case"INTEGRATIONS_SETUP_MODAL_CLOSE":return Object(d.a)(Object(d.a)({},e),{},{setupModal:Object(d.a)(Object(d.a)({},e.setupModal),{},{modalOpen:!1,integrationData:{},selectedIntegration:{},submitSuccess:!1})});case"INTEGRATIONS_SETUP_MODAL_RESET":return Object(d.a)(Object(d.a)({},e),{},{setupModal:F.setupModal});case"INTEGRATIONS_SETUP_MODAL_UPDATE_CLYDE_CONTROLLED_INTEGRATION_VALUE":return Object(d.a)(Object(d.a)({},e),{},{setupModal:Object(d.a)(Object(d.a)({},e.setupModal),{},{selectedIntegration:Object(d.a)(Object(d.a)({},e.setupModal.selectedIntegration),{},{clydeOptions:Object(d.a)(Object(d.a)({},e.setupModal.selectedIntegration.clydeOptions),{},Object(b.a)({},t.key,t.value))})})});case"INTEGRATIONS_SETUP_MODAL_UPDATE_FRIGG_CONTROLLED_INTEGRATION_VALUE":return Object(d.a)(Object(d.a)({},e),{},{setupModal:Object(d.a)(Object(d.a)({},e.setupModal),{},{integrationData:Object(d.a)(Object(d.a)({},e.setupModal.integrationData),{},Object(b.a)({},t.key,t.value)),selectedIntegration:Object(d.a)({},e.setupModal.selectedIntegration)})});case"INTEGRATIONS_SETUP_MODAL_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{setupModal:Object(d.a)(Object(d.a)({},e.setupModal),{},{getProcessing:!0})});case"INTEGRATIONS_GET_FRIGG_AUTH_REQUIREMENTS_RES":return Object(d.a)(Object(d.a)({},e),{},{setupModal:Object(d.a)(Object(d.a)({},e.setupModal),{},{authRequirements:t.payload.authRequirements,getProcessing:!1})});case"INTEGRATIONS_SETUP_MODAL_CONNECT_ACCOUNT":return Object(d.a)(Object(d.a)({},e),{},{setupModal:Object(d.a)(Object(d.a)({},e.setupModal),{},{submitProcessing:!0})});case"INTEGRATIONS_SETUP_MODAL_CONNECT_ACCOUNT_RES":return Object(d.a)(Object(d.a)({},e),{},{allIntegrations:t.payload,setupModal:Object(d.a)(Object(d.a)({},e.setupModal),{},{submitProcessing:!1,submitSuccess:!0})});case"INTEGRATIONS_CREATE_FRIGG_O_AUTH_INTEGRATION":return Object(d.a)(Object(d.a)({},e),{},{oAuthData:Object(d.a)(Object(d.a)(Object(d.a)({},e.oAuthData),t.oAuthData),{},{getProcessing:!0,modalOpen:!0})});case"INTEGRATIONS_CREATE_FRIGG_O_AUTH_INTEGRATION_RES":return Object(d.a)(Object(d.a)({},e),{},{oAuthData:Object(d.a)(Object(d.a)({},e.oAuthData),{},{getProcessing:!1,integration:t.payload})});case"INTEGRATIONS_O_AUTH_REDIRECT_MODAL_CLOSE":return Object(d.a)(Object(d.a)({},e),{},{oAuthData:Object(d.a)(Object(d.a)({},e.oAuthData),{},{modalOpen:!1})});case"INTEGRATIONS_SET_FRIGG_OAUTH_DATA_RES":return Object(d.a)(Object(d.a)({},e),{},{setupModal:Object(d.a)(Object(d.a)({},e),{},{setOAuthProcessing:!1})});case"UPDATE_AFFIRM_INTEGRATION_REQ":return Object(d.a)(Object(d.a)({},e),{},{removeIntegrationProcessing:!0});case"UPDATE_AFFIRM_INTEGRATION_RES":return Object(d.a)(Object(d.a)({},e),{},{removeIntegrationProcessing:!1});case"UPDATE_KLAVIYO_INTEGRATION_REQ":return Object(d.a)(Object(d.a)({},e),{},{removeIntegrationProcessing:!0});case"UPDATE_KLAVIYO_INTEGRATION_RES":return Object(d.a)(Object(d.a)({},e),{},{removeIntegrationProcessing:!1});case"INTEGRATIONS_DELETE_FRIGG_INTEGRATION_RES":return Object(d.a)(Object(d.a)({},e),{},{allIntegrations:t.payload,removeIntegrationProcessing:!1});case"ERROR":switch(t.payload.reqType){case"GET_SHOP_INTEGRATIONS_INFO_REQ":return Object(d.a)(Object(d.a)({},e),{},{getProcessing:!1});default:return e}default:return e}},U={branded:!1,cartPrompt:!1,catalogPrompt:!1,color:"#000000",customLocation:"",displayName:"",imageData:null,imageProcessing:!1,imageUrl:"",modalPrompt:!1,newImage:!1,productPagePrompt:!1,productPageLocation:"after_form",postPurchase:!0,saveProcessing:!1,showSaveButton:!1,validColor:!0,showRegistrationPage:!1,usesCheckoutWidget:!1,onlyIncludeRegistrableProducts:!1,affirmPublicKey:"",affirmEnabled:!1,selectRegistrable:!1},G=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_DISPLAY_NAME":return Object(d.a)(Object(d.a)({},t),{},{displayName:a.payload,showSaveButton:!0});case"SET_CUSTOM_LOCATION":return Object(d.a)(Object(d.a)({},t),{},{customLocation:a.payload,showSaveButton:!0});case"TOGGLE_PROMPT":return Object(d.a)(Object(d.a)({},t),{},(e={},Object(b.a)(e,a.payload,!t[a.payload]),Object(b.a)(e,"showSaveButton",!0),e));case"TOGGLE_POST_PURCHASE":return Object(d.a)(Object(d.a)({},t),{},{postPurchaseEmailCampaign:!t.postPurchaseEmailCampaign,showSaveButton:!0});case"SELECT_COLOR":return Object(d.a)(Object(d.a)({},t),{},{validColor:!0,color:a.payload.colorCode,showSaveButton:!0});case"SELECT_INVALID_COLOR":return Object(d.a)(Object(d.a)({},t),{},{validColor:!1,color:a.payload.colorCode,showSaveButton:!0});case"SET_PRODUCT_PAGE_LOCATION":return Object(d.a)(Object(d.a)({},t),{},{productPageLocation:a.payload,showSaveButton:!0});case"SET_SHOP_IMAGE_DATA":return Object(d.a)(Object(d.a)({},t),{},{imageData:a.payload,imageProcessing:!1,newImage:!0,showSaveButton:!0});case"SELECT_TYPE":return Object(d.a)(Object(d.a)({},t),{},{type:a.payload,showSaveButton:!0});case"GET_CTA_INFO_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{imageProcessing:!0});case"GET_CTA_INFO_RES":return Object(d.a)(Object(d.a)({},t),{},{color:a.payload.color,displayName:a.payload.displayName,type:a.payload.type,imageUrl:a.payload.imageUrl,modalPrompt:a.payload.modalPrompt,productPagePrompt:a.payload.productPagePrompt,cartPrompt:a.payload.cartPrompt,catalogPrompt:a.payload.catalogPrompt,productPageLocation:a.payload.productPageLocation,customLocation:a.payload.customLocation,postPurchase:a.payload.postPurchase,postPurchaseEmailCampaign:a.payload.postPurchaseEmailCampaign,usesCheckoutWidget:a.payload.usesCheckoutWidget,showRegistrationPage:a.payload.showRegistrationPage,onlyIncludeRegistrableProducts:a.payload.onlyIncludeRegistrableProducts,affirmPublicKey:a.payload.affirmPublicKey,affirmEnabled:a.payload.showAffirm,newImage:!1,imageProcessing:!1});case"CTA_SAVE_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{saveProcessing:!0});case"DISPLAY_CTA_SAVE_BUTTON":return Object(d.a)(Object(d.a)({},t),{},{showSaveButton:a.payload});case"UPDATE_CTA_INFO_RES":return Object(d.a)(Object(d.a)({},t),{},{saveProcessing:!1,showSaveButton:!1,newImage:!1,imageUrl:a.payload.imageUrl?a.payload.imageUrl:t.imageUrl});case"TOGGLE_ONLY_INCLUDE_REGISTRABLE_PRODUCTS_RES":return Object(d.a)(Object(d.a)({},t),{},{onlyIncludeRegistrableProducts:a.payload.onlyIncludeRegistrableProducts});case"LOGOUT":return Object(d.a)(Object(d.a)({},t),U);case"ERROR":switch(a.payload.reqType){case"UPDATE_CTA_INFO_REQ":return Object(d.a)(Object(d.a)({},t),{},{saveProcessing:!0});default:return t}default:return t}},B={initialState:!0,isOnboarding:!1,step:0,maxStep:0,getProcessing:!0},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEXT_STEP":return Object(d.a)(Object(d.a)({},e),{},{step:e.step+1,maxStep:Math.max(e.step+1,e.maxStep)});case"PREVIOUS_STEP":return Object(d.a)(Object(d.a)({},e),{},{step:e.step-1});case"FINISH_ONBOARDING_RES":return Object(d.a)(Object(d.a)({},e),{},{isOnboarding:!1});case"SET_STEP":return Object(d.a)(Object(d.a)({},e),{},{step:t.payload});case"GET_ONBOARDING_INFO_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{initialState:!1});case"LOGOUT":return Object(d.a)(Object(d.a)({},e),B);default:return e}},W={page:"accounts",accounts:[],lastStripeBilling:"",stripeBillingAttempts:0,newStripeAccount:{routingNumber:"",accountNumber:"",accountHolderName:"",accountHolderType:"company"},instructionsDismissed:!1,plaidLinkToken:null,getProcessing:!1},V=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SHOW_ACCOUNTS":return Object(d.a)(Object(d.a)({},a),{},{page:"accounts"});case"ADD_ACCOUNT":return Object(d.a)(Object(d.a)({},a),{},{page:"add_account"});case"NEW_STRIPE_ACCOUNT":return Object(d.a)(Object(d.a)({},a),{},{page:"new_stripe"});case"UPDATE_INPUT":return Object(d.a)(Object(d.a)({},a),{},{newStripeAccount:Object(d.a)(Object(d.a)({},a.newStripeAccount),{},Object(b.a)({},n.payload.billingField,n.payload.text))});case"UPDATE_DEPOSIT":return e=a.accounts.findIndex((function(e){return e.stripeSourceID===n.payload.stripeSourceID})),t=[].concat(Object(E.a)(a.accounts.slice(0,e)),[Object(d.a)(Object(d.a)({},a.accounts[e]),{},Object(b.a)({},n.payload.depositField,n.payload.amount))],Object(E.a)(a.accounts.slice(e+1))),Object(d.a)(Object(d.a)({},a),{},{accounts:t});case"GET_BILLING_PROCESSING":return Object(d.a)(Object(d.a)({},a),{},{getProcessing:!0});case"BILLING_VERIFY_PROCESSING":return Object(d.a)(Object(d.a)({},a),{},{stripeBillingAttempts:a.stripeBillingAttempts+1});case"GET_BILLING_INFO_RES":return Object(d.a)(Object(d.a)({},a),{},{accounts:n.payload.accounts,invoice:n.payload.invoice,getProcessing:!1,lastStripeBilling:n.payload.lastStripeBilling,stripeBillingAttempts:n.payload.stripeBillingAttempts});case"DISMISS_INSTRUCTIONS":return Object(d.a)(Object(d.a)({},a),{},{instructionsDismissed:!0});case"BILLING_SUBMIT_PROCESSING":return Object(d.a)(Object(d.a)({},a),{},{getProcessing:!0});case"CREATE_STRIPE_USER_RES":return Object(d.a)(Object(d.a)({},a),{},{accounts:n.payload.accounts,lastStripeBilling:n.payload.lastStripeBilling,newStripeAccount:{routingNumber:"110000000",accountNumber:"000123456789",accountHolderName:"",accountHolderType:"company"},getProcessing:!1});case"VERIFY_STRIPE_SOURCE_RES":return e=a.accounts.findIndex((function(e){return e.stripeSourceID===n.payload.stripeSourceID})),t=a.accounts.slice(),t=[].concat(Object(E.a)(a.accounts.slice(0,e)),[Object(d.a)(Object(d.a)({},a.accounts[e]),{},{status:n.payload.status})],Object(E.a)(a.accounts.slice(e+1))),Object(d.a)(Object(d.a)({},a),{},{accounts:t});case"SET_DEFAULT_PROCESSING":return Object(d.a)(Object(d.a)({},a),{},{getProcessing:!1});case"SET_STRIPE_DEFAULT_SOURCE_RES":return Object(d.a)(Object(d.a)({},a),{},{accounts:n.payload.accounts,getProcessing:!1});case"PLAID_LINK_TOKEN_PROCESSING":return Object(d.a)(Object(d.a)({},a),{},{getProcessing:!0});case"GET_PLAID_LINK_TOKEN_RES":return Object(d.a)(Object(d.a)({},a),{},{getProcessing:!1,plaidLinkToken:n.payload.plaidLinkToken});case"LOGOUT":return Object(d.a)(Object(d.a)({},a),W);case"ERROR":switch(n.payload.reqType){case"GET_BILLING_INFO_REQ":case"CREATE_STRIPE_USER_REQ":case"SET_STRIPE_DEFAULT_SOURCE_REQ":case"VERIFY_STRIPE_SOURCE_REQ":return Object(d.a)(Object(d.a)({},a),{},{getProcessing:!1});default:return a}default:return a}},K={autoMargin:!0,markupPercentage:50,roundTotal:!0,shopReviewed:!1,saveProcessing:!1,showSaveButton:!1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_AUTO_MARGIN":var a=!0===!e.autoMargin?50:e.markupPercentage,n=!0===!e.autoMargin||e.roundTotal;return Object(d.a)(Object(d.a)({},e),{},{autoMargin:!e.autoMargin,markupPercentage:a,roundTotal:n,showSaveButton:!0});case"SET_CUSTOM_MARGIN":return Object(d.a)(Object(d.a)({},e),{},{markupPercentage:t.payload,showSaveButton:!0});case"SET_ROUND_TOTAL":return Object(d.a)(Object(d.a)({},e),{},{roundTotal:t.payload,showSaveButton:!0});case"AUTOPILOT_SAVE_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{saveProcessing:!0});case"UPDATE_SHOP_SETTINGS_RES":return Object(d.a)(Object(d.a)({},e),{},{saveProcessing:!1,showSaveButton:!1});case"GET_SHOP_SETTINGS_RES":return Object(d.a)(Object(d.a)({},e),{},{autoMargin:t.payload.autoMargin,markupPercentage:t.payload.markupPercentage,roundTotal:t.payload.roundTotal,shopReviewed:t.payload.shopReviewed,manageOEMWarranty:t.payload.manageOEMWarranty});case"LOGOUT":return Object(d.a)(Object(d.a)({},e),K);case"ERROR":switch(t.payload.reqType){case"AUTOPILOT_SAVE_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{saveProcessing:!1});default:return e}default:return e}},Y={modalOpen:!1,modalPage:null,product:null,variant:null,contract:{},submitSaleProcessing:!1,saleComplete:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_SALE":return Object(d.a)(Object(d.a)({},e),{},{product:t.payload.product,modalOpen:!0,modalPage:"variants"});case"SELECT_VARIANT":return Object(d.a)(Object(d.a)({},e),{},{variant:t.payload.variant,contract:{},modalPage:"contracts"});case"SELECT_CONTRACT":return Object(d.a)(Object(d.a)({},e),{},{contract:t.payload.contract,modalPage:"customer"});case"SUBMIT_SALE_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{submitSaleProcessing:!0});case"SUBMIT_SALE_RES":return Object(d.a)(Object(d.a)({},e),{},{modalPage:"finish",submitSaleProcessing:!1});case"EXIT_SALE":return Object(d.a)(Object(d.a)({},e),{},{modalOpen:!1,modalPage:null,product:null,variant:null,contract:{},customer:{}});case"LOGOUT":return Object(d.a)(Object(d.a)({},e),Y);case"ERROR":switch(t.payload.reqType){case"SUBMIT_SALE_REQ":return Object(d.a)(Object(d.a)({},e),{},{submitSaleProcessing:!1});default:return e}default:return e}},q={sendsContractSalesOnly:!1,changeType:"total",graphType:"contracts",averageContractValue:0,averageProductValue:0,attachRate:0,claimRate:0,totalClaimQuantity:0,combinedSales:{runSums:{},graphData:{contractCount:[],contractRevenue:[],storeRevenue:[]}},posSales:{runSums:{},graphData:{contractCount:[],contractRevenue:[],storeRevenue:[]}},ppSales:{runSums:{},graphData:{contractCount:[],contractRevenue:[],storeRevenue:[]}},graphRange:{startDate:new Date,endDate:new Date-1},loading:!0},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_PERFORMANCE_GRAPH_TYPE":return Object(d.a)(Object(d.a)({},e),{},{graphType:t.payload});case"SELECT_PERFORMANCE_CHANGE_TYPE":return Object(d.a)(Object(d.a)({},e),{},{changeType:t.payload});case"GET_GRAPH_DATA":return Object(d.a)(Object(d.a)({},e),{},{graphRange:t.payload,loading:!0});case"GET_GRAPH_DATA_RES":return Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{loading:!1});case"LOGOUT":return Object(d.a)(Object(d.a)({},e),q);case"ERROR":switch(t.payload.reqType){case"GET_GRAPH_DATA_REQ":return Object(d.a)(Object(d.a)({},e),{},{loading:!1});default:return e}default:return e}},X={sales:[],saleCount:0,saleSearch:"",pageNumber:1,invoiceExportModal:!1,invoiceExport:{startDate:new Date,endDate:new Date},invoiceExportProcessing:!1,invoiceExportFile:{data:null,name:null,download:!1},importSalesModal:!1,importStep:"start",importSalesProcessing:!1,importSummary:{insert:[],skuDuplicates:[],ignore:[],ignoreCount:0,insertCount:0,updateCount:0},importFileKey:"",importFileRowCount:0,importResult:{inserted:[],updated:[],ignored:[],ignoreCount:0,insertCount:0,updateCount:0},showResendEmailModal:!1,resendContractSaleId:null,processingGetOrderInfo:!1,orderInfo:null,resendStep:null,processingResend:!1,searchProcessing:!1,refresh:!1,preservePage:!1},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SALE_SEARCH":return Object(d.a)(Object(d.a)({},e),{},{saleSearch:t.payload});case"SET_SALES_PAGE_NUMBER":return Object(d.a)(Object(d.a)({},e),{},{pageNumber:t.payload.pageNumber,refresh:!0,preservePage:!0});case"SEARCH_SALES_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{pageNumber:t.payload.pageNumber,searchProcessing:!0});case"SEARCH_SALES_RES":return Object(d.a)(Object(d.a)({},e),{},{sales:t.payload.sales,saleCount:t.payload.count,searchProcessing:!1,refresh:!1,preservePage:!0});case"SHOW_INVOICE_EXPORT_MODAL":return Object(d.a)(Object(d.a)({},e),{},{invoiceExportModal:!0});case"SHOW_IMPORT_SALES_MODAL":return Object(d.a)(Object(d.a)({},e),{},{importSalesModal:!0});case"CLOSE_IMPORT_SALES_MODAL":return Object(d.a)(Object(d.a)({},e),{},{importSalesModal:!1,importSalesProcessing:!1,importFileKey:"",importFileRowCount:0,importSummary:X.importSummary,importResult:X.importResult,importStep:"start"});case"IMPORT_SALES_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{importProgressPercent:0,importSalesProcessing:!0});case"IMPORT_SALES_SUMMARY_RES":return Object(d.a)(Object(d.a)({},e),{},{importSalesProcessing:!1,importSummary:t.payload.importSummary,importFileKey:t.payload.importFileKey,importFileRowCount:t.payload.rowCount,importStep:"confirm"});case"IMPORT_SALES_RES":return Object(d.a)(Object(d.a)({},e),{},{importSalesProcessing:!1,importResult:t.payload.importResult,importFileKey:"",importFileRowCount:0,refresh:!0,importStep:"finish"});case"SET_INVOICE_RANGE":return Object(d.a)(Object(d.a)({},e),{},{invoiceExport:Object(d.a)(Object(d.a)({},e.invoiceExport),{},{startDate:t.payload.startDate,endDate:t.payload.endDate})});case"INVOICE_EXPORT_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{invoiceExportProcessing:!0});case"GET_INVOICE_EXPORT_RES":return Object(d.a)(Object(d.a)({},e),{},{invoiceExportProcessing:!1,invoiceExportFile:Object(d.a)(Object(d.a)({},e.invoiceExportFile),{},{data:t.payload.data,name:t.payload.name,download:!0})});case"SET_INVOICE_DOWNLOAD_FALSE":return Object(d.a)(Object(d.a)({},e),{},{invoiceExportFile:Object(d.a)(Object(d.a)({},e.invoiceExportFile),{},{data:null,name:null,download:!1})});case"CANCEL_INVOICE_EXPORT":return Object(d.a)(Object(d.a)({},e),{},{invoiceExportModal:!1});case"SHOW_CONFIRM_RESEND_EMAIL":return Object(d.a)(Object(d.a)({},e),{},{resendContractSaleId:t.payload.saleId,showResendEmailModal:!0,resendStep:"confirm"});case"RESEND_EMAIL_INFO_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{processingGetOrderInfo:!0});case"RESEND_EMAIL_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{orderInfo:t.payload,processingGetOrderInfo:!1});case"CANCEL_RESEND_EMAIL":return Object(d.a)(Object(d.a)({},e),{},{showResendEmailModal:!1,resendContractSaleId:null,processingGetOrderInfo:!1,orderInfo:null,resendStep:null});case"RESEND_EMAIL_SUBMIT_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{processingResend:!0});case"RESEND_EMAIL_SUBMIT_RES":return Object(d.a)(Object(d.a)({},e),{},{processingResend:!1,resendStep:"finish"});case"EXIT_RESEND_EMAIL":return Object(d.a)(Object(d.a)({},e),{},{showResendEmailModal:!1,resendContractSaleId:null,processingGetOrderInfo:!1,orderInfo:null,resendStep:null});case"ERROR":switch(t.payload.reqType){case"SEARCH_SALES_REQ":return Object(d.a)(Object(d.a)({},e),{},{searchProcessing:!1});case"GET_INVOICE_EXPORT_RES":return Object(d.a)(Object(d.a)({},e),{},{invoiceExportProcessing:!1,invoiceExportFile:Object(d.a)(Object(d.a)({},e.invoiceExportFile),{},{data:null,name:null,download:!1})});case"IMPORT_SALES_SUMMARY_REQ":return Object(d.a)(Object(d.a)({},e),{},{importSalesProcessing:!1,importStep:"start"});default:return e}default:return e}},J={email:"",updateProcessing:!1,passwordUpdated:!1,showSaveButton:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{updateProcessing:!0});case"GET_USER_EMAIL_RES":return Object(d.a)(Object(d.a)({},e),{},{email:t.payload.email});case"UPDATE_USER_RES":return Object(d.a)(Object(d.a)({},e),{},{updateProcessing:!1,passwordUpdated:!0,showSaveButton:!1});case"CLEAR_SETTINGS_STATUS":return Object(d.a)(Object(d.a)({},e),{},{passwordUpdated:!1});case"SHOW_SAVE_BUTTON":return Object(d.a)(Object(d.a)({},e),{},{showSaveButton:!0});case"LOGOUT":return Object(d.a)(Object(d.a)({},e),J);case"ERROR":switch(t.payload.reqType){case"UPDATE_USER_REQ":return Object(d.a)(Object(d.a)({},e),{},{updateProcessing:!1});default:return e}default:return e}},te={allUsers:[],isProcessing:!1,isSuccess:!1,loading:!0,newUser:{}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_SHOP_USERS_RES":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,allUsers:t.payload});case"RESET_USER_PASSWORD_RES":case"TOGGLE_USER_DISABLED_RES":case"UPDATE_USER_ACCOUNT_TYPE_RES":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,allUsers:e.allUsers.map((function(e){return e.id===t.payload.id?t.payload:e}))});case"CREATE_USER":return Object(d.a)(Object(d.a)({},e),{},{isProcessing:!0});case"CREATE_USER_RES":return Object(d.a)(Object(d.a)({},e),{},{allUsers:[t.payload].concat(e.allUsers),newUser:Object(d.a)({},t.payload),isProcessing:!1,isSuccess:!0});case"CLEAR_USER_FEEDBACK":case"CLEAR_USER_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isProcessing:!1,isSuccess:!1,newUser:{}});case"ERROR":switch(t.payload.reqType){case"CREATE_USER_REQ":return Object(d.a)(Object(d.a)({},e),{},{isProcessing:!1,isSuccess:!1});default:return e}default:return e}},ne=a(25),re={step:"customers",modal:null,searchType:"email",selectedCustomer:{contact:"",dbContactType:"",hasHiClydeAccount:!1,lastPurchase:"",orderIdsToHightlight:[]},selectedOrder:{address:{},clydeOrderId:"",activeContracts:[],expiredContracts:[],fulfilledContracts:[],cancelledContracts:[],eligibleProducts:[],ineligibleProducts:[],activeContractCount:0,expiredContractCount:0,fulfilledContractCount:0,cancelledContractCount:0,eligibleProductCount:0,ineligibleProductCount:0,fullName:"",orderClaims:{},orderDate:"",orderId:"",merchantOrderId:"",productNames:[],saleIds:[],transferHistory:[]},ordersOverview:{customerName:"",totalActiveContractCount:0,totalEligibleProductCount:0,totalExpiredContractCount:0},claimsOverView:{claimsOpen:0,claimsResolved:0,claimsDenied:0},customers:[],orders:[],productRegistrations:[],isProcessing:!1,actionsProcessing:{updateDeliveryDate:!1,saveNewContractSaleSerialNumber:!1},resendSaleEmail:{contact:"",contactType:"",processing:!1,show:!1,step:"confirm",validContact:!1},resendPpEmail:{contact:"",processing:!1,show:!1,step:"confirm",validContact:!1},displayClaimHistory:{claimHistory:[],processing:!1,submitProcessing:!1,sale:{}},bulkContractSale:{actionComplete:!1,cart:{},productContracts:[],processing:!1,submitProcessing:!1,termsOnOrder:[]},fileClaim:{actionComplete:!1,claimData:{claimType:"",claimIssueTypes:[],customerEmail:"",failureDate:"",narrative:"",stillFunctional:null,supportEmail:"",supportName:"",usedAsIntended:null},claimId:"",customerInfo:{},processing:!1,productParts:[],remainingLimitOfLiability:0,sale:{},savedClaim:{claimState:""},step:"claim",submitProcessing:!1,referralEmailProcessing:!1},cancelContract:{processing:!1,purchaseSource:"",saleId:"",step:"confirm"},updateSaleOEM:{processing:!1,saleId:"",step:"confirm",oemWarrantyLength:0},shopClaimSettings:{autoAdjudicate:!1,retailerResolutions:!1,repairEnabled:!1,replaceEnabled:!1,promoCodeEnabled:!1,payoutEnabled:!1},changeOrderCustomer:{processing:!1,finished:!1},canSerialNumberSearch:!1,receipt:{processing:!1,url:null}},oe=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"BACK_TO_CUSTOMER_SEARCH":return re;case"BACK_TO_ORDER_SEARCH":return Object(d.a)(Object(d.a)({},t),{},{step:"orders",isProcessing:!1,selectedOrder:re.selectedOrder,receipt:re.receipt});case"COP_CAN_SERIAL_NUMBER_SEARCH_RES":return Object(d.a)(Object(d.a)({},t),{},{canSerialNumberSearch:a.payload});case"LOAD_INITIAL_CUSTOMERS_RES":case"SEARCH_CUSTOMERS_RES":return Object(d.a)(Object(d.a)({},t),{},{customers:a.payload,isProcessing:!1});case"SET_SEARCH_TYPE":return Object(d.a)(Object(d.a)({},t),{},{searchType:a.payload});case"SELECT_CUSTOMER":return Object(d.a)(Object(d.a)({},t),{},{selectedCustomer:{orderIdsToHightlight:a.payload.externalCartIds||[],contact:a.payload.contact,customerId:a.payload.customerId,dbContactType:a.payload.dbContactType,phone:a.payload.phone,lastPurchase:a.payload.lastPurchase||""},step:"orders"});case"GET_CUSTOMER_ORDERS_RES":return Object(d.a)(Object(d.a)({},t),{},{orders:a.payload.orders,productRegistrations:a.payload.productRegistrations,ordersOverview:a.payload.ordersOverview,claimsOverView:a.payload.claimsOverView,selectedCustomer:Object(d.a)(Object(d.a)({},t.selectedCustomer),a.payload.customerAccountStatus),isProcessing:!1});case"SELECT_ORDER":return Object(d.a)(Object(d.a)({},t),{},{selectedOrder:Object(d.a)(Object(d.a)({},t.selectedOrder),a.payload),step:"products",receipt:re.receipt});case"SELECT_REGISTRATION":return Object(d.a)(Object(d.a)({},t),{},{selectedOrder:Object(d.a)(Object(d.a)({},t.selectedOrder),a.payload),step:"registrations",receipt:re.receipt});case"GET_ORDER_DETAILS_RES":return Object(d.a)(Object(d.a)({},t),{},{selectedOrder:Object(d.a)(Object(d.a)({},t.selectedOrder),a.payload),isProcessing:!1});case"CUSTOMERS_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{isProcessing:!0});case"LOGOUT":return Object(d.a)(Object(d.a)({},t),re);case"PRODUCT_DELIVERY_DATE_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{actionsProcessing:Object(d.a)(Object(d.a)({},t.actionsProcessing),{},{updateDeliveryDate:!0})});case"UPDATE_PRODUCT_DELIVERY_DATE_RES":return Object(d.a)(Object(d.a)({},t),{},{selectedOrder:Object(d.a)(Object(d.a)({},t.selectedOrder),{},{eligibleProducts:a.payload.eligibleProducts,ineligibleProducts:a.payload.ineligibleProducts,eligibleProductCount:a.payload.eligibleProductCount,ineligibleProductCount:a.payload.ineligibleProductCount}),actionsProcessing:Object(d.a)(Object(d.a)({},t.actionsProcessing),{},{updateDeliveryDate:!1})});case"RESEND_SALE_EMAIL_SUBMIT_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{resendSaleEmail:Object(d.a)(Object(d.a)({},t.resendSaleEmail),{},{processing:!0})});case"RESEND_SALE_EMAIL_SUBMIT_RES":return Object(d.a)(Object(d.a)({},t),{},{resendSaleEmail:Object(d.a)(Object(d.a)({},t.resendSaleEmail),{},{processing:!1,step:"finish"})});case"SHOW_RESEND_SALE_EMAIL":return Object(d.a)(Object(d.a)({},t),{},{modal:"resendSaleEmail",resendSaleEmail:Object(d.a)(Object(d.a)({},t.resendSaleEmail),{},{contact:t.selectedCustomer.contact,show:!0})});case"CANCEL_RESEND_SALE_EMAIL":return Object(d.a)(Object(d.a)({},t),{},{modal:null,resendSaleEmail:{contact:"",contactType:"",processing:!1,show:!1,step:"confirm",validContact:!1}});case"UPDATE_CONTACT_RESEND_SALE_EMAIL":return Object(d.a)(Object(d.a)({},t),{},{resendSaleEmail:Object(d.a)(Object(d.a)({},t.resendSaleEmail),{},{contact:a.payload.contact,validContact:a.payload.isValid,contactType:a.payload.contactType})});case"RESEND_PP_EMAIL_SUBMIT_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{resendPpEmail:Object(d.a)(Object(d.a)({},t.resendPpEmail),{},{processing:!0})});case"RESEND_PP_EMAIL_SUBMIT_RES":return Object(d.a)(Object(d.a)({},t),{},{resendPpEmail:Object(d.a)(Object(d.a)({},t.resendPpEmail),{},{processing:!1,step:"finish"})});case"SHOW_RESEND_PP_EMAIL":return Object(d.a)(Object(d.a)({},t),{},{modal:"resendPpEmail",resendPpEmail:Object(d.a)(Object(d.a)({},t.resendPpEmail),{},{contact:t.selectedCustomer.contact,show:!0})});case"CANCEL_RESEND_PP_EMAIL":return Object(d.a)(Object(d.a)({},t),{},{modal:null,resendPpEmail:{contact:"",processing:!1,show:!1,step:"confirm",validContact:!1}});case"SHOW_DISPLAY_CLAIM_HISTORY":return Object(d.a)(Object(d.a)({},t),{},{modal:"displayClaimHistory",displayClaimHistory:Object(d.a)(Object(d.a)({},t.displayClaimHistory),{},{data:a.payload.data,warrantyType:a.payload.warrantyType})});case"CANCEL_DISPLAY_CLAIM_HISTORY":return Object(d.a)(Object(d.a)({},t),{},{modal:null,displayClaimHistory:{claimHistory:[],processing:!1,submitProcessing:!1,sale:{}}});case"GET_ALL_CLAIMS_ON_SALE_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{displayClaimHistory:Object(d.a)(Object(d.a)({},t.displayClaimHistory),{},{processing:!0})});case"GET_ALL_CLAIMS_ON_SALE_RES":return Object(d.a)(Object(d.a)({},t),{},{displayClaimHistory:Object(d.a)(Object(d.a)({},t.displayClaimHistory),{},{processing:!1,claimHistory:a.payload})});case"SHOW_FILE_COP_CLAIM":var n=a.payload.type,r=Object(d.a)(Object(d.a)({},t),{},{modal:"fileClaim",fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{claimType:n,claimData:Object(d.a)(Object(d.a)({},t.fileClaim.claimData),{},{customerEmail:"email"===t.selectedCustomer.dbContactType?t.selectedCustomer.contact:""}),savedClaim:{claimState:""}})});return"extendedWarranty"===n?r.fileClaim.sale=a.payload.info:r.fileClaim.lineItem=a.payload.info,r;case"CANCEL_FILE_COP_CLAIM":return Object(d.a)(Object(d.a)({},t),{},{modal:null,fileClaim:re.fileClaim});case"GET_COP_SALE_INFO_FOR_CLAIM_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{processing:!0})});case"GET_COP_SALE_INFO_FOR_CLAIM_RES":return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{claimData:Object(d.a)(Object(d.a)({},t.fileClaim.claimData),{},{supportEmail:a.payload.supportInfo.email,supportName:a.payload.supportInfo.firstName}),processing:!1,productParts:a.payload.productParts,remainingLimitOfLiability:a.payload.remainingLimitOfLiability}),shopClaimSettings:a.payload.shopClaimSettings});case"UPDATE_FILE_COP_CLAIM_INPUT":return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{claimData:Object(d.a)(Object(d.a)({},t.fileClaim.claimData),{},Object(b.a)({},a.payload.name,a.payload.value))})});case"SHOW_FILE_COP_CLAIM_RESOLUTION_FORM":return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{actionComplete:!1,step:"resolution"})});case"FILE_COP_CLAIM_SUBMIT_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{submitProcessing:!0})});case"FILE_COP_CLAIM_SUBMIT_RES":var o=t.selectedOrder;if(Array.isArray(a.payload.claimsForLineItem)&&a.payload.claimsForLineItem.length){var c=a.payload.claimsForLineItem[0].lineItemId,l=a.payload.claimsForLineItem[0].isEligible,s=o.eligibleProducts.map((function(e){return e.lineItemId===c&&(e.claims=a.payload.claimsForLineItem),e})),i=o.ineligibleProducts.map((function(e){return e.lineItemId===c&&(e.claims=a.payload.claimsForLineItem),e}));return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{actionComplete:!0,claimId:a.payload.dbClaim.claimId,savedClaim:Object(d.a)(Object(d.a)({},t.fileClaim.savedClaim),{},{claimState:a.payload.dbClaim.claimState,denialReason:a.payload.dbClaim.denialReason}),submitProcessing:!1}),selectedOrder:Object(d.a)(Object(d.a)({},t.selectedOrder),{},{eligibleProducts:l?s:Object(E.a)(o.eligibleProducts),ineligibleProducts:l?Object(E.a)(o.ineligibleProducts):i})})}var m=Object(E.a)(o.activeContracts),u=m.map((function(e){var t=e.contractSales.map((function(e){return e.saleId===a.payload.dbClaim.saleId?Object(d.a)(Object(d.a)({},e),{},{claimId:a.payload.dbClaim.claimId,claimState:a.payload.dbClaim.claimState,claimDate:a.payload.dbClaim.createdAt}):e}));return Object(d.a)(Object(d.a)({},e),{},{contractSales:t})}));return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{actionComplete:!0,claimId:a.payload.dbClaim.claimId,savedClaim:Object(d.a)(Object(d.a)({},t.fileClaim.savedClaim),{},{claimState:a.payload.dbClaim.claimState,denialReason:a.payload.dbClaim.denialReason}),submitProcessing:!1}),selectedOrder:Object(d.a)(Object(d.a)({},t.selectedOrder),{},{activeContracts:u})});case"CLOSE_CLAIM_RESOLUTION_RES":return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{savedClaim:Object(d.a)(Object(d.a)({},t.fileClaim.savedClaim),{},{claimState:a.payload.claimState})})});case"SHOW_BULK_COP_CONTRACT_SALE":e={};var p,_=Object(ne.a)(t.selectedOrder.eligibleProducts);try{for(_.s();!(p=_.n()).done;){var h=p.value;e[h.lineItemId]=[]}}catch(I){_.e(I)}finally{_.f()}return Object(d.a)(Object(d.a)({},t),{},{modal:"bulkContractSale",bulkContractSale:Object(d.a)(Object(d.a)({},t.bulkContractSale),{},{cart:e,processing:!0})});case"CANCEL_BULK_COP_CONTRACT_SALE":return Object(d.a)(Object(d.a)({},t),{},{modal:null,bulkContractSale:Object(d.a)({},re.bulkContractSale)});case"GET_BULK_COP_CONTRACT_SALE_RES":return Object(d.a)(Object(d.a)({},t),{},{bulkContractSale:Object(d.a)(Object(d.a)({},t.bulkContractSale),{},{processing:!1,productContracts:a.payload.productContracts,termsOnOrder:a.payload.termsOnOrder})});case"SELECT_BULK_COP_CONTRACT_SALE_CONTRACT":return(e=t.bulkContractSale.cart[a.payload.lineItemId])[a.payload.idx]=a.payload.selectedContract,Object(d.a)(Object(d.a)({},t),{},{bulkContractSale:Object(d.a)(Object(d.a)({},t.bulkContractSale),{},{cart:Object(d.a)(Object(d.a)({},t.bulkContractSale.cart),{},Object(b.a)({},a.payload.lineItemId,e))})});case"SELECT_ALL_BULK_COP_CONTRACT_SALE_CONTRACTS":return Object(d.a)(Object(d.a)({},t),{},{bulkContractSale:Object(d.a)(Object(d.a)({},t.bulkContractSale),{},{cart:a.payload})});case"BULK_COP_CONTRACT_SALE_SUBMIT_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{bulkContractSale:Object(d.a)(Object(d.a)({},t.bulkContractSale),{},{submitProcessing:!0})});case"BULK_COP_CONTRACT_SALE_SUBMIT_RES":return Object(d.a)(Object(d.a)({},t),{},{bulkContractSale:Object(d.a)(Object(d.a)({},t.bulkContractSale),{},{actionComplete:!0,submitProcessing:!1})});case"SHOW_CANCEL_CONTRACT":return Object(d.a)(Object(d.a)({},t),{},{modal:"cancelContract",cancelContract:Object(d.a)(Object(d.a)({},t.cancelContract),{},{saleId:a.payload.saleId,purchaseSource:a.payload.purchaseSource})});case"CANCEL_CANCEL_CONTRACT":return Object(d.a)(Object(d.a)({},t),{},{modal:null,cancelContract:Object(d.a)(Object(d.a)({},t.cancelContract),{},{processing:!1,saleId:"",step:"confirm"})});case"CANCEL_CONTRACT_SUBMIT_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{cancelContract:Object(d.a)(Object(d.a)({},t.cancelContract),{},{processing:!0})});case"CANCEL_CONTRACT_SUBMIT_RES":return Object(d.a)(Object(d.a)({},t),{},{cancelContract:Object(d.a)(Object(d.a)({},t.cancelContract),{},{processing:!1,step:"finish"})});case"SHOW_CHANGE_ORDER_CUSTOMER":return Object(d.a)(Object(d.a)({},t),{},{modal:"changeOrderCustomer"});case"HIDE_CHANGE_ORDER_CUSTOMER":return t.changeOrderCustomer.finished?Object(d.a)(Object(d.a)({},t),{},{step:"customers",selectedOrder:re.selectedOrder,changeOrderCustomer:re.changeOrderCustomer,modal:null}):Object(d.a)(Object(d.a)({},t),{},{modal:null});case"CHANGE_ORDER_CUSTOMER_SUBMIT_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{changeOrderCustomer:Object(d.a)(Object(d.a)({},t.changeOrderCustomer),{},{processing:!0})});case"UPDATE_ORDER_CUSTOMER_RES":return Object(d.a)(Object(d.a)({},t),{},{changeOrderCustomer:{processing:!1,finished:!0}});case"POPULATE_CUSTOMERS_STATE_WITH_NEW_ORDER_INFO":return Object(d.a)(Object(d.a)({},re),{},{step:"products",ordersOverview:Object(d.a)(Object(d.a)({},re.ordersOverview),{},{customerName:"".concat(a.payload.customerInfo.firstName," ").concat(a.payload.customerInfo.lastName)}),selectedOrder:Object(d.a)(Object(d.a)({},re.selectedOrder),{},{clydeOrderId:a.payload.orderId,fullName:"".concat(a.payload.customerInfo.firstName," ").concat(a.payload.customerInfo.lastName),orderDate:new Date,orderId:a.payload.orderId}),selectedCustomer:Object(d.a)(Object(d.a)({},re.selectedCustomer),{},{contact:a.payload.customerInfo.email,dbContactType:"email"})});case"SHOW_NEW_ORDER_MODAL":return Object(d.a)(Object(d.a)({},t),{},{modal:"newOrder"});case"HIDE_NEW_ORDER_MODAL":return Object(d.a)(Object(d.a)({},t),{},{modal:null});case"POPULATE_CUSTOMERS_STATE_WITH_CLAIMS_CUSTOMER_INFO":return Object(d.a)(Object(d.a)({},re),{},{step:"orders",ordersOverview:Object(d.a)(Object(d.a)({},re.ordersOverview),{},{customerName:"".concat(a.payload.firstName," ").concat(a.payload.lastName)}),selectedCustomer:Object(d.a)(Object(d.a)({},re.selectedCustomer),{},{contact:a.payload.contact,dbContactType:a.payload.contactType})});case"UPDATE_CONTRACT_SALE_OEM_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{updateSaleOEM:Object(d.a)(Object(d.a)({},t.updateSaleOEM),{},{processing:!0})});case"UPDATE_CONTRACT_SALE_OEM_RES":return Object(d.a)(Object(d.a)({},t),{},{updateSaleOEM:Object(d.a)(Object(d.a)({},t.updateSaleOEM),{},{processing:!1,step:"finish"})});case"SHOW_UPDATE_OEM":return Object(d.a)(Object(d.a)({},t),{},{modal:"updateOEM",updateSaleOEM:Object(d.a)(Object(d.a)({},t.updateSaleOEM),{},{saleId:a.payload.saleId,oemWarrantyLength:a.payload.oemWarrantyLength})});case"CANCEL_OEM_UPDATE":return Object(d.a)(Object(d.a)({},t),{},{modal:null,updateSaleOEM:{processing:!1,saleId:"",step:"confirm"}});case"SAVE_LINE_ITEM_SERIAL_NUMBER_RES":var g=t.selectedOrder,f=Object(E.a)(g.eligibleProducts),v=f.map((function(e){return e.lineItemId===a.payload.id?Object(d.a)(Object(d.a)({},e),{},{lineItemSerialNumber:a.payload.serialNumber}):e})),y=Object(E.a)(g.ineligibleProducts),N=y.map((function(e){return e.lineItemId===a.payload.id?Object(d.a)(Object(d.a)({},e),{},{lineItemSerialNumber:a.payload.serialNumber}):e}));return Object(d.a)(Object(d.a)({},t),{},{selectedOrder:Object(d.a)(Object(d.a)({},t.selectedOrder),{},{eligibleProducts:v,ineligibleProducts:N})});case"SAVE_CONTRACT_SALE_SERIAL_NUMBER":return Object(d.a)(Object(d.a)({},t),{},{actionsProcessing:Object(d.a)(Object(d.a)({},t.actionsProcessing),{},{saveNewContractSaleSerialNumber:!0})});case"SAVE_CONTRACT_SALE_SERIAL_NUMBER_RES":var O=t.selectedOrder,C=Object(E.a)(O.activeContracts),S=C.map((function(e){var t=e.contractSales.map((function(e){return e.saleId===a.payload.id?Object(d.a)(Object(d.a)({},e),{},{serialNumber:a.payload.serialNumber}):e}));return Object(d.a)(Object(d.a)({},e),{},{contractSales:t})}));return Object(d.a)(Object(d.a)({},t),{},{selectedOrder:Object(d.a)(Object(d.a)({},t.selectedOrder),{},{activeContracts:S}),actionsProcessing:Object(d.a)(Object(d.a)({},t.actionsProcessing),{},{saveNewContractSaleSerialNumber:!1})});case"SEND_HI_CLYDE_REFERRAL_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{referralEmailProcessing:!0})});case"SEND_HI_CLYDE_REFERRAL_RES":return Object(d.a)(Object(d.a)({},t),{},{fileClaim:Object(d.a)(Object(d.a)({},t.fileClaim),{},{referralEmailProcessing:!1})});case"RECEIPT_PROCESSING":return Object(d.a)(Object(d.a)({},t),{},{receipt:{url:null,processing:!0}});case"GET_RECEIPT_FILE_RES":return Object(d.a)(Object(d.a)({},t),{},{receipt:{url:a.payload.receiptLink,processing:!1}});case"RESET_RECEIPT_FILE":return Object(d.a)(Object(d.a)({},t),{},{receipt:{url:null,processing:!1}});default:return t}},ce={actionComplete:!1,cart:[],customerInfo:{email:"",phone:"",firstName:"",lastName:"",address1:"",address2:"",city:"",province:"",zip:"",country:"US"},productCatalogue:[],productCatalogueCount:0,productSearch:"",requestProcessing:!1,showCatalogueModal:!1,submitProcessing:!1,step:"customer"},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HIDE_CATALOGUE_MODAL":return Object(d.a)(Object(d.a)({},e),{},{showCatalogueModal:!1});case"UPDATE_NEW_ORDER_CART_PRICE":var a=t.payload,n=a.itemIdx,r=a.newPrice,o=Object(E.a)(e.cart);return o[n].price=r,Object(d.a)(Object(d.a)({},e),{},{cart:o});case"UPDATE_NEW_ORDER_CART_QUANTITY":var c=t.payload,l=c.itemIdx,s=c.newQuantity,i=Object(E.a)(e.cart);return i[l].quantity=s,Object(d.a)(Object(d.a)({},e),{},{cart:i});case"UPDATE_NEW_ORDER_INPUT":return Object(d.a)(Object(d.a)({},e),{},Object(b.a)({},t.payload.name,t.payload.value));case"MOVE_TO_NEW_ORDER_CART_STEP":return Object(d.a)(Object(d.a)({},e),{},{step:"cart"});case"MOVE_TO_NEW_ORDER_CUSTOMER_STEP":return Object(d.a)(Object(d.a)({},e),{},{step:"customer"});case"UPDATE_NEW_ORDER_CUSTOMER_INPUT":return Object(d.a)(Object(d.a)({},e),{},{customerInfo:Object(d.a)(Object(d.a)({},e.customerInfo),{},Object(b.a)({},t.payload.name,t.payload.value))});case"NEW_ORDER_PRODUCT_COUNT_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{requestProcessing:!0});case"NEW_ORDER_PRODUCT_COUNT_RES":return Object(d.a)(Object(d.a)({},e),{},{requestProcessing:!1,productCatalogueCount:t.payload});case"NEW_ORDER_PRODUCT_SEARCH_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{requestProcessing:!0,showCatalogueModal:!0});case"NEW_ORDER_PRODUCT_SEARCH_RES":return Object(d.a)(Object(d.a)({},e),{},{requestProcessing:!1,productCatalogue:t.payload});case"UPDATE_NEW_ORDER_CART":return Object(d.a)(Object(d.a)({},e),{},{cart:t.payload});case"NEW_ORDER_SUBMIT_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{submitProcessing:!0});case"NEW_ORDER_SUBMIT_RES":return Object(d.a)(Object(d.a)({},e),{},{actionComplete:!0,orderId:t.payload,submitProcessing:!1});case"FINISH_NEW_ORDER":return ce;default:return e}},se={errors:[]},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR":return{errors:[t.payload.name].concat(Object(E.a)(e.errors))};case"CLEAR_ERROR":return{errors:e.errors.slice(1)};default:return e}},me={licensingInfo:{}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LICENSING_INFO_RES":return Object(d.a)(Object(d.a)({},e),{},{licensingInfo:t.payload.licensingInfo});default:return e}},ue={collectSerialNumber:"hidden",loading:!0},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SHOP_PREFERENCES_PROCESSING":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"SET_SHOP_PREFERENCES_RES":case"GET_SHOP_PREFERENCES_RES":return Object(d.a)(Object(d.a)({},e),{},{collectSerialNumber:t.payload.preferences.collectSerialNumber||"hidden",loading:!1});default:return e}},_e=Object(i.c)({auth:h,claimDetail:f,claimResolution:y,claimsList:S,onboarding:H,products:R,productRegistrations:T,contractSale:Q,profile:j,contactInfo:D,developers:x,integrations:M,customize:G,billing:V,autopilot:z,performance:$,sales:Z,user:ee,userManagement:ae,customers:oe,newOrder:le,error:ie,license:de,preferences:pe}),he=a(294),Ee=a.n(he),ge=a(295),fe=a.n(ge),be=a(296),ve=a.n(be),ye=new u.a,Ne=function(){return{type:"WEBSOCKET:CONNECT",payload:{url:window._env_.REACT_APP_WEBSOCKET_URL,token:ye.get("clydeToken"),platform:ye.get("clydePlatform")}}},Oe=function(e){return e.id=ve()(),ye.get("clydeShopId")&&(e.payload.shopId=ye.get("clydeShopId")),{type:"WEBSOCKET:SEND",payload:JSON.stringify(e)}},Ce=function(e,t){return{type:"WEBSOCKET:CONNECTING",payload:{event:e,websocket:t}}},Se=function(e){return{type:"WEBSOCKET:OPEN",payload:{event:e}}},Ie=function(e){return{type:"WEBSOCKET:CLOSED",payload:{event:e}}},Re=function(e){var t=JSON.parse(e.data);return{type:t.type,payload:t.payload}},Pe=function(){var e,t,a=[],n=function(){e&&(console.warn("Closing WebSocket connection to ".concat(e.url," ...")),e.close(),e=null)};return function(r){return function(o){return function(c){switch(c.type){case"WEBSOCKET:CONNECT":n(),function(a,n){var r=a.dispatch;e=new WebSocket(n.url),t=n;var o=Ee()(i.d,[r]);e.onopen=o(Se),e.onclose=o(Ie),e.onmessage=o(Re);var c=o(Ce);e.onconnecting=fe()(c,[e])}(r,c.payload),o(c);break;case"WEBSOCKET:DISCONNECT":n(),o(c);break;case"WEBSOCKET:SEND":e&&1===e.readyState?e.send(c.payload):e&&0===e.readyState?a.push(c.payload):console.warn("WebSocket is closed, ignoring. Trigger a WEBSOCKET_CONNECT first."),o(c);break;case"WEBSOCKET:OPEN":for(e.send(JSON.stringify({type:"AUTH",payload:{source:"dashboard",token:t.token,platform:t.platform}}));a.length>0;)e.send(a.pop());o(c);break;case"WEBSOCKET:CLOSED":new Set(["/shopify-install","/login-processing","/verify-shopify","/verify-shopify-user","/bigcommerce-install","/login-processing","/skeleton-key","/login"]).has(window.location.pathname)||window.location.reload(),o(c);break;default:o(c)}}}}}(),Te=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,i.d),we=Object(i.e)(_e,Te(Object(i.a)(Pe,m.a,(function(){return function(e){return function(t){t.payload&&t.payload.redirectUrl?window.location=t.payload.redirectUrl:e(t)}}})))),je=a(6),ke=a(7),Ae=a(9),De=a(8),Le=a(690),xe=a(680),Fe=a(302),Me=(a(438),new u.a),Ue=window._env_.REACT_APP_SESSION_DURATION||12,Ge="production"===window._env_.REACT_APP_ENV,Be=function(e){return Me.remove("clydeShopId"),Me.remove("clydeToken"),Me.remove("clydePlatform"),Me.set("clydePlatform","Shopify",{path:"/",secure:Ge,maxAge:3600*Ue}),Oe({type:"GET_SHOPIFY_SHOP_OAUTH_LINK_REQ",payload:{shopName:e.shopName,source:"dashboard",platform:"Shopify"}})},He=function(e){return Me.remove("clydeShopId"),Me.remove("clydeToken"),Me.remove("clydePlatform"),Oe({type:"CHECK_SKELETON_KEY",payload:{key:e.sk}})},We=function(e){return Me.remove("clydeShopId"),Me.remove("clydeToken"),Me.remove("clydePlatform"),Me.set("clydePlatform","Shopify",{path:"/",secure:Ge,maxAge:3600*Ue}),Oe({type:"SHOPIFY_INSTALL_REQ",payload:{query:e,source:"dashboard",platform:"Shopify"}})},Ve=function(e){return Me.remove("clydeShopId"),Me.remove("clydeToken"),Me.remove("clydePlatform"),Me.set("clydePlatform","BigCommerce",{path:"/",secure:Ge,maxAge:3600*Ue}),Oe({type:"BC_INSTALL_REQ",payload:{query:e,source:"dashboard",platform:"BigCommerce"}})},Ke=function(){return{type:"RETURNED_TO_LOGIN",payload:{}}},ze=function(e){return{type:"SET_LOGIN_PLATFORM",payload:{platform:e}}},Ye=function(e){return Me.remove("clydeShopId"),Me.remove("clydeToken"),Me.remove("clydePlatform"),function(t){t(Oe({type:"SUBMIT_LOGIN_REQ",payload:{email:e.email,password:e.password,source:"dashboard",platform:"Clyde"}})),t({type:"LOGIN_PROCESSING",payload:{platform:"Clyde"}})}},Qe=function(e){return Me.remove("clydeShopId"),Me.remove("clydeToken"),Me.remove("clydePlatform"),function(t){t(Oe({type:"SUBMIT_FIRST_LOGIN_REQ",payload:{email:e.email,tempPassword:e.tempPassword,newPassword:e.newPassword,source:"dashboard",platform:"Clyde"}})),t({type:"LOGIN_PROCESSING",payload:{platform:"Clyde"}})}},qe=function(e){return Oe({type:"VERIFY_SHOPIFY_SHOP_OAUTH_REQ",payload:e})},$e=function(e){return Oe({type:"VERIFY_SHOPIFY_USER_OAUTH_REQ",payload:e})},Xe=function(e){return Oe({type:"VERIFY_BC_OAUTH_REQ",payload:Object(d.a)(Object(d.a)({},e),{},{source:"dashboard",platform:"BigCommerce"})})},Ze=function(){return{type:"CLEAR_EXPIRED_TOKEN",payload:{}}},Je=function(e){return{type:"SET_LOGIN_EMAIL",payload:e}},et=function(){return Me.remove("clydeShopId"),Me.remove("clydeToken"),Me.remove("clydePlatform"),function(e){e({type:"LOGOUT",payload:{}}),e(Oe({type:"LOGOUT_REQ",payload:{}}))}},tt=function(e){return function(t){t(Oe({type:"CHECK_USER_FIRST_LOGIN_REQ",payload:{userId:e}})),t({type:"CHECK_USER_FIRST_LOGIN_PROCESSING",payload:{}})}},at=function(e){return Oe({type:"RESET_USER_PASSWORD_EMAIL_REQ",payload:{userEmail:e}})},nt=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={shopName:""},e.shopNameSubmit=function(t){t.preventDefault(),e.props._getShopifyShopOAuthLink(e.state)},e.shopNameChange=function(t){e.setState({shopName:t.target.value})},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){this.shopInput.focus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"gradient"},r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"login-layout"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"login-tile col-8 offset-2 col-lg-6 offset-lg-3"},r.a.createElement("img",{alt:"",src:"/images/Clyde_Logo_Wordmark.svg"}),r.a.createElement("div",{className:"login-tile__tagline"},"Own the post-purchase experience"),r.a.createElement("form",{onSubmit:this.shopNameSubmit},r.a.createElement("div",{className:"shopify-login-form row"},r.a.createElement("input",{spellCheck:"false",id:"enter-shop",placeholder:"example.myshopify.com",className:"col-12 shopify-login-form__input",type:"text",onChange:this.shopNameChange,ref:function(t){e.shopInput=t},value:this.state.shopName}),r.a.createElement("button",{type:"submit",className:"col-lg-12 shopify-login-form__button"},"Install"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10 offset-1 col-lg-6 offset-lg-3 col-md-8 offset-md-2 shopify-permissions"},r.a.createElement("div",{className:"shopify-permissions__header col-12"},"Authorize Clyde to:"),r.a.createElement("div",{className:"permission-name col-12"},"Manage products"),r.a.createElement("div",{className:"col-12"},"Clyde adds and updates contracts dynamically and respects your store\u2019s internal structure. We don\u2019t mess with collections or make your product list messy."),r.a.createElement("div",{className:"col-12 shopify-permissions__separator"}),r.a.createElement("div",{className:"permission-name col-12"},"View orders"),r.a.createElement("div",{className:"col-12"},"By viewing orders we can track whether or not one of our insurance partners contracts have sold. We only collect information on orders with our contracts in them."),r.a.createElement("div",{className:"col-12 shopify-permissions__separator"}),r.a.createElement("div",{className:"permission-name col-12"},"View customers"),r.a.createElement("div",{className:"col-12"},"When a customer makes a purchase with a contract we\u2019ll send them their terms and conditions. We also need this information to report claims to your dashboard."),r.a.createElement("div",{className:"col-12 shopify-permissions__separator"}),r.a.createElement("div",{className:"permission-name col-12"},"Manage your online store"),r.a.createElement("div",{className:"col-12"},"This allows us to place your customized call-to-action on your page without you needing to add custom code!"),r.a.createElement("div",{className:"col-12 shopify-permissions__separator"}),r.a.createElement("div",{className:"permission-name col-12"},"Manage orders"),r.a.createElement("div",{className:"col-12"},"Infrequently, we\u2019ll need to issue a refund to a customer if they cancel their contract. They get refunded a pro-rated amount based on their home state and the underwriter. "),r.a.createElement("div",{className:"col-12 shopify-permissions__separator"}))))))}}]),a}(n.Component),rt=Object(l.b)((function(e){return e.auth}),(function(e){return Object(i.b)({_getShopifyShopOAuthLink:Be},e)}))(nt),ot=a(298),ct=a.n(ot),lt=a(31),st=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={shopName:"",error:!1,errorMessage:!0},e.handleChange=function(t){var a;e.setState((a={},Object(b.a)(a,t.target.name,t.target.value),Object(b.a)(a,"error",!1),Object(b.a)(a,"errorMessage",""),a))},e.handleSubmit=function(t){t.preventDefault(),e.state.shopName.trim().length?e.props.submitAction(e.state):e.setState({error:!0,errorMessage:"Please provide your Shopify shop's domain"})},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){this.shopInput.focus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"shopify-login-form row"},r.a.createElement("input",{required:!0,spellCheck:"false",id:"enter-shop",placeholder:"example.myshopify.com",className:"col-12 shopify-login-form__input",type:"text",name:"shopName",onChange:this.handleChange,ref:function(t){e.shopInput=t},value:this.state.shopName}),r.a.createElement("button",{type:"submit",onClick:this.handleSubmit,className:"col-12 shopify-login-form__button"},"Log in"),this.state.error&&r.a.createElement("span",{className:"login-form__error col-lg-12"},this.state.errorMessage))}}]),a}(n.Component),it=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={password:"",errorMessage:"",error:!1},e.handlePasswordChange=function(t){e.setState({password:t.target.value,error:!1,errorMessage:""})},e.handleEmailChange=function(t){e.props.setEmail(t.target.value),e.setState({error:!1,errorMessage:""})},e.handleSubmit=function(t){if(t.preventDefault(),e.props.email.trim().length&&e.state.password.trim().length){var a={email:e.props.email,password:e.state.password};e.setState({error:!1,errorMessage:""}),e.props.submitAction(a)}else e.setState({error:!0,errorMessage:"Username and password required"})},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){this.emailInput.focus()}},{key:"componentDidUpdate",value:function(e){e.platform!==this.props.platform&&(this.emailInput.focus(),this.setState({error:!1,errorMessage:""}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"clyde-login-form clyde-login row"},r.a.createElement("input",{required:!0,spellCheck:"false",id:"email",placeholder:"Email address",className:"col-12 clyde-login-form__input",type:"text",name:"email","data-test":"email",onChange:function(t){e.handleEmailChange(t)},ref:function(t){e.emailInput=t},value:this.props.email}),r.a.createElement("input",{required:!0,spellCheck:"false",id:"password",placeholder:"Password",className:"col-12 clyde-login-form__input",type:"password",name:"password","data-test":"password",onChange:function(t){e.handlePasswordChange(t)},value:this.state.password}),r.a.createElement("button",{type:"submit",onClick:function(t){e.handleSubmit(t)},className:"col-lg-12 clyde-login-form__button","data-test":"login"},"Log in"),this.state.error&&r.a.createElement("span",{className:"login-form__error col-lg-12"},this.state.errorMessage))}}]),a}(r.a.Component),mt=a(143),dt=a.n(mt),ut=a(3),pt={ProductLimitExceeded:"New product limit exceeded.",MissingProductField:"Missing required fields.",SKUDuplicate:"Duplicate SKU.",StripeError:"An error occurred while contacting Stripe.",StripeAuthError:"Stripe couldn't connect this account. Try again or contact us for assistance.",PlaidAuthFailed:"Plaid couldn't connect this account. Try again or contact us for assistance.",MicrodepositAmounts:"Invalid microdeposit amounts. Verify that the amount entered is in cents.",StripeBankAccountExists:"This bank account has already been added to your Clyde account",LoginAuthFailed:"Could not log in with the provided credentials.",TokenExpired:"Your session has expired.",UserVerificationFailed:"Invalid Email/Password.",UserDoesNotExist:"If a matching account was found an email was sent to your inbox to allow you to reset your password.",RateLimitReached:"Too many attempts, try again in a couple minutes.",IncorrectPassword:"Invalid password.",FileTooLarge:"Your file is too large.",NoContractsMatched:"No contracts available for export just yet...",NoConcurrentLaunch:"Your contracts are already launching. Please wait for this process to finish before launching again.",NoRejectedLaunch:"Your shop is currently unable to launch. Please contact us for more assistance.",CreateUser:"There was an error when attempting to create this user. Please contact us for more assistance.",DuplicateEmail:"That email address has already been taken.",InvalidInvoiceDates:"No billing charges were made in the provided date range.",InvalidClaimsDates:"There are no Limited Warranty Claims for the provided claims.",UnexpectedError:"An unexpected error occurred.",StrongerPasswordRequired:"Please use a stronger password.  Try using numbers, capitals and special characters.",CSVTooLarge:"Uploaded CSV exceeds row limit (max 1000).",MissingShopifyShopData:"You must fill out your shop's address in Shopify before installing Clyde"},_t=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={email:"",tempPassword:"",passwordFeedback:"",newPassword:""},e.handlePasswordChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.handleSubmit=function(t){if(t.preventDefault(),dt()(e.state.newPassword).score<3)e.setState({passwordFeedback:pt.StrongerPasswordRequired});else{var a={email:e.props.email,tempPassword:e.state.tempPassword,newPassword:e.state.newPassword};e.props.submitAction(a)}},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){this.tempPasswordInput.focus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"clyde-login-form clyde-login row"},r.a.createElement(ut.i,{id:"email",placeholder:"Email address",className:"col-12 clyde-login-form__input",name:"email",value:this.props.email,disabled:!0}),r.a.createElement("input",{spellCheck:"false",id:"tempPassword",placeholder:"Temp Password",className:"col-12 clyde-login-form__input",type:"password",name:"tempPassword",onChange:function(t){e.handlePasswordChange(t)},ref:function(t){e.tempPasswordInput=t},value:this.state.tempPassword}),r.a.createElement("input",{spellCheck:"false",id:"newPassword",placeholder:"New Password",className:"col-12 clyde-login-form__input",type:"password",name:"newPassword",onChange:function(t){e.handlePasswordChange(t)},value:this.state.newPassword}),r.a.createElement("button",{type:"submit",onClick:function(t){e.handleSubmit(t)},className:"col-lg-12 clyde-login-form__button"},"Change Password"),r.a.createElement("div",{className:"clyde-login-form__feedback"},this.state.passwordFeedback))}}]),a}(r.a.Component),ht=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleEmailChange=function(t){e.props.setEmail(t.target.value)},e.handleSubmit=function(t){t.preventDefault(),e.props.submitAction(e.props.email)},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){this.props.passwordResetSuccess||this.emailInput.focus()}},{key:"render",value:function(){var e=this,t=this.props.passwordResetSuccess,a=this.handleEmailChange,n=this.handleSubmit;return r.a.createElement("div",{className:"clyde-login-form clyde-login row"},r.a.createElement("input",{spellCheck:"false",id:"email",placeholder:"Email address",className:"col-12 clyde-login-form__input",type:"text",name:"email",onChange:a,ref:function(t){e.emailInput=t},value:this.props.email}),t?r.a.createElement("span",{className:"col-lg-12"},"If you have a Clyde account, you will receive an email with instructions regarding password reset."):r.a.createElement("button",{type:"submit",onClick:n,className:"col-lg-12 clyde-login-form__button"},"Send reset email"))}}]),a}(r.a.Component),Et=a(4),gt=a.n(Et),ft=function(e){var t=e._setLoginPlatform,a=e.platform,n=e.embeddedBy;if("Clyde"!==a.name&&a.name!==n&&n)return null;var o=r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"platform-option__logo",src:a.imageSrc,alt:a.name}),r.a.createElement("span",{className:"platform-option__name"},a.displayName)),c=gt()("platform-container",{"col-6":!n,"col-12":n});return r.a.createElement("div",{className:c},"BigCommerce"===a.name?r.a.createElement("a",{className:"platform-option",href:"https://login.bigcommerce.com/login/",rel:"noopener noreferrer",target:"_blank"},o):r.a.createElement("div",{className:"platform-option",onClick:function(){t(a.name)}},o))},bt=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={platform:e.props.platform||"Clyde",firstTimeUser:!1,passwordReset:!1,embeddedBy:""},e.handleSetPlatform=function(t){e.props._setLoginPlatform(t)},e.handleEnter=function(t){t.preventDefault();for(var a=t.target.getElementsByTagName("input"),n={},r=0;r<a.length;r++)"text"!==a[r].type&&"password"!==a[r].type||(n[a[r].name]=a[r].value);e.handleSubmit(n)},e.handleSubmit=function(t){switch(e.state.platform){case"Shopify":e.props._getShopifyShopOAuthLink(t);break;case"Magento":e.props._submitUserLogin(t);break;case"Clyde":e.state.firstTimeUser?e.props._submitUserFirstLogin(t):e.state.passwordReset?e.props._resetUserPasswordByEmail(t.email):e.props._submitUserLogin(t)}},e.togglePasswordReset=function(t){t.preventDefault(),e.setState({passwordReset:!e.state.passwordReset})},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=ct.a.parse(this.props.location.search.slice(1)),t=window&&window.location.ancestorOrigins&&window.location.ancestorOrigins.item(0),a="string"===typeof t&&t.indexOf("bigcommerce")>-1;e.uid&&this.props._checkUserFirstLogin(e.uid),a&&!this.state.embeddedBy&&this.setState({embeddedBy:"BigCommerce"})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.firstTimeUser&&this.setState({firstTimeUser:e.firstTimeUser}),e.platform!==this.props.platform&&this.setState({platform:e.platform}),!1===this.props.loginProcessing&&!0===e.loginProcessing&&this.props.history.push("/login-processing"),!1===this.props.validSession&&!0===e.validSession&&this.props.history.push("/products"),!1===this.props.returnToLogin&&!0===e.returnToLogin&&e.expiredToken&&"Shopify"===e.expiredToken.platform&&(this.handleSetPlatform("Shopify"),this.props._getShopifyShopOAuthLink({shopName:e.expiredToken.domain}),this.props._clearExpiredToken())}},{key:"render",value:function(){var e,t,a,n=this.props,o=n.passwordResetSent,c=n.email,l=n._getShopifyShopOAuthLink,s=n._setEmail,i=n._submitUserFirstLogin,m=n._submitUserLogin,d=n._resetUserPasswordByEmail,u=n._setLoginPlatform,p=this.state,_=p.firstTimeUser,h=p.platform,E=p.passwordReset,g=p.embeddedBy,f={name:"Clyde",displayName:"Email",imageSrc:"/images/api.png"},b={name:"Shopify",displayName:"Shopify",imageSrc:"/images/shopify.png"},v={name:"Magento",displayName:"Magento",imageSrc:"/images/magento.png"},y={name:"BigCommerce",displayName:"BigCommerce",imageSrc:"/images/bigCommerce.png"},N={name:"SFCC",displayName:"SFCC",imageSrc:"/images/sfcc-logo.svg"};switch(h){case"Shopify":a=[f,v,y,N],e=st,t=l;break;case"Magento":a=[f,b,y,N],e=it,t=m;break;case"BigCommerce":a=[f,v,b,N],e=it,t=m;break;case"SFCC":a=[f,v,b,y],e=it,t=m;break;default:a=[b,v,y,N],_?(e=_t,t=i):E?(e=ht,t=d):(e=it,t=m)}return r.a.createElement("div",{className:"gradient"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | Login")),r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"login-layout"},r.a.createElement("div",{className:"row w-100"},r.a.createElement("div",{className:"login-tile col-8 offset-2 col-lg-6 offset-lg-3"},r.a.createElement("img",{alt:"clyde logo",src:"/images/Clyde_Logo_Wordmark.svg"}),r.a.createElement("div",{className:"login-tile__tagline"},"Own the post-purchase experience"),r.a.createElement("form",{onSubmit:this.handleEnter},r.a.createElement(e,{submitAction:t,setEmail:s,email:c,platform:h,passwordResetSuccess:o}),"Clyde"===h&&r.a.createElement("button",{onClick:this.togglePasswordReset,className:"login-tile__password-reset-button"},E?"Back to login":"Forgot your password?"))),r.a.createElement("div",{className:"select-platform-tile col-8 offset-2 col-lg-6 offset-lg-3"},r.a.createElement("h3",null,"Log in with:"),r.a.createElement("div",{className:"platform-list row"},a.map((function(e){return r.a.createElement(ft,{key:"".concat(e.name,"-login-item"),platform:e,embeddedBy:g,_setLoginPlatform:u})}))))))))}}]),a}(r.a.Component),vt=Object(Fe.a)(Object(l.b)((function(e){return e.auth}),(function(e){return Object(i.b)({_getShopifyShopOAuthLink:Be,_setLoginPlatform:ze,_submitUserLogin:Ye,_setEmail:Je,_submitUserFirstLogin:Qe,_clearExpiredToken:Ze,_checkUserFirstLogin:tt,_resetUserPasswordByEmail:at},e)}))(bt)),yt=a(45),Nt=a.n(yt),Ot=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.search.slice(1);this.props._checkSkeletonKey(Nt.a.parse(e))}},{key:"componentDidUpdate",value:function(){!0===this.props.authed&&setTimeout((function(){window.location="/"}),2e3)}},{key:"render",value:function(){return r.a.createElement("div",{className:"gradient"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))}}]),a}(r.a.Component),Ct=Object(Fe.a)(Object(l.b)((function(e){return e.auth}),(function(e){return Object(i.b)({_checkSkeletonKey:He},e)}))(Ot)),St=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.search.slice(1);this.props._verifyShopifyShopOAuth(Nt.a.parse(e))}},{key:"render",value:function(){return r.a.createElement("div",{className:"gradient"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))}}]),a}(r.a.Component),It=Object(Fe.a)(Object(l.b)((function(e){return e.auth}),(function(e){return Object(i.b)({_verifyShopifyShopOAuth:qe},e)}))(St)),Rt=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.search.slice(1);this.props._verifyShopifyUserOAuth(Nt.a.parse(e))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){""!==e.shopId&&""!==e.userId&&this.props.history.push("/welcome")}},{key:"render",value:function(){return r.a.createElement("div",{className:"gradient"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))}}]),a}(r.a.Component),Pt=Object(Fe.a)(Object(l.b)((function(e){return e.auth}),(function(e){return Object(i.b)({_verifyShopifyUserOAuth:$e},e)}))(Rt)),Tt=new u.a,wt=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.search.slice(1);this.props._verifyBCOAuth(Nt.a.parse(e))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){""!==e.shopId&&Tt.get("clydeShopId")&&e.shopId===Tt.get("clydeShopId")&&this.props.history.push("/welcome")}},{key:"render",value:function(){return r.a.createElement("div",{className:"gradient"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))}}]),a}(r.a.Component),jt=Object(Fe.a)(Object(l.b)((function(e){return e.auth}),(function(e){return Object(i.b)({_verifyBCOAuth:Xe},e)}))(wt)),kt=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.search.slice(1);this.props.shopifyInstall(Nt.a.parse(e))}},{key:"render",value:function(){return r.a.createElement("div",{className:"gradient"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))}}]),a}(r.a.Component);var At=Object(Fe.a)(Object(l.b)(null,(function(e){return Object(i.b)({shopifyInstall:We},e)}))(kt)),Dt=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.search.slice(1);this.props._bigCommerceInstall(Nt.a.parse(e))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){-1!==e.shopId&&this.props.history.push("/welcome")}},{key:"render",value:function(){return r.a.createElement("div",{className:"gradient"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))}}]),a}(r.a.Component),Lt=Object(Fe.a)(Object(l.b)((function(e){return e.auth}),(function(e){return Object(i.b)({_bigCommerceInstall:Ve},e)}))(Dt)),xt=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===this.props.loginProcessing&&!1===e.loginProcessing&&!1===e.loginFailed?window.location="/products":!0===this.props.loginProcessing&&!1===e.loginProcessing&&!0===e.loginFailed&&(this.props.firstTimeUser?this.props.history.goBack():this.props.history.push("/login"))}},{key:"render",value:function(){return r.a.createElement("div",{className:"gradient"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))}}]),a}(r.a.Component),Ft=Object(Fe.a)(Object(l.b)((function(e){return e.auth}))(xt)),Mt=a(677),Ut=function(e){var t=e.count;return r.a.createElement("span",{className:"badge"},t)},Gt=function(e){var t=e.activeTab,a=e.link,n=e.linkName,o=e.imageSrc,c=e.claims,l="claims"===a,s=c>0,i=t?"nav-buttons__item--active":"",m=t?"nav-buttons__icon--active":"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.j,{position:"right",hideIndicator:!0,label:r.a.createElement("div",{className:"nav-bar__tooltip__text"},n)},r.a.createElement(Mt.a,{"data-test":"".concat(a,"Icon"),"data-tip":!0,"data-for":"tooltip-".concat(a),to:"/".concat(a),"data-ix":a,className:"nav-buttons__item ".concat(i)},l&&s?r.a.createElement(Ut,{count:c}):"",r.a.createElement("img",{className:m,alt:"tab-".concat(a),src:"/images/".concat(o),width:"24"}))))},Bt=a(32),Ht=a.n(Bt),Wt=Object(l.b)((function(e){return{platform:e.auth.platform,launchProcessing:e.products.launchProcessing}}))((function(e){var t=e.platform,a=e.launchProcessing,n={transition:"opacity 1200ms ease"},o={entering:{opacity:1,display:"block"},entered:{opacity:1,display:"block"},exiting:{opacity:1,display:"block"},exited:{opacity:0,display:"none"}},c={entering:"Contracts updating",entered:"Contracts updating",exiting:"Contracts updated!",exited:"Contracts updating"},l=a;return r.a.createElement("div",{className:"launch-processing-container"},("Shopify"===t||"BigCommerce"===t)&&r.a.createElement(Ht.a,{in:l,timeout:500},(function(e){return r.a.createElement("h5",{className:"launch-processing-animation",style:Object(d.a)(Object(d.a)({},n),o[e])},c[e],"exiting"!==e&&r.a.createElement("span",{className:"launching-dots-container"},r.a.createElement("span",{className:"launching-dots-container__dot"},"."),r.a.createElement("span",{className:"launching-dots-container__dot"},"."),r.a.createElement("span",{className:"launching-dots-container__dot"},".")))})))})),Vt=function(e){var t,a,n,o=e.isOnboarding,c=e.step,l=e.history,s=e.platform,i=e.isAdmin,m=e.loading,d=e.profile,u=e._logout,p=e.claimsForResolutionCount;if(o)t=[{title:"Welcome"},{title:"Store info"},{title:"Call-to-Action"},{title:"Billing"},{title:"Terms and Conditions"}][c].title,a=[];else{var _=e.location.pathname.split("/")[1];t={welcome:"Welcome",customize:"Call-to-Action",sales:"Sales",customers:"Customers",settings:"Settings",products:"Products",contracts:"Contracts",claims:"Claims",performance:"Performance"}[_],n=e.location.pathname.slice(1),a=i?[{imageSrc:"Performance.svg",name:"Performance",link:"performance",pageNames:["Performance"]},{imageSrc:"Sales.svg",name:"Sales",link:"sales",pageNames:["Sales"]},{imageSrc:"Customers.svg",name:"Customers",link:"customers",pageNames:["Customers"]},{imageSrc:"Products.svg",name:"Products",link:"products",pageNames:["Products"]},{imageSrc:"Contracts.svg",name:"Contracts",link:"contracts",pageNames:["Contracts"]},{imageSrc:"Claims.svg",name:"Claims",link:"claims",pageNames:["Claims","Claim"]},{imageSrc:"Customize.svg",name:"Call-to-Action",link:"customize",pageNames:["Call-to-Action"]}]:[{imageSrc:"Performance.svg",name:"Performance",link:"performance",pageNames:["Performance"]},{imageSrc:"Sales.svg",name:"Sales",link:"sales",pageNames:["Sales"]},{imageSrc:"Customers.svg",name:"Customers",link:"customers",pageNames:["Customers"]},{imageSrc:"Products.svg",name:"Products",link:"products",pageNames:["Products"]},{imageSrc:"Claims.svg",name:"Claims",link:"claims",pageNames:["Claims","Claim"]}]}return r.a.createElement("div",{className:"nav-bar"},r.a.createElement("div",{className:"nav-bar__top"},r.a.createElement("div",{className:"nav-bar__top__content"},r.a.createElement("h5",null,d.shopName),r.a.createElement(Wt,null),r.a.createElement("h5",{className:"nav-bar-page-name"},t),"BigCommerce"!==s&&r.a.createElement("div",{onClick:function(){u(),l.push("/login")},className:"nav-bar-logout"},r.a.createElement("img",{className:"nav-bar-logout__img",alt:"Log out","data-test":"logOut",src:"/images/logout.png"})))),r.a.createElement("div",{"data-collapse":"small","data-animation":"default","data-duration":"400",className:"nav-bar__left"},r.a.createElement("div",{className:"nav-bar__left__content"},r.a.createElement("nav",{className:"nav-buttons"},m?r.a.createElement(ut.l,{dotSize:"large",dotColor:"clydeBlack"}):a.map((function(e,a){return r.a.createElement(Gt,{claims:p,key:"nav-".concat(a),tabIdx:a,buttonStep:a,linkName:e.name,link:e.link,imageSrc:e.imageSrc,activeTab:e.pageNames.indexOf(t)>-1})})))),!o&&r.a.createElement("span",{className:"nav-buttons-bottom"},r.a.createElement("a",{href:"https://docs.joinclyde.com/docs",className:"nav-buttons-bottom__item nav-buttons-bottom__item--support",rel:"noopener noreferrer",target:"_blank"},r.a.createElement("img",{className:"nav-buttons-bottom__item__image nav-buttons-bottom__item__image--support",alt:"terms","data-test":"questionMark",src:"/images/QuestionMark.svg"})),r.a.createElement(Mt.a,{"data-test":"settingsIcon",className:"nav-buttons-bottom__item",to:"/settings/account"},n&&n.includes("settings")?r.a.createElement("img",{className:"nav-buttons-bottom__item__image",alt:"settings",src:"/images/Settings.svg"}):r.a.createElement("img",{className:"nav-buttons-bottom__item__image",alt:"settings",src:"/images/SettingsEmpty.svg"})))),r.a.createElement("div",{className:"nav-bar__clyde-logo"},r.a.createElement("img",{className:"nav-bar__clyde-logo__image",alt:"clyde",src:"/images/Clyde_Nav_Icon.svg"})))},Kt=Object(Fe.a)(Object(l.b)((function(e){return Object(d.a)(Object(d.a)({},e.onboarding),{},{isAdmin:"admin"===e.auth.accountType,loading:e.auth.loading,platform:e.auth.platform,profile:e.profile,claimsForResolutionCount:e.claimsList.claimsForResolutionCount})}),(function(e){return Object(i.b)({_logout:et},e)}))(Vt)),zt=a(678),Yt=function(){return{type:"NEXT_STEP",payload:{}}},Qt=function(){return Oe({type:"FINISH_ONBOARDING_REQ",payload:{}})},qt=function(e){return{type:"SET_STEP",payload:e}},$t=function(){return function(e){e({type:"ONBOARDING_GET_PROCESSING",payload:{}}),e(Oe({type:"GET_ONBOARDING_INFO_REQ",payload:{}}))}},Xt=function(e,t,a){var n=t;return a&&Number.isNaN(+t.replace(/-| /g,""))?{type:"",payload:{}}:(a&&(n=t.replace(".","")),"province"===e&&(n=t.toUpperCase()),{type:"SET_TEXT_FIELD",payload:{profileField:e,text:n}})},Zt=function(e,t){return{type:"SET_BOOLEAN_FIELD",payload:{profileField:e,value:t}}},Jt=function(){return function(e){e({type:"SHOP_GET_PROCESSING",payload:{}}),e(Oe({type:"GET_SHOP_INFO_REQ",payload:{}}))}},ea=function(e){var t={firstName:e.firstName,lastName:e.lastName,email:e.email,shopName:e.shopName,phoneNumber:e.phoneNumber,domain:e.domain,address1:e.address1,address2:e.address2,city:e.city,province:e.province,zip:e.zip,country:e.country,warrantyType:e.warrantyType,oemWarrantyLength:Number(e.oemWarrantyLength),warrantyDataAccessible:e.warrantyDataAccessible},a=Object(d.a)(Object(d.a)({},t),{},{type:"Primary Contact",secondaryEmail:e.secondaryEmail,hasUpdate:!0});return e.contactId&&(a.id=e.contactId),delete a.shopName,delete a.domain,delete a.warrantyType,delete a.warrantyDataAccessible,delete a.oemWarrantyLength,Object(d.a)(Object(d.a)({},t),{},{contactInfo:[a]})},ta=function(e){var t=ea(e);return function(e){e({type:"SHOP_PROFILE_SAVE_PROCESSING",payload:{}}),e(Oe({type:"UPDATE_SHOP_INFO_REQ",payload:t}))}},aa=function(e,t,a){for(var n=ea(e),r={},o={},c=0,l=["firstName","lastName","email","phoneNumber","address1","address2","city","province","country","zip","secondaryEmail"];c<l.length;c++){var s=l[c];r[s]=t[s]||"",o[s]=a[s]||""}return t.id&&(r.id=t.id),a.id&&(o.id=a.id),n.contactInfo.push(Object(d.a)(Object(d.a)({},r),{},{hasUpdate:!0,type:"Technical Contact"})),n.contactInfo.push(Object(d.a)(Object(d.a)({},o),{},{hasUpdate:!0,type:"Claims Contact"})),Oe({type:"COMPLETE_ONBOARDING_PROFILE_REQ",payload:n})},na=function(e){return{type:"SET_VALIDATION_ERRORS",payload:{formErrors:e}}},ra=function(e){var t=e.name,a=e.value,n=e.numeric,r=e.index,o=a;return n&&Number.isNaN(+a.replace(/-| /g,""))?{type:"",payload:{}}:(n&&(o=a.replace(".","")),"province"===t&&(o=a.toUpperCase()),{type:"SET_CONTACT_TEXT_FIELD",payload:{name:t,value:o,index:r}})},oa=function(e){var t=e.contactList;return function(e){e({type:"SHOP_CONTACTS_SAVE_PROCESSING",payload:{}}),e(Oe({type:"UPDATE_SHOP_CONTACTS_REQ",payload:{contactInfo:t}}))}},ca=function(e){return{type:"SET_CONTACT_VALIDATION_ERRORS",payload:{formErrors:e}}},la=function(e){return/^#[0-9A-F]{6}$/.test(e)?{type:"SELECT_COLOR",payload:{colorCode:e}}:{type:"SELECT_INVALID_COLOR",payload:{colorCode:e}}},sa=function(e){return{type:"SET_DISPLAY_NAME",payload:e}},ia=function(e){return{type:"SET_CUSTOM_LOCATION",payload:e}},ma=function(e){return{type:"TOGGLE_PROMPT",payload:e}},da=function(){return{type:"TOGGLE_POST_PURCHASE"}},ua=function(e){return{type:"SET_PRODUCT_PAGE_LOCATION",payload:e}},pa=function(e){return{type:"SELECT_TYPE",payload:e}},_a=function(){return function(e){e({type:"GET_CTA_INFO_PROCESSING",payload:{}}),e(Oe({type:"GET_CTA_INFO_REQ",payload:{}}))}},ha=function(e){return{type:"SET_SHOP_IMAGE_DATA",payload:e}},Ea=function(e){var t={displayName:e.displayName,color:e.color,validColor:e.validColor,modalPrompt:e.modalPrompt,cartPrompt:e.cartPrompt,productPagePrompt:e.productPagePrompt,catalogPrompt:e.catalogPrompt,type:e.type,productPageLocation:e.productPageLocation,customLocation:e.customLocation,shopImageData:e.imageData,newImage:e.newImage,postPurchaseEmailCampaign:e.postPurchaseEmailCampaign};return function(e){e({type:"CTA_SAVE_PROCESSING",payload:{}}),e(Oe({type:"UPDATE_CTA_INFO_REQ",payload:t}))}},ga=function(e){return function(t){t(Oe({type:"TOGGLE_ONLY_INCLUDE_REGISTRABLE_PRODUCTS",payload:{onlyIncludeRegistrableProducts:e}}))}},fa=function(e){var t={displayName:e.displayName,color:e.color,validColor:e.validColor,modalPrompt:e.modalPrompt,cartPrompt:e.cartPrompt,productPagePrompt:e.productPagePrompt,catalogPrompt:e.catalogPrompt,type:e.type,productPageLocation:e.productPageLocation,customLocation:e.customLocation,shopImageData:e.imageData,newImage:e.newImage};return Oe({type:"COMPLETE_ONBOARDING_CUSTOMIZE_REQ",payload:t})},ba=function(e){var t=e.affirmEnabled,a=e.affirmPublicKey;return Oe({type:"UPDATE_AFFIRM_INTEGRATION_REQ",payload:{affirmEnabled:t,affirmPublicKey:a}})},va=function(e,t){return{type:"UPDATE_INPUT",payload:{billingField:e,text:t}}},ya=function(e,t,a){return{type:"UPDATE_DEPOSIT",payload:{stripeSourceID:e,depositField:t,amount:a}}},Na=function(e,t,a){return function(n){n({type:"BILLING_VERIFY_PROCESSING",payload:{}}),n(Oe({type:"VERIFY_STRIPE_SOURCE_REQ",payload:{stripeSourceID:e,amounts:[t,a]}}))}},Oa=function(){return{type:"DISMISS_INSTRUCTIONS",payload:{}}},Ca=function(){return{type:"ADD_ACCOUNT",payload:{}}},Sa=function(){return{type:"SHOW_ACCOUNTS",payload:{}}},Ia=function(){return{type:"NEW_STRIPE_ACCOUNT",payload:{}}},Ra=function(e){var t="plaid"===e.method?{auth:"plaid",plaidToken:e.plaidToken,metadata:e.metadata}:{auth:"stripe",stripeToken:e.stripeToken};return function(e){e({type:"BILLING_SUBMIT_PROCESSING",payload:{}}),e(Oe({type:"CREATE_STRIPE_USER_REQ",payload:t}))}},Pa=function(){return function(e){e({type:"GET_BILLING_PROCESSING",payload:{}}),e(Oe({type:"GET_BILLING_INFO_REQ",payload:{}}))}},Ta=function(e){return function(t){t({type:"SET_DEFAULT_PROCESSING",payload:{}}),t(Oe({type:"SET_STRIPE_DEFAULT_SOURCE_REQ",payload:{stripeSourceID:e}}))}},wa=function(){return function(e){e({type:"PLAID_LINK_TOKEN_PROCESSING",payload:{}}),e(Oe({type:"GET_PLAID_LINK_TOKEN_REQ",payload:{}}))}},ja=function(){return Oe({type:"COMPLETE_ONBOARDING_BILLING_REQ",payload:{}})},ka=a(96),Aa=a(22),Da=a.n(Aa),La=function(e){for(var t={},a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];switch(r){case"email":case"secondaryEmail":e[r]&&!Da.a.isEmail(e[r])&&(t[r]=!0);break;case"phoneNumber":xa(e.phoneNumber)&&(t.phoneNumber=!0)}}return e.email||e.phoneNumber||!e.firstName&&!e.lastName||(t.email=!0),t},xa=function(e){return!(!e||Da.a.isEmpty(e))&&!Da.a.isMobilePhone(e,"any")},Fa=function(e,t){return"US"===t&&!["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","GU","PR","VI"].find((function(t){return t===e}))||!!Da.a.isEmpty(e)},Ma=function(e,t){if(Da.a.isEmpty(e)&&Da.a.equals(t,"--"))return!0;var a=Da.a.isPostalCodeLocales.find((function(e){return e===t}));return!(!a||Da.a.isPostalCode(e,a))},Ua=function(e,t){var a={};for(var n in e)switch(n){case"firstName":case"lastName":case"address1":case"city":Da.a.isEmpty(e[n])&&(a[n]=!0);break;case"shopName":if("Shopify"===t)break;Da.a.isEmpty(e.shopName)&&(a.shopName=!0);break;case"domain":if("Shopify"===t)break;Da.a.isURL(e.domain)||(a.domain=!0);break;case"email":Da.a.isEmail(e.email)||(a.email=!0);break;case"secondaryEmail":e.secondaryEmail&&!Da.a.isEmail(e.secondaryEmail)&&(a.secondaryEmail=!0);break;case"phoneNumber":xa(e.phoneNumber)&&(a.phoneNumber=!0);break;case"province":Fa(e.province,e.country)&&(a.province=!0);break;case"country":Da.a.equals(e.country,"--")&&(a.country=!0);break;case"zip":Ma(e.zip,e.country)&&(a.zip=!0)}return a},Ga=function(e){return r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-container__backdrop"}),r.a.createElement("div",{className:"clyde-modal-content"},r.a.createElement("div",{className:"onboarding-warning-modal onboarding-warning-modal","data-test":"warningModal"},r.a.createElement("h3",null,"Thanks again for downloading Clyde!"),r.a.createElement("br",null),r.a.createElement("p",null,"A Merchant Onboarding Specialist is currently reviewing your store to ensure it's fully\n          eligible for a protection program and will let you know within 48 hours whether there's a fit.\n          In the meantime, feel free to learn more about what types of merchants perform best with Clyde ",r.a.createElement("a",{href:"https://docs.joinclyde.com/docs/clydes-ideal-merchant-profile"},"here"),". You may continue the onboarding process now, but you'll need to wait for approval from our team to launch your program."),r.a.createElement(ut.a,{className:"onboarding-warning-modal__button",onClick:e._nextStep,"data-test":"gotIt"},"Got it!"),r.a.createElement("p",{className:"onboarding-warning-modal__small-print"},"If you're already working with Clyde's Implementations Team, disregard the above, and continue with onboarding!"))))},Ba=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showWarning:!1},e.handleNextStep=function(){var t=e.props,a=t.onboarding.step,n=t.profile,r=t.platform,o=t.technicalContact,c=t.claimsContact,l=t.customize,s=t._completeBillingStep,i=t._completeCustomizeStep,m=t._completeProfileStep,d=t._setContactValidationErrors,u=t._setValidationErrors,p=t._nextStep,_=["welcome","shopInfo","customize","connect"];switch(_[a]){case"welcome":break;case"shopInfo":var h=Ua(n,r),E=La(o),g=La(c);if(!(Object(ka.isEmpty)(h)&&Object(ka.isEmpty)(E)&&Object(ka.isEmpty)(g)))return u(h),void d([E,{},g]);m(n,o,c);break;case"customize":i(l);break;case"connect":s()}if("shopInfo"===_[a]){var f=e.state.showWarning;if(e.setState({showWarning:!f}),!f)return}p()},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onboarding,a=e._setStep,n=this.state.showWarning,o=function(e){return gt()("onboarding-step onboarding-step--step-".concat(e),{"onboarding-step--active":t.step===e,"onboarding-step--complete":t.step>e})},c=function(e){return gt()("onboarding-text",{"onboarding-text--active":t.step===e})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"onboarding-process-container"},r.a.createElement("div",{className:"onboarding-process-content"},r.a.createElement("div",{className:"process-bar-container"},r.a.createElement("div",{className:"process-bar"}),[{classname:"welcome",label:"Welcome"},{className:"basic-info",label:"Shop Info"},{className:"customize",label:"Customize"},{className:"connect",label:"Billing"}].map((function(e,n){return n<=t.maxStep?r.a.createElement("div",{key:"onboarding-".concat(n),"data-test":"onboardingItem-".concat(n),onClick:function(){return a(n)},className:o(n)},r.a.createElement("h5",{className:c(n)},e.label)):r.a.createElement("div",{key:"onboarding-".concat(n),className:o(n)},r.a.createElement("h5",{className:c(n)},e.label))}))),r.a.createElement("div",{className:"process-button-container",id:"onboarding-next-button"},r.a.createElement("span",{onClick:this.handleNextStep,className:"process-button","data-test":"next"},"Next")))),n&&r.a.createElement(Ga,{_nextStep:this.handleNextStep}))}}]),a}(n.Component),Ha=Object(zt.a)(Object(l.b)((function(e){return{onboarding:e.onboarding,profile:e.profile,customize:e.customize,platform:e.auth.platform,technicalContact:e.contactInfo.contactList[0],claimsContact:e.contactInfo.contactList[2]}}),(function(e){return Object(i.b)({_setStep:qt,_nextStep:Yt,_setValidationErrors:na,_setContactValidationErrors:ca,_completeProfileStep:aa,_completeCustomizeStep:fa,_completeBillingStep:ja},e)}))(Ba)),Wa=Object(l.b)((function(e){return e.onboarding}))((function(e){return e.isOnboarding||"complete"===e.pageKey?r.a.createElement("p",{className:"onboarding-instructions","data-test":"onboardingInstructions"},{welcome:"Welcome to Clyde! We are reviewing your store to ensure it's a good fit for a product protection program. Service contracts are regulated by various state and federal laws so we want to make sure we're launching a fully compliant program \u2014 we'll let you know within 48 hours if your store is a good fit. In the meantime, feel free to learn more about Clyde and get a jump start on onboarding.","store-info":"Make sure the info below is correct and fill in anything missed. You can edit this info at any time in Settings.",customize:"This information will be used to preserve your brand across your warranty offering.","bank-connect":"Link your bank account for easy processing.  We\u2019ll collect contract premiums each month and leave 100% of your profit in your account. That\u2019s risk-free, passive revenue. You must link a US-based bank account \u2014 non-US bank accounts are not supported at this time.",licensing:"California and Florida both have regulations surrounding the sale of service contracts to their residents. Good news though! Clyde handles licensing for you. If you decide to skip, you can start selling immediately to 48 out of 50 states and track your licensing progress in settings.",terms:"Please review our Terms of Use carefully. Please check the box at the bottom of the page to indicate that you have read and agree to them."}[e.pageKey]):null})),Va=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"onboarding-welcome-component"},r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"page-layout"},r.a.createElement(Wa,{pageKey:"welcome"}),r.a.createElement("div",{className:"page-layout__content"},r.a.createElement("div",{className:"welcome-header","data-test":"welcomeHeader"},"What's next?"),r.a.createElement("div",{className:"welcome-step-container"},r.a.createElement("div",{className:"welcome-step row align-items-start"},r.a.createElement("div",{className:"welcome-step__image-container"},r.a.createElement("img",{alt:"",className:"welcome-step__image-container__image",src:"/images/cta-step.svg"})),r.a.createElement("div",{className:"col-lg-10 col-md-10 col-sm-9 col-xs-6"},r.a.createElement("div",{className:"welcome-step-text"},"Quick compliance check"),r.a.createElement("div",null,"Our team is reviewing your store to make sure it's fully eligible for a product protection program. We take compliance seriously to ensure we never expose our merchants to any regulatory risk."))),r.a.createElement("div",{className:"welcome-step row align-items-start"},r.a.createElement("div",{className:"welcome-step__image-container"},r.a.createElement("img",{alt:"",className:"welcome-step__image-container__image",src:"/images/connect-step.svg"})),r.a.createElement("div",{className:"col-lg-10 col-md-10 col-sm-9 col-xs-6"},r.a.createElement("div",{className:"welcome-step-text"},"Onboard your store"),r.a.createElement("div",null,"Add your store's information, customize the Clyde CTAs, and link your bank account."))),"Clyde"!==this.props.platform&&r.a.createElement("div",{className:"welcome-step row align-items-start"},r.a.createElement("div",{className:"welcome-step__image-container"},r.a.createElement("img",{alt:"",className:"welcome-step__image-container__image",src:"/images/launch-step.svg"})),r.a.createElement("div",{className:"col-lg-10 col-md-10 col-sm-9 col-xs-6"},r.a.createElement("div",{className:"welcome-step-text"},"Match your products and launch your program"),r.a.createElement("div",null,"A Merchant Onboarding Specialist will match your product catalog to protection plans backed by the industry's top insurance companies, perform testing, and launch your program!"))))))))}}]),a}(n.Component),Ka=function(e){var t=e.contactInfo,a=e.formErrors,n=e.handleChange,o=e.updateStep,c=e.tipStep,l=e.className,s=t.firstName,i=t.lastName,m=t.phoneNumber,d=t.email,u=t.secondaryEmail,p=t.type,_="";"Primary Contact"===p&&(_="Retailer Support Email"),"Accounting Contact"===p&&(_="Secondary Accounting Email");var h=function(e){return gt()("profile-label",{"profile-label--invalid":e})},E=l||"";return r.a.createElement("div",{className:"row ".concat(E),"data-test":p||"contactForm"},r.a.createElement("h5",{className:"settings-tile__content__subtitle"},p),r.a.createElement("div",{className:"col-12 col-lg-3 col-md-3 col-sm-6 col-xs-12"},r.a.createElement("label",{className:h(a.firstName),htmlFor:"first-name"},"First Name"),r.a.createElement(ut.i,{name:"firstName",dataTestValue:"firstName",onChange:n,value:s||"",id:"".concat(p,"-first-name"),className:"form-field",maxLength:"30"})),r.a.createElement("div",{className:"col-12 col-lg-3 col-md-3 col-sm-6 col-xs-12"},r.a.createElement("label",{className:h(a.lastName),htmlFor:"last-name"},"Last Name"),r.a.createElement(ut.i,{name:"lastName",dataTestValue:"lastName",onChange:n,value:i||"",id:"".concat(p,"-last-name"),className:"form-field",maxLength:"30"})),r.a.createElement("div",{className:"col-12 col-lg-3 col-md-3 col-sm-6 col-xs-12"},r.a.createElement("div",{id:"email-instr","data-test":"popupInstructions",className:"auto-tooltip".concat(2===c?" show":"")},r.a.createElement("div",null,"Double check this \u2013 we may need to contact you here."),r.a.createElement("div",{onClick:o,className:"auto-tooltip__confirm-text","data-test":"looksGood"},"Looks good.")),r.a.createElement("label",{className:h(a.email),htmlFor:"email"},"Email"),r.a.createElement(ut.i,{name:"email",dataTestValue:"email",onChange:n,value:d||"",id:"".concat(p,"-email"),className:"form-field",maxLength:"40"})),_&&r.a.createElement("div",{className:"col-12 col-lg-3 col-md-3 col-sm-6 col-xs-12"},r.a.createElement("label",{className:h(a.secondaryEmail),htmlFor:"secondaryEmail"},_),r.a.createElement(ut.i,{name:"secondaryEmail",dataTestValue:"retailerSupportEmail",onChange:n,value:u||"",id:"".concat(p,"-secondaryEmail"),className:"form-field",maxLength:"40"})),r.a.createElement("div",{className:"col-12 col-lg-3 col-md-3 col-sm-6 col-xs-12"},r.a.createElement("div",{id:"phone-instr","data-test":"popupInstructions",className:"auto-tooltip".concat(3===c?" show":"")},r.a.createElement("div",null,"This one, too."),r.a.createElement("div",{onClick:o,className:"auto-tooltip__confirm-text","data-test":"allSet"},"All set.")),r.a.createElement("label",{className:h(a.phoneNumber),htmlFor:"phoneNumber"},"Phone Number"),r.a.createElement(ut.i,{name:"phoneNumber",dataTestValue:"phoneNumber",onChange:n,value:m||"",id:"".concat(p,"-phoneNumber"),className:"form-field",maxLength:"20"})))},za=function(e){return r.a.createElement("select",{className:"form-field",id:e.selectId,name:e.selectName,"data-test":"country",value:e.selectValue,onChange:e.selectChange},r.a.createElement("option",{value:"--",key:"--"},"--"),["US","CA","AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"].map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))},Ya=function(e){var t=e.contactInfo,a=e.formErrors,n=e.handleChange,o=t.address1,c=t.address2,l=t.city,s=t.province,i=t.zip,m=t.country,d=t.type,u=function(e){return gt()("profile-label",{"profile-label--invalid":e})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"settings-tile__content__subtitle"},"Billing"),r.a.createElement("div",{className:"col-12 col-lg-6 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("label",{className:u(a.address1),htmlFor:"address1"},"Address 1"),r.a.createElement(ut.i,{name:"address1",dataTestValue:"address1",onChange:n,value:o,id:"".concat(d,"-address1"),className:"form-field",maxLength:"50"})),r.a.createElement("div",{className:"col-12 col-lg-6 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("label",{className:"profile-label",htmlFor:"address2"},"Address 2"),r.a.createElement(ut.i,{name:"address2",dataTestValue:"address2",onChange:n,value:c||"",id:"".concat(d,"-address2"),className:"form-field",maxLength:"50"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-3 col-md-3 col-sm-6 col-xs-12"},r.a.createElement("label",{className:u(a.city),htmlFor:"city"},"City"),r.a.createElement(ut.i,{name:"city",dataTestValue:"city",onChange:n,value:l,id:"".concat(d,"-city"),className:"form-field",maxLength:"40"})),r.a.createElement("div",{className:"col-12 col-lg-3 col-md-3 col-sm-6 col-xs-12"},r.a.createElement("label",{className:u(a.province),htmlFor:"province"},"State/Province"),r.a.createElement(ut.i,{name:"province",dataTestValue:"stateOrProvince",onChange:n,value:s,id:"".concat(d,"-province"),className:"form-field",maxLength:"6"})),r.a.createElement("div",{className:"col-12 col-lg-3 col-md-3 col-sm-6 col-xs-12"},r.a.createElement("label",{className:u(a.country),htmlFor:"country"},"Country"),r.a.createElement(za,{selectId:"".concat(d,"-country"),selectName:"country",selectValue:m,selectChange:n,inputValidation:function(){}})),r.a.createElement("div",{className:"col-12 col-lg-3 col-md-3 col-sm-6 col-xs-12"},r.a.createElement("label",{className:u(a.zip),htmlFor:"zip"},"Zip"),r.a.createElement(ut.i,{name:"zip",dataTestValue:"zip",onChange:n,value:i,id:"".concat(d,"-zip"),className:"form-field",maxLength:"10"}))))},Qa=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={instrStep:1},e.nextInstr=function(){e.setState({instrStep:e.state.instrStep+1})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value,o=["phoneNumber","zip","oemWarrantyLength"].includes(n);"warrantyDataAccessible"!==n?e.props._setText(n,r,o):e.props._setBoolean(n,r)},e.handleContactChange=function(t){return function(a){var n=a.target,r=n.name,o=n.value,c="phoneNumber"===r;e.props._setContactText({name:r,value:o,numeric:c,index:"claims"===t?2:0})}},e}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props._getShopInfo()}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"componentDidMount",value:function(){var e=this;this.timeout=setTimeout((function(){e.setState({instrStep:2})}),1e3)}},{key:"render",value:function(){var e=this.props,t=e.contactInfo,a=e.profile,n=e.platform;return r.a.createElement("div",{id:"onboarding-basic-info-component"},r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"page-layout"},r.a.createElement(Wa,{pageKey:"store-info"}),r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("h2",{className:"title-wrapper__prefixed-subtitle"},"Update this information if anything about your store changes."),r.a.createElement("h1",null,"Basic information"),r.a.createElement("br",null)),r.a.createElement("div",{className:"page-layout__content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-6 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("label",{className:gt()("profile-label",{"profile-label--invalid":a.formErrors.shopName}),htmlFor:"store-name"},"Shop Name"),"Clyde"!==n?r.a.createElement(ut.i,{name:"shopName","data-test":"shopName",value:a.shopName,id:"store-name",className:"form-field",disabled:"disabled",maxLength:"100"}):r.a.createElement(ut.i,{onChange:this.handleChange,name:"shopName","data-test":"shopName",value:a.shopName,id:"store-name",className:"form-field",maxLength:"100"})),r.a.createElement("div",{className:"col-12 col-lg-6 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("label",{className:gt()("profile-label",{"profile-label--invalid":a.formErrors.domain}),htmlFor:"domain"},"Shop URL"),"Clyde"!==n?r.a.createElement(ut.i,{name:"domain",value:a.domain,id:"domain",className:"form-field",maxLength:"100",disabled:!0}):r.a.createElement(ut.i,{onChange:this.handleChange,name:"domain",value:a.domain,id:"domain",className:"form-field",maxLength:"100"}))),r.a.createElement(Ka,{contactInfo:a,formErrors:a.formErrors,handleChange:this.handleChange,tipStep:this.state.instrStep,updateStep:this.nextInstr}),r.a.createElement(Ka,{contactInfo:Object(d.a)(Object(d.a)({},t.contactList[0]),{},{type:"Technical Contact (optional)"}),formErrors:t.formErrors[0],handleChange:this.handleContactChange("technical")}),r.a.createElement("div",{className:"row col-sm-3 subtitle--claims-contact"},r.a.createElement(ut.j,{position:"right",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--right"},"Clyde receives many claims for issues covered by the limited warranty. When this happens, we seamlessly hand them off to your support team to resolve. We'll need a point-of-contact to route these claims to."),hideIndicator:!0},r.a.createElement("h5",{className:"settings-tile__content__subtitle ","data-tip":!0,"data-for":"claims-contact-tooltip"},"Claims Contact (optional)"))),r.a.createElement(Ka,{contactInfo:Object(d.a)(Object(d.a)({},t.contactList[2]),{},{type:""}),formErrors:t.formErrors[2],handleChange:this.handleContactChange("claims"),className:"profile__claims-contact"}),r.a.createElement(Ya,{contactInfo:a,formErrors:a.formErrors,handleChange:this.handleChange}),r.a.createElement("div",{className:"row profile__last-row","data-test":"radioGroup"},r.a.createElement("div",{className:"col-12 col-lg-8 col-md-8 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"row col-5 mt-4"},r.a.createElement(ut.j,{label:r.a.createElement("div",{className:"tooltip-text"},"Clyde receives many claims for issues covered by the limited warranty. We may ask you to provide your store's limited warranty information so that we can seamlessly direct your customers back to your support team in order to resolve these types of claims."),hideIndicator:!0},r.a.createElement("h5",{className:"settings-tile__content__subtitle subtitle--no-padding mt-0"},r.a.createElement("span",{"data-tip":!0,"data-for":"warranty-info-tooltip"},"Warranty Information")))),r.a.createElement("label",{className:"profile-label"},"Which best describes your store's catalog?"),r.a.createElement("div",{className:"profile__warranty-info__radio-group","data-test":"radioItem-"},r.a.createElement(ut.f,{checked:"catalog"===a.warrantyType,id:"type__catalog",name:"warrantyType",value:"catalog",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"type__catalog"},"Single limited warranty term for the entire catalog")),r.a.createElement("div",{className:"profile__warranty-info__radio-group","data-test":"radioItem-"},r.a.createElement(ut.f,{checked:"product"===a.warrantyType,id:"type__product",name:"warrantyType",value:"product",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"type__product"},"Different limited warranty terms for different products")),r.a.createElement("div",{className:"profile__warranty-info__radio-group","data-test":"radioItem-"},r.a.createElement(ut.f,{checked:"component"===a.warrantyType,id:"type__component",name:"warrantyType",value:"component",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"type__component"},"Multiple terms for different components of products")),r.a.createElement("div",{className:"profile__warranty-info__radio-group","data-test":"radioItem-"},r.a.createElement(ut.f,{checked:"none"===a.warrantyType,id:"type__none",name:"warrantyType",value:"none",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"type__none"},"No limited warranty offered"))),r.a.createElement("div",{className:"col-12 col-lg-4 col-md-4 col-sm-6 col-xs-12"},"catalog"===a.warrantyType&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:gt()("profile-label","profile-label--oem-length",{"profile-label--invalid":a.formErrors.oemWarrantyLength})},"Warranty Length (in months)"),r.a.createElement(ut.i,{onChange:this.handleChange,name:"oemWarrantyLength",dataTestValue:"warrantyLength",value:a.oemWarrantyLength,id:"oemWarrantyLength",className:"form-field",typeNumber:!0})),("product"===a.warrantyType||"component"===a.warrantyType)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"profile-label profile-label--oem-length"},"Is limited warranty data accessible in the product catalog, by manufacturer, or in any other form?"),r.a.createElement("div",{className:"profile__warranty-info__radio-group","data-test":"radioItem-"},r.a.createElement(ut.f,{checked:a.warrantyDataAccessible,id:"accessible__true",name:"warrantyDataAccessible",value:"true",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"accessible__true"},"Yes")),r.a.createElement("div",{className:"profile__warranty-info__radio-group","data-test":"radioItem-"},r.a.createElement(ut.f,{checked:!a.warrantyDataAccessible,id:"accessible__false",name:"warrantyDataAccessible",value:"false",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"accessible__false"},"No")))))))))}}]),a}(n.Component),qa=Object(l.b)((function(e){return{profile:e.profile,contactInfo:e.contactInfo}}),(function(e){return Object(i.b)({_setText:Xt,_setBoolean:Zt,_setContactText:ra,_getShopInfo:Jt},e)}))(Qa),$a=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).openFileDialog=function(e){e.preventDefault(),document.getElementById("logo-file").click()},n.selectFile=function(e){var t=e.target.value.split("\\"),a=t[t.length-1],r=e.target.files;if(FileReader&&r&&r.length){if(!["png","jpg","jpeg","gif"].includes(r[0].type.split("/")[1])||r[0].size>128e3)return void n.setState({errorText:"Please use a png, gif, or jpeg no larger than 128kb."});var o=new FileReader;o.onload=function(){document.getElementById("shop-logo").src=o.result,n.props.setImage(o.result)},o.readAsDataURL(r[0])}n.setState({fileName:a,errorText:null})},n.state={fileName:"",errorText:null},n}return Object(ke.a)(a,[{key:"render",value:function(){var e=this.props.imageUrl||"https://s3.amazonaws.com/clyde-static-files/email-images/picture.svg";return r.a.createElement("div",{id:"clyde-image-upload"},r.a.createElement("div",{className:"row logo-settings-section",id:"logo-upload-area"},r.a.createElement("div",{className:"col-4 offset-1 text-center",id:"logo-container"},this.props.loading?r.a.createElement(ut.l,{dotColor:"clydeBlack"}):r.a.createElement("img",{id:"shop-logo",alt:"shop-logo",className:"logo-container__thumb",src:e})),r.a.createElement("div",{className:"col-4 offset-1 row logo-upload-container"},r.a.createElement("div",{className:"col-12 logo-upload-container__button",onClick:this.openFileDialog},"Upload"),r.a.createElement("div",{className:"col-12 logo-upload-container__error-text"},this.state.errorText))),r.a.createElement("div",{className:"logo-upload-input-container"},r.a.createElement("input",{id:"logo-file",type:"file",onChange:this.selectFile})))}}]),a}(n.Component),Xa=a(304),Za=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.selectedColor=e.hex.toUpperCase()},n.toggleColorSelect=function(e){e.preventDefault(),n.setState({displayColorPicker:!n.state.displayColorPicker})},n.handleClose=function(){n.props._selectColor(n.selectedColor),n.setState({displayColorPicker:!1})},n.handleTextChange=function(e){n.props._selectColor(e.target.value.toUpperCase())},n.presetColors=[],n.selectedColor="#000000",n.state={displayColorPicker:!1},n}return Object(ke.a)(a,[{key:"render",value:function(){var e=""!==this.props.useColor?{backgroundColor:this.props.useColor}:{opacity:.14};return r.a.createElement("div",{id:"clyde-color-selector"},this.state.displayColorPicker&&r.a.createElement("div",{style:{position:"absolute",top:"250px",zIndex:"2"}},r.a.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:this.handleClose}),r.a.createElement(Xa.ChromePicker,{presetColors:this.presetColors,color:this.props.useColor,onChange:this.handleChange})),r.a.createElement("div",{className:"clyde-color-select-wrapper"},r.a.createElement("div",{style:e,href:"",onClick:this.toggleColorSelect,className:"clyde-color-select"}),r.a.createElement(ut.i,{onChange:this.handleTextChange,value:this.props.color,name:"color",id:"clyde-color-selector-input",placeholder:"#",className:this.props.validColor?"form-field clyde-color-select-input":"form-field clyde-color-select-input form-field clyde-color-select-input--invalid"})))}}]),a}(n.Component),Ja=Object(l.b)((function(e){return e.customize}),(function(e){return Object(i.b)({_selectColor:la},e)}))(Za);function en(e,t){var a=e;"#"!==e[0]&&(a="#".concat(e));var n=0,r=0,o=0,c=t||1;return 4===e.length?(n="0x".concat(a[1]).concat(a[1]),r="0x".concat(a[2]).concat(a[2]),o="0x".concat(a[3]).concat(a[3])):7===e.length&&(n="0x".concat(e[1]).concat(e[2]),r="0x".concat(e[3]).concat(e[4]),o="0x".concat(e[5]).concat(e[6])),"rgba(".concat(+n,",").concat(+r,",").concat(+o,",").concat(c,")")}var tn=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"customize-tile-content color-preview"},r.a.createElement(ut.j,{id:"simple-prompt-tip",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--preview"},"Simple prompt preview"),position:"right",hideIndicator:!0},r.a.createElement("div",{"data-for":"simple-prompt-tip","data-tip":!0,className:"clyde-pdp clyde-pdp--simple",style:{color:e.color,borderColor:e.color},id:"pdp-simple"},r.a.createElement("div",{className:"logodiv"},r.a.createElement("svg",{width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M10.48 16.6912C6.87611 16.6912 3.7151 13.5259 3.7151 7.84008C3.7151 4.199 6.1557 1.36977 8.89998 1.36977C13.2252 1.36977 13.0038 6.77617 15.5546 6.77617C16.5245 6.77617 17.1066 6.15973 17.1066 5.26574C17.1066 2.96894 14.2512 0 9.42697 0C3.82629 0 0 4.6257 0 10.3361C0 15.9058 4.46447 20 9.67645 20C13.9867 20 16.5703 16.8007 17.4589 13.5807C17.4766 13.5137 17.4693 13.4425 17.4385 13.3805C17.4077 13.3186 17.3554 13.2702 17.2917 13.2446L16.5133 12.9302C16.4493 12.9043 16.378 12.9032 16.3132 12.9271C16.2484 12.9509 16.1945 12.9981 16.162 13.0596C15.2351 14.8353 13.4065 16.6912 10.48 16.6912Z",fill:"currentColor"}))),r.a.createElement("div",{className:"promptdiv"},r.a.createElement("div",{className:"prompttext"},r.a.createElement("div",{className:"addtext"},"Add product protection for"),r.a.createElement("div",{className:"pricewrapper"},r.a.createElement("div",{className:"pricewrapper__pricetext"},"\xa0$12.50"))))))),r.a.createElement("div",{className:"customize-tile-content color-preview"},r.a.createElement(ut.j,{id:"selector-tip",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--preview"},"Selector prompt preview"),position:"right",hideIndicator:!0},r.a.createElement("div",{"data-for":"selector-tip","data-tip":!0,className:"clyde-pdp clyde-pdp--select",id:"pdp-select"},r.a.createElement("div",{className:"clyde-pdp__header"},"Add product protection:"),r.a.createElement("div",{className:"clyde-pdp__contracts--select",id:"contracts"},r.a.createElement("div",{className:"contract-pdp--select selected",style:{color:e.color,borderColor:e.color}},r.a.createElement("div",{className:"contract-pdp__year--select"},"1 Year"),r.a.createElement("div",{className:"contract-pdp__price--select"},r.a.createElement("span",{className:"contract-pdp__price__dollarsign"},"$"),r.a.createElement("span",{className:"contract__price__dollars"},"12"),r.a.createElement("span",{className:"contract__price__cents"},".50"))),r.a.createElement("div",{className:"contract-pdp--select"},r.a.createElement("div",{className:"contract-pdp__year--select"},"2 Year"),r.a.createElement("div",{className:"contract-pdp__price--select"},r.a.createElement("span",{className:"contract-pdp__price__dollarsign"},"$"),r.a.createElement("span",{className:"contract__price__dollars"},"19"),r.a.createElement("span",{className:"contract__price__cents"},".00"))),r.a.createElement("div",{className:"contract-pdp--select"},r.a.createElement("div",{className:"contract-pdp__year--select"},"3 Year"),r.a.createElement("div",{className:"contract-pdp__price--select"},r.a.createElement("span",{className:"contract-pdp__price__dollarsign"},"$"),r.a.createElement("span",{className:"contract__price__dollars"},"24"),r.a.createElement("span",{className:"contract__price__cents"},".00")))),r.a.createElement("div",{className:"clyde-pdp__footer"},r.a.createElement("span",{className:"clyde-pdp__learn-more",style:{color:e.color},id:"open-modal"},"Learn more"),r.a.createElement("span",{className:"clyde-pdp__covered-by"},r.a.createElement("img",{className:"product-page-preview",src:"/images/Covered_by_Clyde.svg",width:"120",sizes:"120px",alt:"Covered By Clyde"})))))),r.a.createElement("div",{className:"customize-tile-content color-preview"},r.a.createElement(ut.j,{id:"list-tip",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--preview"},"List prompt preview"),position:"right",hideIndicator:!0},r.a.createElement("div",{"data-for":"list-tip","data-tip":!0,className:"clyde-pdp clyde-pdp--list",id:"pdp-select"},r.a.createElement("div",{className:"clyde-pdp__header"},"Add product protection:"),r.a.createElement("div",{className:"clyde-pdp__contracts--list",id:"contracts"},r.a.createElement("div",{className:"contract-pdp--list selected",style:{color:e.color,borderColor:e.color}},r.a.createElement("div",{className:"contract-pdp__year--list"},"1 Year"),r.a.createElement("div",{className:"contract-pdp__price--list"},r.a.createElement("span",{className:"contract-pdp__price__dollarsign"},"$"),r.a.createElement("span",{className:"contract__price__dollars"},"12"),r.a.createElement("span",{className:"contract__price__cents"},".50"))),r.a.createElement("div",{className:"contract-pdp--list"},r.a.createElement("div",{className:"contract-pdp__year--list"},"2 Year"),r.a.createElement("div",{className:"contract-pdp__price--list"},r.a.createElement("span",{className:"contract-pdp__price__dollarsign"},"$"),r.a.createElement("span",{className:"contract__price__dollars"},"19"),r.a.createElement("span",{className:"contract__price__cents"},".00"))),r.a.createElement("div",{className:"contract-pdp--list"},r.a.createElement("div",{className:"contract-pdp__year--list"},"3 Year"),r.a.createElement("div",{className:"contract-pdp__price--list"},r.a.createElement("span",{className:"contract-pdp__price__dollarsign"},"$"),r.a.createElement("span",{className:"contract__price__dollars"},"24"),r.a.createElement("span",{className:"contract__price__cents"},".00")))),r.a.createElement("div",{className:"clyde-pdp__footer"},r.a.createElement("span",{className:"clyde-pdp__learn-more",style:{color:e.color},id:"open-modal"},"Learn more"),r.a.createElement("span",{className:"clyde-pdp__covered-by"},r.a.createElement("img",{className:"product-page-preview",src:"/images/Covered_by_Clyde.svg",width:"120",sizes:"120px",alt:"Covered By Clyde"})))))),"BigCommerce"!==e.platform&&r.a.createElement("div",{className:"customize-tile-content color-preview"},r.a.createElement(ut.j,{id:"radio-tip",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--preview"},"Radio prompt preview"),position:"right",hideIndicator:!0},r.a.createElement("div",{"data-for":"radio-tip","data-tip":!0,className:"clyde-pdp clyde-pdp--radio hidden",id:"pdp-radio"},r.a.createElement("div",{className:"clyde-pdp-radio__header"},r.a.createElement("div",{className:"clyde-pdp-radio_logo_group"},r.a.createElement("div",{className:"clyde-pdp-radio__logo"}),r.a.createElement("div",{className:"clyde-pdp-radio__line"}),r.a.createElement("div",{className:"clyde-pdp-radio__callout"},"Protect your product")),r.a.createElement("div",{className:"clyde-pdp-radio__callout_group"},r.a.createElement("button",{className:"clyde-pdp-radio__learnmore",id:"open-modal-radio"},"Learn More"))),r.a.createElement("div",{className:"clyde-pdp-radio__contracts"},r.a.createElement("ul",{style:{listStyle:"url(\"data:image/svg+xml,%3Csvg width='12' height='10' viewBox='0 0 12 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 5.5L4 8.5L11 1.5' stroke='%23".concat(e.color.slice(1),"' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E%0A\")")}},r.a.createElement("li",{className:"contract-pdp contract-pdp--radio checked",style:{background:en(e.color,.1),border:"1px solid ".concat(e.color)}},r.a.createElement("input",{type:"radio",checked:!0,readOnly:!0,className:"contract-pdp--radio","data-id":"123",id:"123",name:"contracts",style:{background:e.color,border:"2px ".concat(e.color," solid")}}),r.a.createElement("label",null,"1 Year Protection Plan"),r.a.createElement("span",{className:"price"},"$24.99")),r.a.createElement("li",{className:"contract-pdp contract-pdp--radio"},r.a.createElement("input",{type:"radio",readOnly:!0,className:"contract-pdp--radio","data-id":"456",id:"456",name:"contracts"}),r.a.createElement("label",null,"2 Year Protection Plan"),r.a.createElement("span",{className:"price"},"$34.99")),r.a.createElement("li",{className:"contract-pdp contract-pdp--radio"},r.a.createElement("input",{type:"radio",readOnly:!0,className:"contract-pdp--radio","data-id":"789",id:"789",name:"contracts"}),r.a.createElement("label",null,"3 Year Protection Plan"),r.a.createElement("span",{className:"price"},"$44.99"))))))))},an=a(23),nn=Object(l.b)((function(e){return{affirmPublicKey:e.customize.affirmPublicKey,affirmEnabled:e.customize.affirmEnabled}}),(function(e){return Object(i.b)({_updateAffirmIntegration:ba},e)}))((function(e){var t=Object(n.useState)(""),a=Object(an.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),s=Object(an.a)(l,2),i=s[0],m=s[1],d=Object(n.useState)(!1),u=Object(an.a)(d,2),p=u[0],_=u[1];Object(n.useEffect)((function(){c(e.affirmPublicKey),m(e.affirmEnabled)}),[e]);var h=function(){_(!1)};return r.a.createElement("div",{className:"customize-option"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"affirmIntegration",checked:i,name:"affirmIntegration",onChange:function(){i&&(m(!1),e._updateAffirmIntegration({affirmEnabled:!1})),i||_(!0)},label:"Affirm Pricing",greyLabel:!1}),r.a.createElement(ut.m,{active:p,className:"affirm-integration-modal",closeModal:h},r.a.createElement("div",{className:"affirm-integration-modal-body"},r.a.createElement("div",{className:"logo-integration-section"},r.a.createElement("img",{alt:"clyde-logo",className:"clyde-integration-logo",src:"/images/Clyde-Circle-Light.png"}),r.a.createElement("img",{alt:"connect-integration",className:"connect-integration-icon",src:"/images/connect-integration.svg"}),r.a.createElement("img",{alt:"affirm-logo",className:"affirm-integration-icon",src:"images/affirm.svg"})),r.a.createElement("h2",null,"Connect Affirm to your Clyde Account"),r.a.createElement("p",null,"Input your information below to complete your integration"),r.a.createElement("div",{className:"affirm-integration-input-section"},r.a.createElement("input",{type:"text",placeholder:"Public Key",defaultValue:o,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"affirm-integration-btn-section"},r.a.createElement("button",{className:"connect-integration-btn",onClick:function(){e._updateAffirmIntegration({affirmPublicKey:o,affirmEnabled:!0}),m(!0),h()}},"Connect Integration"),r.a.createElement("button",{className:"cancel-integration-btn",onClick:h},"Cancel")))))})),rn=function(e){var t=e.platform,a=e.cta,n=e._setProductPageLocation,o=e._togglePrompt,c=e._selectType,l=e._setDisplayName,s=e._setCustomLocation,i=e._setShopImageData,m=function(e){n(e.target.value)},d=function(e){o(e.target.name)},u=function(e){c(e.target.value)};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"customize-settings col-lg-6 col-12"},r.a.createElement("div",{className:"customize-tile"},r.a.createElement("div",{className:"customize-tile__header"},r.a.createElement("div",null,"Display Name"),r.a.createElement("div",{className:"customize-tile__header__info-icon"},r.a.createElement(ut.j,{id:"displayName",position:"right",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--right"},"This name will be used in our emails to customers with their contract information after a purchase, helping your customer understand where the email is coming from.")}))),r.a.createElement("div",{className:"customize-tile__content"},r.a.createElement(ut.i,{className:"form-field",onChange:function(e){l(e.target.value)},value:a.displayName}))),r.a.createElement("div",{className:"customize-tile"},r.a.createElement("div",{className:"customize-tile__header"},r.a.createElement("div",null,"Image"),r.a.createElement("div",{className:"customize-tile__header__info-icon"},r.a.createElement(ut.j,{id:"image",position:"right",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--right"},"This image will be used to white-label our emails to the customer with their contract information.")}))),r.a.createElement("div",{className:"customize-tile__content"},r.a.createElement($a,{loading:a.imageProcessing,imageUrl:a.imageUrl,setImage:i}))),r.a.createElement("div",{className:"customize-tile"},r.a.createElement("div",{className:"customize-tile__header"},r.a.createElement("div",null,"Color"),r.a.createElement("div",{className:"customize-tile__header__info-icon"},r.a.createElement(ut.j,{id:"color",position:"right",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--right"},"Do you have a go-to text color, or a color in your logo you like? Use it in your CTA so it fits cleanly on your website.")}))),r.a.createElement("div",{className:"customize-tile__content"},r.a.createElement("div",{className:"customize-option"},r.a.createElement(Ja,{useColor:a.color})))),"Shopify"!==t&&r.a.createElement("div",{className:"customize-tile"},r.a.createElement("div",{className:"customize-tile__header"},r.a.createElement("div",null,"Integrations"),r.a.createElement("div",{className:"customize-tile__header__info-icon"},r.a.createElement(ut.j,{id:"integrations",position:"right",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--right"},"Add additional integrations.")}))),r.a.createElement(nn,null)),"Shopify"===t&&r.a.createElement("div",{className:"customize-tile mt-4"},r.a.createElement("div",{className:"customize-tile__header"},r.a.createElement("div",null,"Shopify Post-purchase CTA"),r.a.createElement("div",{className:"customize-tile__header__info-icon"},r.a.createElement(ut.j,{id:"post-purchase",position:"right",label:r.a.createElement("div",{className:"tooltip-text tooltip-text"},"Post-purchase checkout extensions allow merchants to add a post-purchase page directly into the Shopify checkout.")}))),"Please visit our ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.joinclyde.com/docs/shopify-post-purchase-extension"},"documentation page")," for instructions to activate the Shopify Post-purchase CTA.")),r.a.createElement("div",{className:"customize-settings col-lg-6 col-12"},r.a.createElement("div",{className:"customize-tile"},r.a.createElement("div",{className:"customize-tile__header"},r.a.createElement("div",null,"Location"),r.a.createElement("div",{className:"customize-tile__header__info-icon mr-1"},r.a.createElement(ut.j,{id:"location",position:"right",label:r.a.createElement("div",{className:"tooltip-text tooltip-text"},"Choose where you want Clyde's protection offering to be shown. You can change this any time in Clyde's Admin portal.")}))),r.a.createElement("div",{className:"customize-tile-content"},r.a.createElement("div",{className:"customize-option"},r.a.createElement("div",{className:"customize-option__title"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",onChange:d,id:"modalPrompt",name:"modalPrompt",checked:a.modalPrompt,label:"Modal",greyLabel:!1})),("Shopify"===t||"BigCommerce"===t)&&r.a.createElement("div",{className:"customize-option-desc"},"Your customers will be prompted after they add a product to their cart.")),r.a.createElement("div",{className:"customize-option"},r.a.createElement("div",{className:"customize-option__title"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",onChange:d,id:"productPagePrompt",name:"productPagePrompt",checked:a.productPagePrompt,label:"Product page",greyLabel:!1})),a.productPagePrompt&&("Shopify"===t||"BigCommerce"===t)&&r.a.createElement("div",{className:"customize-option__product-page"},r.a.createElement("div",{className:"customize-option customize-option--type"},r.a.createElement("div",{className:"customize-option__subtitle"},"Type:"),r.a.createElement("select",{value:a.type,onChange:u,name:"customize-style-type",id:"customize-type",className:"customize-option__select"},r.a.createElement("option",{value:"select"},"Selector"),r.a.createElement("option",{value:"list"},"List"),r.a.createElement("option",{value:"simple"},"Simple prompt"),"BigCommerce"!==t&&r.a.createElement("option",{value:"radio"},"Radio buttons / Checkbox (if 1)"))),r.a.createElement("div",{className:"customize-option__subtitle"},"Location:"),r.a.createElement("div",{className:"customize-option__title"},r.a.createElement("input",{type:"radio",onChange:m,id:"productPageLocation1",name:"productPageLocation",value:"form",checked:"form"===a.productPageLocation}),r.a.createElement("label",{className:"customize-option__title__label customize-option__title__label--small",htmlFor:"productPageLocation1"},"Above Add To Cart button")),r.a.createElement("div",{className:"customize-option__title"},r.a.createElement("input",{type:"radio",onChange:m,id:"productPageLocation2",name:"productPageLocation",value:"after_form",checked:"after_form"===a.productPageLocation}),r.a.createElement("label",{className:"customize-option__title__label customize-option__title__label--small",htmlFor:"productPageLocation2"},"Below Add To Cart button")),r.a.createElement("div",{className:"customize-option__title"},r.a.createElement("input",{type:"radio",onChange:m,id:"productPageLocation3",name:"productPageLocation",value:"custom",checked:"custom"===a.productPageLocation}),r.a.createElement("label",{className:"customize-option__title__label customize-option__title__label--small",htmlFor:"productPageLocation3"},r.a.createElement("span",null,"Custom: ")),r.a.createElement(ut.i,{className:"form-field custom-location-input",onChange:function(e){s(e.target.value)},disabled:"custom"!==a.productPageLocation,name:"productPageCustomLocation",value:a.customLocation?a.customLocation:""}),r.a.createElement("div",{className:"custom-location-link"},r.a.createElement("a",{href:"https://www.joinclyde.com/resources/documentation/merchant-operations/customize-your-offering",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{"data-tip":!0,"data-for":"customLocation",alt:"link to support article on how to set a custom location for the product page selector",className:"custom-location-link__icon",src:"/images/info-icon.svg"})))))),r.a.createElement("div",{className:"customize-option"},r.a.createElement("div",{className:"customize-option__title"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",onChange:d,id:"cartPrompt",name:"cartPrompt",checked:a.cartPrompt,label:"Cart",greyLabel:!1})),("Shopify"===t||"BigCommerce"===t)&&r.a.createElement("div",{className:"customize-option-desc"},"The last chance to up-sell your customers.")),"Shopify"!==t&&"BigCommerce"!==t&&r.a.createElement("div",{className:"customize-option"},r.a.createElement("div",{className:"customize-option__title"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",onChange:d,id:"catalogPrompt",name:"catalogPrompt",checked:a.catalogPrompt,label:"Catalog",greyLabel:!1}))))),"Shopify"!==t&&"BigCommerce"!==t&&r.a.createElement("div",{className:"customize-tile"},r.a.createElement("div",{className:"customize-option-desc"},"These options can be used to control the functionality of your storefront integration. You can use these values \u2013 accessible in our widget \u2013 to determine whether or not to enable Clyde in a particular context. See our ",r.a.createElement("a",{href:"https://www.joinclyde.com/resources/documentation/platform-integrations/getting-started-with-widget"},"widget docs")," for more details."),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",{className:"customize-tile__header"},r.a.createElement("div",null,"Type:")),r.a.createElement("div",{className:"customize-option customize-option--type customize-option--type--api"},r.a.createElement("select",{value:a.type,onChange:u,name:"customize-style-type",id:"customize-type",className:"customize-option__select"},r.a.createElement("option",{value:"select"},"Selector"),r.a.createElement("option",{value:"list"},"List"),r.a.createElement("option",{value:"simple"},"Simple prompt"),r.a.createElement("option",{value:"radio"},"Radio buttons / Checkbox (if 1)"))))),r.a.createElement(tn,{platform:t,color:a.color})))},on=Object(l.b)((function(e){return{cta:e.customize}}),(function(e){return Object(i.b)({_togglePrompt:ma,_setCustomLocation:ia,_selectType:pa,_setProductPageLocation:ua,_setShopImageData:ha,_setDisplayName:sa,_togglePostPurchase:da},e)}))(rn),cn=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSave=function(){e.props._updateCTAInfo(e.props.cta)},e}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props._getCTAInfo()}},{key:"render",value:function(){return r.a.createElement("div",{id:"customize-store-component"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | Call-to-Action")),r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"page-layout"},r.a.createElement(Wa,{pageKey:"customize"}),r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("h1",null,"Call-to-Action"),r.a.createElement("br",null)),r.a.createElement("div",{className:"customize-content"},r.a.createElement("div",{className:"row align-items-start"},r.a.createElement("div",{className:"col-12"},r.a.createElement(on,{platform:this.props.platform})))))),r.a.createElement("div",{className:"process-div"},r.a.createElement("div",{className:"fixed-save-bar"},this.props.cta.showSaveButton&&r.a.createElement(ut.a,{className:"button--small test button",id:"customize-settings-save-button",disabled:!1===this.props.cta.validColor,onClick:this.handleSave,processing:this.props.cta.saveProcessing,successText:"Saved"},"Save"))))}}]),a}(n.Component),ln=Object(l.b)((function(e){return{cta:e.customize,platform:e.auth.platform}}),(function(e){return Object(i.b)({_updateCTAInfo:Ea,_getCTAInfo:_a},e)}))(cn),sn=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).createPlaidLinkHandler=function(){var t;window.Plaid.create({token:null===(t=e.props.billing.plaidLinkToken)||void 0===t?void 0:t.link_token,onSuccess:function(t,a){e.props._showAccounts(),e.props._billingInfoSubmit({method:"plaid",plaidToken:t,metadata:a})},onExit:function(e){}}).open()},e}return Object(ke.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"billing-options"},!this.props.hideBack&&r.a.createElement("div",{onClick:this.props._showAccounts,className:"billing-options__back"},r.a.createElement("img",{className:"billing-options__back__image",alt:"",src:"/images/Back-Button.svg"})," Accounts"),r.a.createElement("div",{className:"row billing-options__row"},r.a.createElement("div",{className:"billing-options__row__option"},r.a.createElement("div",{className:"billing-option__bold-text"},"Instant"),r.a.createElement("div",{onClick:this.createPlaidLinkHandler,className:"billing-option__button",id:"connect-with-plaid-button"},"Connect with Plaid"),r.a.createElement("div",{className:"billing-option__sub-text"},"Use your bank's username & password")),r.a.createElement("div",{className:"billing-options__row__separator"},"or"),r.a.createElement("div",{className:"billing-options__row__option"},r.a.createElement("div",{className:"billing-option__bold-text"},"Up to 2 business days"),r.a.createElement("div",{onClick:this.props._newStripeAccount,className:"billing-option__button",id:"connect-with-micro-button"},"Connect with micro-deposits"),r.a.createElement("div",{className:"billing-option__sub-text"},"Confirm deposit amounts in settings"))))}}]),a}(n.Component),mn=Object(l.b)((function(e){return{billing:e.billing}}),(function(e){return Object(i.b)({_updateInput:va,_billingInfoSubmit:Ra,_addAccount:Ca,_newStripeAccount:Ia,_showAccounts:Sa},e)}))(sn),dn=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={deposit1Error:!1,deposit2Error:!1},e.amountIsError=function(e){return!(Da.a.isInt(e,{min:0,max:99})||Da.a.isEmpty(e))},e}return Object(ke.a)(a,[{key:"handleVerify",value:function(){this.state.deposit1Error||this.state.deposit2Error||this.props._verifyStripe(this.props.account.stripeSourceID,this.props.account.deposit1,this.props.account.deposit2)}},{key:"handleSetDefault",value:function(){this.props._setStripeDefaultSource(this.props.account.stripeSourceID)}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value,n="".concat(t,"Error");this.setState(Object(b.a)({},n,this.amountIsError(a))),this.props._updateDeposit(this.props.account.stripeSourceID,t,parseFloat(a))}},{key:"render",value:function(){var e=this,t=O()().diff(this.props.lastUpdate,"hours")<24&&!0;return r.a.createElement("div",{className:"bank-account"},"new"===this.props.account.status?r.a.createElement("div",{className:"row bank-account__content"},r.a.createElement("div",{className:"col-lg-4 col-3"},r.a.createElement("div",null,this.props.account.bankName)),r.a.createElement("div",{className:"col-lg-2 col-3"},r.a.createElement("div",null,"******",this.props.account.last4)),r.a.createElement("div",{className:"col-lg-2 col-2"},r.a.createElement(ut.i,{onChange:function(t){return e.handleChange(t)},className:"form-field stripe-microdeposit-input",id:"deposit1",name:"deposit1",placeholder:"Amount (\xa2)",disabled:t,value:this.props.account.deposit1,typeNumber:!0})),r.a.createElement("div",{className:"col-lg-2 col-2"},r.a.createElement(ut.i,{onChange:function(t){return e.handleChange(t)},className:"form-field stripe-microdeposit-input",id:"deposit2",name:"deposit2",placeholder:"Amount (\xa2)",disabled:t,value:this.props.account.deposit2,typeNumber:!0})),r.a.createElement("div",{className:"col-lg-2 col-2"},this.state.deposit1Error||this.state.deposit2Error?r.a.createElement(ut.j,{label:r.a.createElement("div",{className:"tooltip-text"},"Please use positive whole numbers in the input boxes. No decimals or negatives!"),hideIndicator:!0},r.a.createElement("div",{"data-tip":!0,"data-for":"stripe-verify-button-warning",className:gt()("stripe-verify-button stripe-verify-button--tooltip",{"stripe-verify-button--error":this.state.deposit1Error||this.state.deposit2Error}),onClick:function(){return e.handleVerify()}},"Verify")):r.a.createElement("button",{disabled:t||3===this.props.billingAttempts,"data-tip":!0,"data-for":"stripe-verify-button-warning",className:gt()("stripe-verify-button stripe-verify-button--tooltip",{"stripe-verify-button--error":this.state.deposit1Error||this.state.deposit2Error}),onClick:function(){return e.handleVerify()}},"Verify")),t?null:r.a.createElement("div",null,this.props.billingAttempts<2?r.a.createElement("div",{className:"bank-verification-warning"},3-this.props.billingAttempts," verification attempts left."):r.a.createElement("div",{className:"bank-verification-warning"},3-this.props.billingAttempts," verification attempts left. Please contact Clyde support to avoid this billing account being locked out."))):r.a.createElement("div",null,r.a.createElement("div",{className:"row bank-account__content"},r.a.createElement("div",{className:"col-lg-4 col-3"}),r.a.createElement("div",{className:"col-lg-2 col-3"}),r.a.createElement("div",{className:"col-6"})),r.a.createElement("div",{className:"row bank-account__content"},r.a.createElement("div",{className:"col-lg-4 col-3"},"ba_"===this.props.account.stripeSourceID.slice(0,3)?r.a.createElement("div",null,this.props.account.bankName):r.a.createElement("div",null,"Credit card")),r.a.createElement("div",{className:"col-lg-2 col-3"},r.a.createElement("div",null,"******",this.props.account.last4)),r.a.createElement("div",{className:"col-4"}),r.a.createElement("div",{className:"col-2"},!0===this.props.account.default?r.a.createElement("div",{className:"stripe-default-account-text"},"Default"):r.a.createElement("div",{onClick:function(){return e.handleSetDefault()},className:"set-stripe-default-button"},"Set Default")))))}}]),a}(n.Component);var un=Object(l.b)(null,(function(e){return Object(i.b)({_updateDeposit:ya,_setStripeDefaultSource:Ta,_verifyStripe:Na},e)}))(dn),pn=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.props._updateInput(e.target.name,e.target.value)},n.handleSubmit=function(){if(!n.state.submitDisabled){n.setState({submitDisabled:!0});var e=window.Stripe(window._env_.REACT_APP_STRIPE_PK);n.setStripeErrors({}),e.createToken("bank_account",{country:"US",currency:"usd",routing_number:n.props.newStripeAccount.routingNumber,account_number:n.props.newStripeAccount.accountNumber,account_holder_name:n.props.newStripeAccount.accountHolderName,account_holder_type:n.props.newStripeAccount.accountHolderType}).then((function(e){if(e.error)return n.handleStripeErrors(e.error),void n.setState({submitDisabled:!1});n.props._billingInfoSubmit({method:"stripe",stripeToken:e.token.id}),n.props._showAccounts()})).catch((function(){n.setState({submitDisabled:!1})}))}},n.handleStripeErrors=function(e){var t={};"routing_number_invalid"===e.code?t.routingNumber=e.message:"account_number_invalid"===e.code?t.accountNumber=e.message:"parameter_invalid_empty"===e.code&&("bank_account[routing_number]"===e.param?t.routingNumber="Missing Routing Number":"bank_account[account_number]"===e.param&&(t.accountNumber="Missing Account Number")),n.setStripeErrors(t)},n.setStripeErrors=function(e){n.setState({stripeFormErrors:e})},n.state={stripeFormErrors:{},submitDisabled:!1},n}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=gt()("stripe-form-item-label",{"stripe-form-item-label--red":this.state.stripeFormErrors.routingNumber}),a=gt()("stripe-form-item-label",{"stripe-form-item-label--red":this.state.stripeFormErrors.accountNumber});return r.a.createElement("div",{className:"stripe-form",id:"stripe-form"},r.a.createElement("div",{onClick:this.props._addAccount,className:"stripe-form__back-button"},r.a.createElement("img",{className:"stripe-form__back-button__image",alt:"",src:"/images/Back-Button.svg"})," Options"),r.a.createElement("div",{className:"row stripe-form__row"},r.a.createElement("div",{className:"col-lg-6 col-md-12 stripe-form__row__item"},r.a.createElement("label",{className:"stripe-form-item-label",htmlFor:"accountHolderName"},"Account Holder Name"),r.a.createElement(ut.i,{onChange:this.handleChange,className:"form-field stripe-form-item-input",id:"accountHolderName",name:"accountHolderName",value:this.props.newStripeAccount.accountHolderName})),r.a.createElement("div",{className:"col-lg-6 col-md-12 stripe-form__row__item"},r.a.createElement("label",{className:a,htmlFor:"accountNumber"},"Account Number"),r.a.createElement(ut.i,{onChange:this.handleChange,className:"form-field stripe-form-item-input",id:"accountNumber",name:"accountNumber",value:this.props.newStripeAccount.accountNumber}),r.a.createElement("div",{className:"stripe-form-item__error-detail"},this.state.stripeFormErrors.accountNumber))),r.a.createElement("div",{className:"row stripe-form__row"},r.a.createElement("div",{className:"col-lg-6 col-md-12 stripe-form__row__item"},r.a.createElement("label",{className:"stripe-form-item-label",htmlFor:"accountHolderType"},"Account Type"),r.a.createElement("div",{className:"stripe-form__select-container"},r.a.createElement("select",{className:"stripe-select-field",onChange:function(t){return e.handleChange(t)},id:"accountHolderType",name:"accountHolderType",defaultValue:this.props.newStripeAccount.accountHolderType},r.a.createElement("option",{value:"company"},"Company"),r.a.createElement("option",{value:"individual"},"Individual")))),r.a.createElement("div",{className:"col-lg-6 col-md-12 stripe-form__row__item"},r.a.createElement("label",{className:t,htmlFor:"routingNumber"},"Routing Number"),r.a.createElement(ut.i,{onChange:this.handleChange,className:"form-field stripe-form-item-input",id:"routingNumber",name:"routingNumber",value:this.props.newStripeAccount.routingNumber}),r.a.createElement("div",{className:"stripe-form-item__error-detail"},this.state.stripeFormErrors.routingNumber))),r.a.createElement("div",{className:"row stripe-form__submit-row"},r.a.createElement("div",{className:"col-3 offset-9 stripe-form__submit-row__item"},r.a.createElement("button",{className:"stripe-form-submit-button",onClick:this.handleSubmit,disabled:this.state.submitDisabled},"Connect account"))))}}]),a}(n.Component),_n=Object(l.b)((function(e){return{newStripeAccount:e.billing.newStripeAccount}}),(function(e){return Object(i.b)({_updateInput:va,_billingInfoSubmit:Ra,_addAccount:Ca,_showAccounts:Sa},e)}))(pn),hn=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props._getBillingInfo()}},{key:"componentDidMount",value:function(){this.props._getPlaidLinkToken(),"accounts"!==this.props.billing.page||0!==this.props.billing.accounts.length||this.props.billing.invoice||this.props._addAccount()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===this.props.billing.getProcessing&&!1===e.billing.getProcessing&&0!==e.billing.accounts.length&&this.props._showAccounts(),"accounts"!==e.billing.page&&e.billing.invoice&&this.props._showAccounts()}},{key:"render",value:function(){var e=this,t=O()().diff(this.props.billing.lastStripeBilling,"hours")<24&&!0;return r.a.createElement("div",{className:"settings-tile settings-tile--billing",id:"billing-settings-component"},r.a.createElement("div",{className:"settings-tile__title"},r.a.createElement("span",{className:"row ml-1"},r.a.createElement("img",{alt:"",className:"billing-lock-icon",src:"images/secured.svg"}),"Billing",r.a.createElement("div",{className:"settings-tile__title__info-icon"},r.a.createElement(ut.j,{label:r.a.createElement("div",{className:"tooltip-text tooltip-text--right"},"Clyde charges you each month for contract premiums and our service fee. You keep 100% of the markup in your bank account. That goes straight to your bottom line!"),position:"right"}))),"accounts"===this.props.billing.page&&!this.props.billing.invoice&&r.a.createElement("span",{className:"add-billing-button",onClick:this.props._addAccount},"Add account")),this.props.billing.getProcessing?r.a.createElement("div",{className:"settings-tile__content"},r.a.createElement("div",{className:"settings-tile__content__loading-container"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))):r.a.createElement("div",{className:gt()("settings-tile__content",{"settings-tile__content--invoice":this.props.billing.invoice})},"accounts"===this.props.billing.page&&r.a.createElement("div",null,this.props.billing.invoice?r.a.createElement("span",null,"Invoice billing is enabled for your shop."):r.a.createElement("div",{className:"bank-accounts"},r.a.createElement("div",{className:"row bank-accounts__header"},t?r.a.createElement("div",{className:"deposit-locked-warning"},"Please wait 24 hours for the microdeposit amounts to be deposited."):null,r.a.createElement("div",{className:"col-lg-4 col-3"},r.a.createElement("label",{className:"bank-accounts__header__item"},"Type")),r.a.createElement("div",{className:"col-lg-2 col-3"},r.a.createElement("label",{className:"bank-accounts__header__item"},"Account no."))),this.props.billing.accounts.map((function(t,a){return r.a.createElement(un,{key:"account-".concat(a),account:t,lastUpdate:e.props.billing.lastStripeBilling,billingAttempts:e.props.billing.stripeBillingAttempts})})))),"add_account"===this.props.billing.page&&r.a.createElement("div",null,!this.props.billing.invoice&&r.a.createElement(mn,{hideBack:0===this.props.billing.accounts.length})),"new_stripe"===this.props.billing.page&&r.a.createElement(_n,null)))}}]),a}(n.Component),En=Object(l.b)((function(e){return{billing:e.billing,isOnboarding:e.onboarding.isOnboarding}}),(function(e){return Object(i.b)({_getBillingInfo:Pa,_addAccount:Ca,_showAccounts:Sa,_getPlaidLinkToken:wa},e)}))(hn),gn=Object(l.b)((function(e){return{platform:e.auth.platform,invoice:e.billing.invoice}}),(function(e){return Object(i.b)({_dismissInstructions:Oa},e)}))((function(e){var t,a;return"Shopify"===e.platform?t="Clyde bills your store separately from Shopify":(t="",a="Clyde Billing"),r.a.createElement("div",{className:"modal-container__backdrop modal-container__backdrop--billing"},r.a.createElement("div",{className:"billing-instructions"},r.a.createElement("div",{className:"billing-instructions__subtitle"},t),a&&r.a.createElement("div",{className:"billing-instructions__title"},a),r.a.createElement("div",{className:"billing-instructions__section"},"In order to launch your product protection program with Clyde, we'll need to collect your billing information."),r.a.createElement("div",{className:"billing-instructions__section"},r.a.createElement("div",null,"When a customer purchases a Clyde Protection Plan on your site, you collect the full cost of the plan up front. In order to work with our insurance partners, Clyde will invoice you each month for the premiums and fees from the contracts you sold. You keep 100% of your risk-free profit."),r.a.createElement("br",null)),r.a.createElement("div",{className:"billing-instructions__button-container"},r.a.createElement("div",{onClick:function(){e._dismissInstructions()},className:"billing-instructions-confirm"},"I get it"),r.a.createElement("div",{className:"billing-instructions-more-questions"},r.a.createElement("a",{href:"https://docs.joinclyde.com/docs/billing-payments-refunds",target:"_blank",rel:"noopener noreferrer"},"I have more questions")))))})),fn=Object(l.b)((function(e){return Object(d.a)(Object(d.a)({},e.billing),{},{onboarding:e.onboarding.isOnboarding})}))((function(e){return r.a.createElement("div",{id:"setup-billing-component"},r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"page-layout"},r.a.createElement(Wa,{pageKey:"bank-connect"}),r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("h2",{className:"title-wrapper__prefixed-subtitle"},"Set a default account for collecting contract premiums."),r.a.createElement("h1",null,"Set up your Billing"),r.a.createElement("br",null)),r.a.createElement(En,null))),e.onboarding&&!e.instructionsDismissed&&r.a.createElement(gn,null))})),bn=a(305),vn=a.n(bn),yn=function(e){var t=e._onAccept,a=e.platform,o=Object(n.useState)(!1),c=Object(an.a)(o,2),l=c[0],s=c[1],i=Object(n.useState)(!1),m=Object(an.a)(i,2),d=m[0],u=m[1],p=Object(n.useState)(!1),_=Object(an.a)(p,2),h=_[0],E=_[1],g=Object(n.useState)(!1),f=Object(an.a)(g,2),b=f[0],v=f[1],y=Object(n.useState)(!1),N=Object(an.a)(y,2),O=N[0],C=N[1];Object(n.useEffect)((function(){return document.body.style.position="fixed",function(){document.body.style.position=""}}),[]);return r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-container__backdrop"}),r.a.createElement("div",{className:"clyde-modal-content acknowledgement-modal-content"},r.a.createElement("div",{className:"onboarding-acknowledgement-modal"},r.a.createElement("h2",null,"Program Requirements"),r.a.createElement("h1",null,"One last thing!"),r.a.createElement("p",null,r.a.createElement("strong",null,"Limited Warranty Responsibility:")," ",r.a.createElement("br",null),"By partnering with Clyde, you agree to honor your products' limited warranties and acceptresponsibilityfor resolving claims covered by the limited warranty. If your support team is unresponsive to customers' limited warranty claims, Clyde may cover the cost of these claims and reserves the right to invoice you and/orwithhold post-purchase revenue payouts from you to cover the cost of claims covered by your limited warranty."),r.a.createElement(ut.b,{backgroundColor:"clydeBlack",className:"acknowledgement-modal__check",label:"I agree",dataTestValue:"agreeCheckbox1",checked:l,onChange:function(){return s(!l)}}),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("strong",null,"Marketing:")," ",r.a.createElement("br",null),"All marketing materials associated with your Clyde program including, but not limited to advertisements, website promotions, emails, and FAQ pages must be submitted to Clyde for approval before launch. Clyde reserves the right to suspend any programs found to have distributed unapproved marketing collateral until collateral is in compliance."),r.a.createElement(ut.b,{backgroundColor:"clydeBlack",className:"acknowledgement-modal__check",label:"I agree",dataTestValue:"agreeCheckbox2",checked:d,onChange:function(){return u(!d)}}),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("strong",null,"Pricing:")," ",r.a.createElement("br",null),"Protection plan rates are based on program performance. Clyde reserves the right to increase or decrease your store's rates in order to account for program performance."),r.a.createElement(ut.b,{backgroundColor:"clydeBlack",className:"acknowledgement-modal__check",label:"I agree",dataTestValue:"agreeCheckbox3",checked:h,onChange:function(){return E(!h)}}),"Shopify"===a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("strong",null,"Manual payment flows:")," ",r.a.createElement("br",null),"If you utilize any manual payment collection flows on your Shopify shop, be sure to collect the appropriate amount for any contracts purchased on the order."),r.a.createElement(ut.b,{backgroundColor:"clydeBlack",className:"acknowledgement-modal__check",label:"I agree",dataTestValue:"agreeCheckbox4",checked:b,onChange:function(){return v(!b)}})),r.a.createElement("div",{className:"acknowledgement-modal__button","data-test":"modalFooter"},r.a.createElement(ut.a,{className:"acknowledgement-modal__button__button",onClick:function(){h&&d&&l&&(b||"Shopify"!==a)?t():C(!0)},"data-test":"finish"},"Finish"),O&&(!l||!d||!h||!b&&"Shopify"===a)&&r.a.createElement("span",{className:"acknowledgement-modal__button__error","data-test":"errorCard"},"Please agree to all terms to proceed.")))))},Nn=function(e){Object(Ae.a)(n,e);var t=Object(De.a)(n);function n(){var e;Object(je.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={checked:!1,termsText:"",showModal:!1},e.checkAgree=function(){e.setState((function(e){return{checked:!e.checked}}))},e.handleSubmit=function(){e.props.finishOnboarding(),"Clyde"!==e.props.platform?e.props.history.push("/contracts"):e.props.history.push("/products")},e.showAcknowledgments=function(){e.setState({showModal:!0})},e}return Object(ke.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=a(605);fetch(t).then((function(e){return e.text()})).then((function(t){e.setState({termsText:vn()(t)})}))}},{key:"render",value:function(){var e=this.props.location,t=this.state,a=t.showModal,n=t.termsText,o=t.checked;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(yn,{platform:this.props.platform,_onAccept:this.handleSubmit}),r.a.createElement("div",{id:"terms-and-conditions-component"},r.a.createElement("div",{className:"page-wrapper"},r.a.createElement(Kt,{activeTab:e.pathname.slice(1)}),r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"page-layout"},r.a.createElement(Wa,{pageKey:"terms"}),r.a.createElement("div",{className:"page-layout__content"},r.a.createElement("div",{className:"terms-container","data-test":"termsContainer"},r.a.createElement("img",{className:"terms-container__logo",alt:"",src:"/images/Clyde_Logo_Wordmark.svg"}),r.a.createElement("div",{className:"terms-container__text",dangerouslySetInnerHTML:{__html:n}})))))),r.a.createElement("div",{className:"process-div"},r.a.createElement("div",{className:"fixed-save-bar"},r.a.createElement("div",{className:"row terms-agree-row"},r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"terms-agree no-select"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",checked:o,onChange:this.checkAgree,id:"terms-agree__checkbox",scale:"1.5, 1.5",dataTestValue:"readAndAgreeCheckbox"}),r.a.createElement("div",{onClick:this.checkAgree,className:"terms-agree__text"},"Check here to indicate that you have read and agree to the terms and conditions above."))),r.a.createElement("div",{className:"col-2 terms-accept-container"},r.a.createElement("button",{id:"t-and-c-accept",onClick:this.showAcknowledgments,className:"terms-accept-button ".concat(this.state.checked?"terms-accept-button--show":"terms-accept-button--hide"),"data-test":"finish"},"Finish")))))))}}]),n}(n.Component);var On=Object(zt.a)(Object(l.b)(null,(function(e){return Object(i.b)({finishOnboarding:Qt},e)}))(Nn)),Cn=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){this.props.isOnboarding||this.props.history.push("/products")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isOnboarding||this.props.history.push("/products")}},{key:"render",value:function(){var e=[Va,qa,ln,fn,On][this.props.step];return r.a.createElement("div",{className:"page-wrapper"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | Onboarding")),r.a.createElement(Kt,{activeTab:this.props.location.pathname.slice(1)}),r.a.createElement(e,{platform:this.props.platform}),4!==this.props.step?r.a.createElement(Ha,{currentStep:this.props.step}):null)}}]),a}(n.Component),Sn=Object(Fe.a)(Object(l.b)((function(e){return Object(d.a)(Object(d.a)({},e.onboarding),{},{platform:e.auth.platform})}))(Cn)),In=function(e){return function(t){t({type:"GET_SHOP_CLAIMS_PROCESSING",payload:{}}),t(Oe({type:"GET_SHOP_CLAIMS_REQ",payload:Object(d.a)({},e)}))}},Rn=function(e){return function(t){t({type:"GET_CLAIMS_FOR_RESOLUTION_PROCESSING",payload:{}}),t(Oe({type:"GET_CLAIMS_FOR_RESOLUTION_REQ",payload:{shopId:e}}))}},Pn=function(e,t){return function(a){var n=t?"ALL":"LIMITED";a({type:"CLAIMS_EXPORT_PROCESSING",payload:{}}),a(Oe({type:"GET_".concat(n,"_CLAIMS_EXPORT_REQ"),payload:e}))}},Tn=function(){return function(e){e({type:"CLAIMS_EXPORT_DOWNLOAD_FALSE",payload:{}})}},wn=function(){return function(e){e(Oe({type:"GET_ISSUE_TYPES_REQ",payload:{}}))}},jn=new u.a,kn=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).state={shopId:jn.get("clydeShopId")},n}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){jn.get("clydeShopId")||this.props.history.push("/login")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===e.returnToLogin&&(this.props.history.push("/login"),this.props._returnedToLogin()),jn.get("clydeShopId")?(e.authed&&this.props.initialState&&(this.props._getOnboardingInfo(),this.props._getClaimsForResolution(this.shopId)),!e.isOnboarding||e.initialState?"/"===this.props.history.location.pathname&&this.props.history.push("/products"):this.props.history.push("/welcome")):this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement("div",{className:"page-wrapper"},r.a.createElement(Kt,null),this.state.shopId&&this.props.authed&&!this.props.loading?r.a.createElement("div",null,this.props.children):null)}}]),a}(n.Component),An=Object(Fe.a)(Object(l.b)((function(e){return Object(d.a)(Object(d.a)({},e.onboarding),{},{authed:e.auth.authed,loading:e.auth.loading,returnToLogin:e.auth.returnToLogin})}),(function(e){return Object(i.b)({_getOnboardingInfo:$t,_returnedToLogin:Ke,_getClaimsForResolution:Rn},e)}))(kn)),Dn=function(e){return{type:"SELECT_PERFORMANCE_GRAPH_TYPE",payload:e}},Ln=function(e){return{type:"SELECT_PERFORMANCE_CHANGE_TYPE",payload:e}},xn=function(e,t){return function(a){a({type:"GET_GRAPH_DATA",payload:e}),a(Oe({type:"GET_GRAPH_DATA_REQ",payload:{dateRange:e,platform:t}}))}},Fn=a(89),Mn=a(69),Un=function(e){var t=e.handleSelect,a=e.id,n=e.isLoading,o=e.mainValue,c=e.secondaryInfo,l=e.selected,s=e.title,i=e.tooltipLabel,m="button-nostyle performance-data-tile";return t||(m+=" performance-data-tile--no-select"),l&&(m+=" performance-data-tile--selected"),r.a.createElement("button",{id:a,className:m,disabled:!t,onClick:t},r.a.createElement("div",{className:"performance-data-tile__title"},r.a.createElement("span",null,s),i&&r.a.createElement(ut.j,{position:"bottom",label:i,hideIndicator:!0},r.a.createElement("img",{className:"performance-data-tile__title__info","data-tip":!0,tabIndex:"0",alt:"info",src:"/images/info-icon.svg"}))),r.a.createElement("div",{className:"performance-data-tile__content"},n?r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"performance-data-tile__list"},r.a.createElement("li",{className:"performance-data-tile__list__main"},o),c.map((function(e,t){return r.a.createElement("li",{key:"dt-".concat(t)},r.a.createElement("span",{className:"performance-data-tile__list__title"},e.title),r.a.createElement("span",{className:"performance-data-tile__list__value"},e.value))}))))))},Gn=a(689),Bn=a(684),Hn=a(687),Wn=a(693),Vn=a(681),Kn=a(691),zn=function(e){var t=e.datum.x,a=e.moment,n=e.style,o=e.text,c=a(t).format("MMMM Do YYYY"),l=o.slice(0,o.length-1);l.reverse();var s=[c," "].concat(Object(E.a)(l)),i=[{textAnchor:"start",fontFamily:"Volte Medium",fill:"#000"}].concat(Object(E.a)(n.reverse()));return r.a.createElement("g",null,r.a.createElement(Kn.a,Object.assign({},e,{text:s,style:i,cornerRadius:5,flyoutStyle:{stroke:"black",fill:"white",text:{anchor:"start"}}})))},Yn=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={showCombinedGraph:!0,showPosGraph:!0,showPpGraph:!0},e.toggleShowGraph=function(t){var a=t.currentTarget.name;"click"===t.type&&t.currentTarget.blur(),e.setState((function(e){return Object(b.a)({},a,!e[a])}))},e.processGraphData=function(){var t=e.props,a=t.combinedSales,n=t.posSales,r=t.ppSales,o=t.changeType,c="",l=[],s=[],i=[];switch(t.graphType){case"contracts":c="Contracts Sold",l=a.graphData.contractCount,s=n.graphData.contractCount,i=r.graphData.contractCount;break;case"contractRevenue":c="Contract Revenue",l=a.graphData.contractRevenue,s=n.graphData.contractRevenue,i=r.graphData.contractRevenue;break;case"storeRevenue":c="Your Profit",l=a.graphData.storeRevenue,s=n.graphData.storeRevenue,i=r.graphData.storeRevenue;break;case"productValue":c="Product Value Covered",l=a.graphData.productValue,s=n.graphData.productValue,i=r.graphData.productValue}switch(o){case"day":c+=" \u2014 Day Over Day",l=l.map(e.buildDayPoint),s=s.map(e.buildDayPoint),i=i.map(e.buildDayPoint);break;case"week":c+=" \u2014 Week Over Week",l=e.buildWeekPoints(l),s=e.buildWeekPoints(s),i=e.buildWeekPoints(i);break;case"total":c+=" \u2014 Running Total",l=l.map(e.buildTotalPoint),s=s.map(e.buildTotalPoint),i=i.map(e.buildTotalPoint)}return{selectedGraphName:c,selectedCombinedGraph:l,selectedPosGraph:s,selectedPpGraph:i}},e.buildTotalPoint=function(e){var t=e.date,a=e.value,n=e.runSum;return{x:O.a.utc(t),y:n,n:a}},e.buildDayPoint=function(e){var t=e.date,a=e.value,n=e.runSum;return{x:O.a.utc(t),y:a,n:n}},e.buildWeekPoints=function(e){var t,a=O()().year(),n={},r=Object(ne.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,c=o.date,l=o.value,s=o.runSum,i=O()(c).year(),m=O()(c).week();if(a>i)m-=52*(a-i);n[m]?(n[m].y+=l,n[m].n=s):n[m]={x:O()().week(m),y:l,n:s}}}catch(d){r.e(d)}finally{r.f()}return Object.values(n)},e.buildContainerComponent=function(t){var a=e.state,n=a.showCombinedGraph,o=a.showPosGraph,c=a.showPpGraph,l=0===t.length||!n&&!o&&!c;return r.a.createElement(Gn.a,{voronoiBlacklist:["ppScatter","posScatter","totalScatter"],disable:l,domain:"x",labels:function(t){return e.buildPointLabels(t)},labelComponent:r.a.createElement(zn,{moment:O.a})})},e.buildPointLabels=function(t){var a,n,r=e.props,o=r.changeType,c=r.graphType,l=r.formatMoney,s=t.y,i=t.n,m=t.childName;switch(o){case"day":case"week":a=s,n=i;break;case"total":default:a=i,n=s}var d="Total"===m?"Combined Sales":m,u="";switch(c){case"contracts":u+="".concat(d," Running Total: ").concat(n,"\n"),u+="".concat(d," Contracts Bought: ").concat(a,"\n ");break;case"contractRevenue":case"storeRevenue":u+="".concat(d," Running Total: ").concat(l(n),"\n"),u+="".concat(d," Revenue Earned: ").concat(l(a),"\n ")}return u},e.buildDateLabels=function(t){var a=O()(e.props.graphRange.endDate).subtract(3,"months");return O()(e.props.graphRange.startDate).isSameOrBefore(a)?O()(t).format("MMMM"):O()(t).format("L")},e.formatAxisTicks=function(t){return"contracts"===e.props.graphType?t:"$".concat(t)},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.changeType,n=t.graphRange,o=this.state,c=o.showCombinedGraph,l=o.showPosGraph,s=o.showPpGraph,i=this.processGraphData(),m=i.selectedGraphName,d=i.selectedCombinedGraph,u=i.selectedPosGraph,p=i.selectedPpGraph,_="Date";return"week"===a&&(_="Week of"),r.a.createElement("div",{className:"performance-graph-tile"},r.a.createElement("div",{className:"performance-graph-tile__title"},r.a.createElement("span",null,m)),r.a.createElement("div",{className:"performance-graph-tile__graph"},r.a.createElement(Bn.a,{padding:{top:25,right:15,bottom:67,left:75},width:900,height:450,containerComponent:this.buildContainerComponent(d),theme:Hn.a.material},r.a.createElement(Wn.a,{label:_,scale:"time",style:{axisLabel:{padding:40,fontFamily:"Volte Semibold",fontSize:"18px"},tickLabels:{fontFamily:"Volte"}},tickFormat:function(t){return e.buildDateLabels(t)},domain:[O()(n.startDate),O()(n.endDate)]}),r.a.createElement(Wn.a,{label:m,style:{axisLabel:{padding:50,fontFamily:"Volte Semibold",fontSize:"18px"},tickLabels:{fontFamily:"Volte"}},domain:[0,10],tickFormat:this.formatAxisTicks,dependentAxis:!0}),s&&r.a.createElement(Vn.a,{name:"Post Purchase",data:p,style:{data:{stroke:"#e07400",strokeWidth:"2",strokeDasharray:"10,5"},labels:{textAnchor:"start",fontFamily:"Volte",fill:"#e07400"}}}),l&&r.a.createElement(Vn.a,{name:"Time of Sale",data:u,style:{data:{stroke:"#e07400",strokeWidth:"2",strokeDasharray:"2,2"},labels:{textAnchor:"start",fontFamily:"Volte",fill:"#e07400"}}}),c&&r.a.createElement(Vn.a,{name:"Total",data:d,style:{data:{stroke:"#e07400",strokeWidth:"2"},labels:{textAnchor:"start",fontFamily:"Volte",fill:"#e07400"}}}))),r.a.createElement("div",{className:"performance-change-type-input"},r.a.createElement("div",{className:"performance-change-type-input__group"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"showCombinedGraph",name:"showCombinedGraph",checked:c,onChange:this.toggleShowGraph}),r.a.createElement("label",{htmlFor:"showCombinedGraph",className:"performance-toggle-label"},r.a.createElement("svg",{className:"performance-toggle-line",viewBox:"0 0 30 10",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("line",{x1:"0",y1:"5",x2:"30",y2:"5",stroke:"#e07400",strokeWidth:"2"})),"Total")),r.a.createElement("div",{className:"performance-change-type-input__group"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"showPosGraph",name:"showPosGraph",checked:l,onChange:this.toggleShowGraph}),r.a.createElement("label",{htmlFor:"showPosGraph",className:"performance-toggle-label"},r.a.createElement("svg",{className:"performance-toggle-line",viewBox:"0 0 30 10",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("line",{x1:"0",y1:"5",x2:"30",y2:"5",stroke:"#e07400",strokeWidth:"2",strokeDasharray:"2 2"})),"Time of Sale")),r.a.createElement("div",{className:"performance-change-type-input__group"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"showPpGraph",name:"showPpGraph",checked:s,onChange:this.toggleShowGraph}),r.a.createElement("label",{htmlFor:"showPpGraph",className:"performance-toggle-label"},r.a.createElement("svg",{className:"performance-toggle-line",viewBox:"0 0 30 10",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("line",{x1:"0",y1:"5",x2:"30",y2:"5",stroke:"#e07400",strokeWidth:"2",strokeDasharray:"5 3"})),"Post Purchase"))))}}]),a}(n.Component),Qn=function(e){return void 0===e||null===e?e:"number"!==typeof e||Number.isNaN(e)?"Value error":"$".concat(e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","))},qn=function(e){return e?new Date(e).toLocaleDateString():(new Date).toLocaleDateString()},$n=function(e){var t=new Date(e),a=t.setMinutes(t.getMinutes()+t.getTimezoneOffset());return new Date(a).toLocaleDateString()},Xn=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).handleSelectGraphType=function(e){var t=e.currentTarget.id;n.props._selectGraphType(t)},n.handleSelectChangeType=function(e){n.props._selectChangeType(e)},n.handleRangeChange=function(e){var t=e.startDate,a=e.endDate;n.setState({showCalendar:!1}),n.updateGraph({startDate:t.format(),endDate:a.format()})},n.toggleCalendar=function(e){e.stopPropagation(),n.state.showCalendar&&e.currentTarget.blur(),n.setState((function(e){return{showCalendar:!e.showCalendar}}))},n.closeCalendar=function(e){e.preventDefault(),n.setState({showCalendar:!1})},n.buildGraphTypeClassNames=function(){var e="button-nostyle button-graph-type button-graph-type--total",t="button-nostyle button-graph-type button-graph-type--week",a="button-nostyle button-graph-type button-graph-type--day";switch(n.props.changeType){case"week":t+=" button-graph-type--selected";break;case"day":a+=" button-graph-type--selected";break;case"total":default:e+=" button-graph-type--selected"}return{graphTypeTotal:e,graphTypeWeek:t,graphTypeDay:a}},n.buildDefaultRanges=function(){return{Today:{startDate:n.moment(),endDate:n.moment()},"Past 7 Days":{startDate:n.moment().subtract("7","day"),endDate:n.moment()},"Past 14 Days":{startDate:n.moment().subtract("14","day"),endDate:n.moment()},"Past Month":{startDate:n.moment().subtract("1","month"),endDate:n.moment()},"Past 6 Months":{startDate:n.moment().subtract("6","month"),endDate:n.moment()},"Past Year":{startDate:n.moment().subtract("1","year"),endDate:n.moment()}}},n.buildSecondaryInfoArrays=function(){var e=n.props,t=e.averageContractValue,a=e.averageProductValue,r=e.claimRate,o=e.posSales,c=e.ppSales,l=[{title:"At Time of Sale:",value:o.runSums.contractCount},{title:"Post Purchase:",value:c.runSums.contractCount}],s=[{title:"At Time of Sale:",value:Qn(o.runSums.contractRevenue)},{title:"Post Purchase:",value:Qn(c.runSums.contractRevenue)}],i=[{title:"At Time of Sale:",value:Qn(o.runSums.storeRevenue)},{title:"Post Purchase:",value:Qn(c.runSums.storeRevenue)}];return{avgValueSecondaryInfo:[{title:"Avg. Product Value:",value:Qn(a)},{title:"Avg. Contract Value:",value:Qn(t)}],claimsSecondaryInfo:[{title:"Claim Rate:",value:"".concat(r,"%")}],contractCountSecondaryInfo:l,contractRevSecondaryInfo:s,storeRevSecondaryInfo:i}},n.moment=Object(Fn.extendMoment)(O.a),n.state={rangeChanged:!1,showCalendar:!1},n}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.moment().subtract(1,"months"),t=this.moment();this.updateGraph({startDate:e.format(),endDate:t.format()})}},{key:"updateGraph",value:function(e){var t=this.props;(0,t._getGraphData)(e,t.platform)}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.attachRate,o=a.combinedSales,c=a.changeType,l=a.graphRange,s=a.graphType,i=a.loading,m=a.platform,d=a.posSales,u=a.ppSales,p=a.totalClaimQuantity,_=a.sendsContractSalesOnly,h=this.buildGraphTypeClassNames(),E=h.graphTypeTotal,g=h.graphTypeWeek,f=h.graphTypeDay,b=this.buildSecondaryInfoArrays(),v=b.avgValueSecondaryInfo,y=b.contractCountSecondaryInfo,N=b.contractRevSecondaryInfo,O=b.storeRevSecondaryInfo,C=b.claimsSecondaryInfo,S="Clyde"===m||_;return e=S?null:null===n?"Not enough data":"".concat(n,"%"),r.a.createElement("div",{className:"page-container"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | Performance")),r.a.createElement("div",{className:"page-layout"},r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("div",{className:"row contract-sales-title-container"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",null,"Performance")))),r.a.createElement("br",null),r.a.createElement("div",{className:"page-layout__content d-flex flex-column"},r.a.createElement("div",{className:"performance-input"},r.a.createElement("button",{className:"button-nostyle performance-input__date",onClick:this.toggleCalendar},r.a.createElement("div",{className:"performance-input__date__group"},r.a.createElement("span",{className:"performance-input__date__group-label"},"Start Date"),r.a.createElement("div",{className:"performance-input__date__group-date"},r.a.createElement("span",null,qn(l.startDate)))),r.a.createElement("div",{className:"performance-input__date__group"},r.a.createElement("span",{className:"performance-input__date__group-label"},"End Date"),r.a.createElement("div",{className:"performance-input__date__group-date"},r.a.createElement("span",null,qn(l.endDate))))),r.a.createElement("div",{className:"performance-input__graph"},r.a.createElement("button",{className:E,onClick:function(){return t.handleSelectChangeType("total")}},"Running total"),r.a.createElement("button",{className:g,onClick:function(){return t.handleSelectChangeType("week")}},"Week over week"),r.a.createElement("button",{className:f,onClick:function(){return t.handleSelectChangeType("day")}},"Day over day"))),r.a.createElement("div",{className:"performance-calendar-row",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"performance-calendar--".concat(this.state.showCalendar?"visible":"invisible")},r.a.createElement(Mn.DateRange,{maxDate:this.moment(),minDate:this.moment("2018-06-01"),twoStepChange:!0,ranges:this.buildDefaultRanges(),onChange:this.handleRangeChange,moveRangeOnFirstSelection:!1,showMonthAndYearPickers:!0,showMonthArrow:!0,showSelectionPreview:!0}))),r.a.createElement("div",{className:"performance-data-row"},r.a.createElement(Un,{handleSelect:this.handleSelectGraphType,id:"contracts",selected:"contracts"===s,title:"Total Contracts Sold",isLoading:i,mainValue:o.runSums.contractCount,secondaryInfo:y}),r.a.createElement(Un,{handleSelect:this.handleSelectGraphType,id:"contractRevenue",selected:"contractRevenue"===s,title:"Total Contract Revenue",isLoading:i,mainValue:Qn(o.runSums.contractRevenue),secondaryInfo:N}),r.a.createElement(Un,{handleSelect:this.handleSelectGraphType,id:"storeRevenue",selected:"storeRevenue"===s,title:"Gross Profit",isLoading:i,mainValue:Qn(o.runSums.storeRevenue),secondaryInfo:O}),r.a.createElement(Un,{handleSelect:null,id:"claims",selected:null,title:"Claims",isLoading:i,mainValue:p,secondaryInfo:C,tooltipLabel:r.a.createElement("div",{className:"tooltip-text tooltip-text--performance"},r.a.createElement("p",null,"Your claim rate is the percentage of protection plans sold during a given period that had claims filed on them."))}),r.a.createElement(Un,{handleSelect:null,id:"insights",selected:null,title:S?"Purchase insights":"Attach Rate",isLoading:i,mainValue:e,secondaryInfo:v,tooltipLabel:r.a.createElement("div",{className:"tooltip-text tooltip-text--performance"},!S&&r.a.createElement("p",null,"Your attach rate is the percentage of sales of eligible products that were purchased with a Clyde Protection Plan."),r.a.createElement("p",null,"The average product value is your average cost of a product sold with a protection plan."),r.a.createElement("p",null,"The average contract value is the average cost paid by your customers for a protection plan."))})),r.a.createElement(Yn,{changeType:c,graphType:s,combinedSales:o,posSales:d,ppSales:u,graphRange:l,moment:this.moment,formatMoney:Qn}))))}}]),a}(n.Component),Zn=Object(l.b)((function(e){return Object(d.a)({platform:e.auth.platform},e.performance)}),(function(e){return Object(i.b)({_getGraphData:xn,_selectChangeType:Ln,_selectGraphType:Dn},e)}))(Xn),Jn=function(e,t,a){return function(n){n({type:"SEARCH_SALES_PROCESSING",payload:{pageNumber:a}}),n(Oe({type:"SEARCH_SALES_REQ",payload:{shopId:e,search:t,pageNumber:a}}))}},er=function(e){return{type:"SET_SALE_SEARCH",payload:e}},tr=function(e){return{type:"SET_SALES_PAGE_NUMBER",payload:{pageNumber:e}}},ar=function(){return{type:"SHOW_INVOICE_EXPORT_MODAL",payload:{}}},nr=function(){return{type:"SHOW_IMPORT_SALES_MODAL",payload:{}}},rr=function(e){return function(t){e&&""!==e&&t(Oe({type:"CANCEL_SALES_IMPORT",payload:{importFileKey:e}})),t({type:"CLOSE_IMPORT_SALES_MODAL",payload:{}})}},or=function(e){return function(t){t(Oe({type:"IMPORT_SALES_SUMMARY_REQ",payload:{salesData:e}})),t({type:"IMPORT_SALES_PROCESSING",payload:{}})}},cr=function(e,t,a){return function(n){n(Oe({type:"IMPORT_SALES_REQ",payload:{runUpdate:e,importFileKey:t,rowCount:a}})),n({type:"IMPORT_SALES_PROCESSING",payload:{}})}},lr=function(e){return{type:"SET_INVOICE_RANGE",payload:e}},sr=function(e){return function(t){t({type:"INVOICE_EXPORT_PROCESSING",payload:{}}),t(Oe({type:"GET_INVOICE_EXPORT_REQ",payload:e}))}},ir=function(){return{type:"CANCEL_INVOICE_EXPORT",payload:{}}},mr=function(){return{type:"SET_INVOICE_DOWNLOAD_FALSE",payload:{}}},dr=function(e){return{type:"SHOW_CONFIRM_RESEND_EMAIL",payload:{saleId:e}}},ur=function(e){return function(t){t({type:"RESEND_EMAIL_INFO_PROCESSING",payload:{}}),t(Oe({type:"RESEND_EMAIL_INFO_REQ",payload:{saleId:e}}))}},pr=function(e,t,a){return function(n){n({type:"RESEND_EMAIL_SUBMIT_PROCESSING",payload:{}}),n(Oe({type:"RESEND_EMAIL_SUBMIT_REQ",payload:{saleId:e,contact:t,contactType:a}}))}},_r=function(){return{type:"CANCEL_RESEND_EMAIL",payload:{}}},hr=function(){return{type:"EXIT_RESEND_EMAIL",payload:{}}},Er=a(36),gr=a.n(Er),fr=a(40),br=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={expand:!1,showActions:!1},e.toggleExpand=function(){e.setState({expand:!e.state.expand,showActions:!1})},e.toggleShowActions=function(){e.setState({showActions:!e.state.showActions})},e.openContractUrl=function(t){t.stopPropagation(),window.open("".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?pid=").concat(e.props.sale.productId,"&cid=").concat(e.props.sale.contractId),"_blank")},e.handleResendEmail=function(){e.props.showConfirmResendEmail(e.props.sale.id)},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{"data-test":"contractRow-".concat(this.props.sale.contractSku),className:gt()("sale-item",{"sale-item--expanded":this.state.expand})},r.a.createElement("div",{onClick:function(){e.toggleExpand()},className:this.state.expand?"sale-item__content sale-item__content--expanded row":"sale-item__content row"},r.a.createElement("div",{"data-test":"customerEmail",className:"col-6"},this.props.sale.email||this.props.sale.phone||this.props.sale.customerExternalId),r.a.createElement("div",{"data-test":"purchaseDate",className:"col-2"},this.props.sale.timePaid),r.a.createElement("div",{"data-test":"billed",className:"col-2"},this.props.sale.billedAt),r.a.createElement("div",{"data-test":"refunded",className:"col-2"},this.props.sale.refundedAt)),r.a.createElement(fr.UnmountClosed,{springConfig:{stiffness:220,damping:30},className:gt()("col-12 sale-item__details",{"sale-item__details--collapsed":!this.state.expand}),isOpened:this.state.expand},r.a.createElement("div",{"data-test":"saleDetailsCard",className:"sale-details"},r.a.createElement("div",{className:"row sale-details__header"},r.a.createElement("div",{className:"col-3"},"Customer"),r.a.createElement("div",{className:"col-3"},"Contract"),r.a.createElement("div",{className:"col-3"},"Product"),r.a.createElement("div",{className:"col-3"},"Sale")),r.a.createElement("div",{className:"row sale-details__content"},r.a.createElement("div",{className:"col-3 sale-details__content__column"},r.a.createElement("div",null,r.a.createElement("span",null,this.props.sale.name)),r.a.createElement("div",null,this.props.sale.email?r.a.createElement("span",null,this.props.sale.email):null),r.a.createElement("div",null,this.props.sale.phone?r.a.createElement("span",null,this.props.sale.phone):null),r.a.createElement("div",null,r.a.createElement("span",null,this.props.sale.address)),r.a.createElement("div",null,r.a.createElement("span",null,"".concat(this.props.sale.city,", ").concat(this.props.sale.province," ").concat(this.props.sale.zip)))),r.a.createElement("div",{className:"col-3 sale-details__content__column"},r.a.createElement("div",null,r.a.createElement("span",null,"SKU: "),r.a.createElement("span",{"data-test":"contractSku"},r.a.createElement("span",{className:"sale-contract-link",onClick:function(t){e.openContractUrl(t)}},this.props.sale.contractSku))),r.a.createElement("div",null,r.a.createElement("span",null,"Contract cost: "),r.a.createElement("span",{"data-test":"contractCost"},"$",this.props.sale.contractCost.toFixed(2))),r.a.createElement("div",null,r.a.createElement("span",null,"Your profit: "),r.a.createElement("span",{"data-test":"yourProfit"},"$",this.props.sale.contractMarkup.toFixed(2))),r.a.createElement("div",null,r.a.createElement("span",null,"Sum: "),r.a.createElement("span",{"data-test":"sum"},"$",(this.props.sale.contractCost+this.props.sale.contractMarkup).toFixed(2)))),r.a.createElement("div",{className:"col-3 sale-details__content__column"},r.a.createElement("div",null,r.a.createElement("span",null,"Name: "),r.a.createElement("span",{"data-test":"name"},this.props.sale.productName)),r.a.createElement("div",null,r.a.createElement("span",null,"SKU: "),r.a.createElement("span",{"data-test":"productSku"},this.props.sale.productSku||"n/a")),r.a.createElement("div",null,r.a.createElement("span",null,"Price: "),r.a.createElement("span",{"data-test":"price"},"$",this.props.sale.productPrice.toFixed(2)))),r.a.createElement("div",{className:"col-3 sale-details__content__column"},r.a.createElement("div",null,r.a.createElement("span",null,"Clyde ID: "),r.a.createElement("span",{"data-test":"clydeId"},this.props.sale.hashId)),r.a.createElement("div",null,r.a.createElement("span",null,"Platform Source: "),r.a.createElement("span",{"data-test":"platformSource"},this.props.sale.source)),r.a.createElement("div",null,r.a.createElement("span",null,"Order ID: "),r.a.createElement("span",{"data-test":"orderId"},this.props.sale.orderId||"none")),r.a.createElement("div",null,r.a.createElement("span",null,"Purchase Date: "),r.a.createElement("span",{"data-test":"purchaseDate"},this.props.sale.timePaid||"n/a")),r.a.createElement("div",null,r.a.createElement("span",null,"Billed: "),r.a.createElement("span",{"data-test":"billed"},this.props.sale.billedAt||"n/a")),r.a.createElement("div",null,r.a.createElement("span",null,"Refunded: "),r.a.createElement("span",{"data-test":"refunded"},this.props.sale.refundedAt||"n/a")))),!0!==this.props.sale.refunded?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{onClick:this.toggleShowActions,className:"actions-menu-expand"},"Actions",r.a.createElement("span",{className:"float-right"},"\u203a")),r.a.createElement("div",{className:this.state.showActions?"actions-menu actions-menu--expanded":"actions-menu"},r.a.createElement("div",{onClick:this.handleResendEmail,className:"actions-menu__item"},"Re-send email")))):null)))}}]),a}(n.Component),vr=function(e){return r.a.createElement("div",{className:"sales-list-container"},r.a.createElement("div",{className:"sales-list-container__header row"},r.a.createElement("div",{className:"col-6"},"Customer Email"),r.a.createElement("div",{className:"col-2"},"Purchase Date"),r.a.createElement("div",{className:"col-2"},"Billed"),r.a.createElement("div",{className:"col-2"},"Refunded")),e.sales.map((function(t,a){return r.a.createElement(br,{key:"sale-".concat(a),sale:t,showConfirmResendEmail:e.showConfirmResendEmail})})))},yr=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={contact:"",contactType:null,validContact:!1},e.handleConfirmResend=function(){if(e.state.validContact){var t=e.state.contact;"phone"===e.state.contactType&&(t=t.replace(/-/g,"")),e.props._confirmResendInfo(e.props.saleId,t,e.state.contactType)}},e.handleChangeContact=function(t){var a=t.target.value;e.setState({contact:a},(function(){e.validateContact(a)}))},e.validateContact=function(t){var a,n=!1;/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i.test(t)&&(n=!0,a="email"),/^\d{10}$/.test(t.replace(/-/g,""))&&(n=!0,a="phone"),e.setState({validContact:n,contactType:a})},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){this.props._getOrderInfo(this.props.saleId)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){JSON.stringify(e.orderInfo)!==JSON.stringify(this.props.orderInfo)&&this.setState({contact:e.orderInfo.email||e.orderInfo.phone,contactType:e.orderInfo.email?"email":"phone",validContact:!0})}},{key:"render",value:function(){var e;return this.props.orderInfo&&(e="This will send a copy of the contract information from this order to the customer.",this.props.orderInfo.contractCount>1&&(e+=" The message will contain contract information for all ".concat(this.props.orderInfo.contractCount," contracts on the order."))),r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-container__backdrop"}),"finish"!==this.props.resendStep?r.a.createElement("div",{className:"clyde-modal-content clyde-modal-content--resend-email"},!1===this.props.processingGetOrderInfo?r.a.createElement("div",{className:"resend-modal-content"},r.a.createElement("div",{className:"cancel-resend",onClick:this.props._cancelResend},"\u2715"),r.a.createElement("h1",null,"Re-send contract info"),r.a.createElement("p",{className:"resend-contact-explanation"},e),r.a.createElement("div",{className:"resend-contact"},r.a.createElement("label",{htmlFor:"resend-contact-input",className:gt()("resend-contact__label",{"resend-contact__label--invalid":!this.state.validContact})},"Send to (email/phone):"),r.a.createElement(ut.i,{className:"resend-contact__input",id:"resend-contact-input",onChange:this.handleChangeContact,value:this.state.contact})),r.a.createElement("div",{className:"resend-actions"},r.a.createElement(ut.a,{id:"confirm-resend-button",className:"resend-actions__confirm",onClick:this.handleConfirmResend,processing:this.props.processingResend,disabled:!1===this.state.validContact,successText:"Sent"},"Confirm"))):r.a.createElement("div",{className:"resend-modal-content"},r.a.createElement("h3",null,"Re-send contract info"),r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large",className:"resend-loading-container"}))):r.a.createElement("div",{className:"clyde-modal-content clyde-modal-content--resend-email"},r.a.createElement("div",{className:"resend-modal-content resend-modal-content--action-complete"},r.a.createElement(ut.n,{text:"Sent!",onSuccess:this.props._exitResend}))))}}]),a}(n.Component);var Nr=Object(l.b)((function(e){return{orderInfo:e.sales.orderInfo,resendStep:e.sales.resendStep,processingGetOrderInfo:e.sales.processingGetOrderInfo,processingResend:e.sales.processingResend}}),(function(e){return Object(i.b)({_getOrderInfo:ur,_cancelResend:_r,_confirmResendInfo:pr,_exitResend:hr},e)}))(yr),Or=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).handleRangeChange=function(e){n.setState({showCalendar:!1}),n.props._setInvoiceRange({startDate:e.startDate.format(),endDate:e.endDate.format()})},n.toggleCalendar=function(e){e.stopPropagation(),n.setState({showCalendar:!n.state.showCalendar})},n.closeCalendar=function(e){e.preventDefault(),n.setState({showCalendar:!1})},n.buildDefaultRanges=function(){return{"Past 14 Days":{startDate:n.moment().subtract("14","day"),endDate:n.moment()},"Past Month":{startDate:n.moment().subtract("1","month"),endDate:n.moment()},"Past 3 Months":{startDate:n.moment().subtract("3","month"),endDate:n.moment()},"Past 6 Months":{startDate:n.moment().subtract("6","month"),endDate:n.moment()},"Past Year":{startDate:n.moment().subtract("1","year"),endDate:n.moment()}}},n.handleSubmitInvoiceExport=function(){n.props._submitInvoiceExport(n.props.invoiceExport)},n.moment=Object(Fn.extendMoment)(O.a),n.state={showCalendar:!1},n}return Object(ke.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(!0===e.invoiceExportFile.download){var a=document.createElement("a");a.href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,\n      ".concat(e.invoiceExportFile.data),a.download=e.invoiceExportFile.name,a.click(),setTimeout((function(){t.props._setInvoiceDownloadFalse()}),500)}}},{key:"componentDidMount",value:function(){this.props._setInvoiceRange({startDate:this.moment().subtract("14","day"),endDate:this.moment()})}},{key:"render",value:function(){return r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-container__backdrop"}),r.a.createElement("div",{className:"clyde-modal-content clyde-modal-content--export-modal"},r.a.createElement("div",{className:"export-modal-content"},r.a.createElement("div",{className:"export-modal-content__cancel-export",onClick:this.props._cancelInvoiceExport},"\u2715"),r.a.createElement("h1",null,"Export invoice data"),r.a.createElement("br",null),r.a.createElement("h5",null,"Download an Excel file containing all of your contract sales billed between the below dates, as well as credits applied on those billing dates from promotions or refunded contracts."),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("div",{className:"export-modal-content__dates",onClick:this.toggleCalendar},r.a.createElement("div",{className:"export-modal-content__dates__group"},r.a.createElement("label",{htmlFor:"startDate"},"Start Date"),r.a.createElement(ut.i,{className:"export-modal-content__dates__group",name:"startDate",value:qn(this.props.invoiceExport.startDate),readOnly:!0})),r.a.createElement("div",{className:"export-modal-content__dates__group"},r.a.createElement("label",{htmlFor:"endDate"},"End Date"),r.a.createElement(ut.i,{className:"export-modal-content__dates__group",name:"endDate",value:qn(this.props.invoiceExport.endDate),readOnly:!0}))),r.a.createElement("br",null),r.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"export-modal-content__calendar--".concat(this.state.showCalendar?"visible":"invisible")},r.a.createElement(Mn.DateRange,{maxDate:this.moment(),minDate:this.moment("2018-06-01"),ranges:this.buildDefaultRanges(),onChange:this.handleRangeChange,moveRangeOnFirstSelection:!1,twoStepChange:!0,showMonthAndYearPickers:!0,showMonthArrow:!0,showSelectionPreview:!0})))),r.a.createElement("div",{className:"export-modal-content__submit-row"},r.a.createElement(ut.a,{className:"export-modal-content__submit-button",onClick:this.handleSubmitInvoiceExport,processing:this.invoiceExportProcessing,successText:"Done"},"Export")))))}}]),a}(n.Component),Cr=Object(l.b)((function(e){return{invoiceExport:e.sales.invoiceExport,invoiceExportProcessing:e.sales.invoiceExportProcessing,invoiceExportFile:e.sales.invoiceExportFile}}),(function(e){return Object(i.b)({_cancelInvoiceExport:ir,_setInvoiceRange:lr,_submitInvoiceExport:sr,_setInvoiceDownloadFalse:mr},e)}))(Or),Sr=function(e){var t=e.show,a=e.step,n=e.importData,o={opacity:"0",transition:"opacity 400ms ease"},c={entering:{display:"block",opacity:"0"},entered:{display:"block",opacity:"1"},exiting:{display:"block",opacity:"1"},exited:{display:"block",opacity:"1"}};return r.a.createElement(Ht.a,{in:t,timeout:1e3},(function(e){return r.a.createElement("div",{style:Object(d.a)(Object(d.a)({},o),c[e]),className:"import-summary"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:gt()("import-summary-tile",{"import-summary-tile--collapsed":"confirm"!==a})},r.a.createElement("div",{className:"import-summary-tile__count import-summary-tile__count--blue"},n.insertCount),r.a.createElement("div",{className:"import-summary-tile__subtitle"},"confirm"===a?"Products will be added":"Products added"),r.a.createElement("hr",null),r.a.createElement("ol",{className:"import-summary__list"},"confirm"===a&&n.insert.map((function(e,t){return r.a.createElement("li",{key:"success-import-".concat(t),className:"import-summary__list__item"},e.sku)}))))),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:gt()("import-summary-tile",{"import-summary-tile--collapsed":"confirm"!==a})},r.a.createElement("div",{className:"import-summary-tile__count import-summary-tile__count--yellow"},n.updateCount),r.a.createElement("div",{className:"import-summary-tile__subtitle"},"confirm"===a?"Products can be updated":"Products updated"),r.a.createElement("hr",null),r.a.createElement("ol",{className:"import-summary__list"},"confirm"===a&&n.skuDuplicates.map((function(e,t){return r.a.createElement("li",{key:"success-import-".concat(t),className:"import-summary__list__item"},e.sku)}))))),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:gt()("import-summary-tile",{"import-summary-tile--collapsed":"confirm"!==a})},r.a.createElement("div",{className:"import-summary-tile__count import-summary-tile__count--red"},n.ignoreCount||0),r.a.createElement("div",{className:"import-summary-tile__subtitle"},"confirm"===a?"Products will be ignored":"Products ignored"),r.a.createElement("hr",null),r.a.createElement("ol",{className:"import-summary__product-list"},"confirm"===a&&n.ignore.map((function(e,t){return r.a.createElement("li",{key:"failed-import-".concat(t),className:"import-summary__product-list__item"},"Row: ".concat(e.row+1),r.a.createElement("ul",{className:"import-summary__error-list"},e.errors.map((function(e,t){return r.a.createElement("li",{key:"error-".concat(t),className:"import-summary__error-list__item"},e)}))))})))))))}))},Ir=function(e){var t=e.show,a=e.step,n=e.importData,o={opacity:"0",transition:"opacity 400ms ease"},c={entering:{display:"block",opacity:"0"},entered:{display:"block",opacity:"1"},exiting:{display:"block",opacity:"1"},exited:{display:"block",opacity:"1"}};return r.a.createElement(Ht.a,{in:t,timeout:1e3},(function(e){return r.a.createElement("div",{style:Object(d.a)(Object(d.a)({},o),c[e]),className:"import-summary"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:gt()("import-summary-tile",{"import-summary-tile--collapsed":"confirm"!==a})},r.a.createElement("div",{className:"import-summary-tile__count import-summary-tile__count--blue"},n.insertCount),r.a.createElement("div",{className:"import-summary-tile__subtitle"},"confirm"===a?"Sales records (line items) will be added":"Sales records added"),r.a.createElement("hr",null),r.a.createElement("ol",{className:"import-summary__list"},"confirm"===a&&n.insert.map((function(e,t){return r.a.createElement("li",{key:"success-import-".concat(t),className:"import-summary__list__item"},e.productLineItemId&&"Product line ".concat(e.productLineItemId),e.contractItemId&&"and/or associated contract line ".concat(e.contractItemId))}))))),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:gt()("import-summary-tile",{"import-summary-tile--collapsed":"confirm"!==a})},r.a.createElement("div",{className:"import-summary-tile__count import-summary-tile__count--yellow"},n.updateCount),r.a.createElement("div",{className:"import-summary-tile__subtitle"},"confirm"===a?"Sales records can be added to existing sales":"Sales records added"),r.a.createElement("hr",null),r.a.createElement("ol",{className:"import-summary__list"},"confirm"===a&&n.update.map((function(e,t){return r.a.createElement("li",{key:"success-import-".concat(t),className:"import-summary__list__item"},e.productLineItemId&&"Product line ".concat(e.productLineItemId),e.contractLineItemId&&"and/or associated contract line ".concat(e.contractLineItemId))}))))),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:gt()("import-summary-tile",{"import-summary-tile--collapsed":"confirm"!==a})},r.a.createElement("div",{className:"import-summary-tile__count import-summary-tile__count--red"},n.ignoreCount||0),r.a.createElement("div",{className:"import-summary-tile__subtitle"},"confirm"===a?"Sales records will be ignored":"Sales records ignored"),r.a.createElement("hr",null),r.a.createElement("ol",{className:"import-summary__product-list"},"confirm"===a&&n.ignore.map((function(e,t){return r.a.createElement("li",{key:"failed-import-".concat(t),className:"import-summary__product-list__item"},"Row: ".concat(e.row+1),r.a.createElement("ul",{className:"import-summary__error-list"},e.errors.map((function(e,t){return r.a.createElement("li",{key:"error-".concat(t),className:"import-summary__error-list__item"},e)}))))})))))))}))},Rr=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={finishUpload:!1,validFile:!1,fileData:"",errorText:null,fileName:""},e.downloadTemplate=function(){if(!0!==e.props.importProcessing&&"start"===e.props.importStep){var t=document.createElement("a");t.href="data:text/csv;charset=utf-8,".concat(e.props.csvTemplateString),t.download="clyde-".concat(e.props.isProductCSV?"product":"sale","-template.csv"),t.click()}},e.openFileDialog=function(t){t.preventDefault(),!0!==e.props.importProcessing&&"start"===e.props.importStep&&document.getElementById("upload-file").click()},e.selectFile=function(t){var a=t.target.value.split("\\"),n=a[a.length-1],r=t.target.files,o=r[0];if(FileReader&&r&&r.length){var c=o.type.split("/")[1];if(!c){var l=n.split(".");c=l[l.length-1]}if(!["csv","vnd.ms-excel"].includes(c)||o.size>26214400)return void e.setState({validFile:!1,errorText:"Please upload a CSV no larger than 25mb."});var s=new FileReader;s.onload=function(){e.enableUpload(n,s.result)},s.readAsBinaryString(o)}},e.enableUpload=function(t,a){e.setState({validFile:!0,fileName:t,errorText:null,fileData:a})},e.handleSubmit=function(){!0!==e.state.validFile||e.props.importProcessing||e.startUpload()},e.startUpload=function(){e.props._getImportSummary(e.state.fileData)},e.finishUpload=function(t){e.props._submitImport(t,e.props.importFileKey,e.props.importFileRowCount)},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.importPrompts,n=t.importProcessing,o=t.importStep,c=t.importFileKey,l=t.importSummary,s=t.importResult,i=t._closeUploadModal,m=n||"start"!==o?"import-step__button--submitted ":"",d=this.state.validFile?"":"import-step__button--disabled ";return r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-container__backdrop"}),r.a.createElement("div",{className:"clyde-modal-content upload-products"},r.a.createElement("div",{id:"upload-modal",className:"upload-products-modal-content"},r.a.createElement("div",{className:"upload-steps-container"},r.a.createElement("div",{onClick:function(){return i(c)},className:"close-upload-modal clickable"},"\u2715"),r.a.createElement("div",{className:"import-products-prefixed-subtitle"},a.uploadInfo),r.a.createElement("h1",{className:"import-products-title"},a.importTitle,":"),"start"===o&&r.a.createElement("div",{className:"row import-steps"},r.a.createElement("div",{className:"import-step col-lg-4 col-md-4 col-12"},r.a.createElement("div",{className:"import-step__button ".concat(m),onClick:this.downloadTemplate},r.a.createElement("div",{className:"import-step__button__content"},r.a.createElement("img",{className:"import-step-image",alt:"download template",src:"/images/download.png"}),r.a.createElement("div",null,"Download template"))),r.a.createElement("div",{className:"import-step__description"},a.downloadPrompt)),r.a.createElement("div",{className:"import-step col-lg-4 col-md-4 col-12"},r.a.createElement("div",{onClick:this.openFileDialog,className:"import-step__button ".concat(m)},r.a.createElement("div",{className:"import-step__button__content"},r.a.createElement("img",{className:"import-step-image",alt:"upload file",src:"/images/upload.png"}),r.a.createElement("div",null,this.state.fileName||"fileName.csv"),r.a.createElement("div",{className:"import-csv-error"},this.state.errorText))),r.a.createElement("div",{className:"d-none"},r.a.createElement("input",{id:"upload-file",type:"file",onChange:this.selectFile})),r.a.createElement("div",{className:"import-step__description"},"Select the completed template.",r.a.createElement("br",null),r.a.createElement("br",null),"Please note that there is a limit of 1000 rows per CSV.")),r.a.createElement("div",{className:"import-step col-lg-4 col-md-4 col-12"},r.a.createElement("div",{className:"import-step__button import-step__submit-button ".concat(d).concat(m),onClick:this.handleSubmit},r.a.createElement("div",{className:"import-step__button__content"},r.a.createElement("div",null,"Verify file"))),r.a.createElement("div",{className:"import-step__description"},a.submitInfo)),n&&r.a.createElement("div",{className:"import-progress"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large",className:"loading-backdrop--clear"}))),"confirm"===o&&r.a.createElement("div",null,this.props.isProductCSV?r.a.createElement(Sr,{step:o,processing:n,show:!n,importData:l}):r.a.createElement(Ir,{step:o,processing:n,show:!n,importData:l}),!1===n?r.a.createElement("div",{className:"finish-button-row row"},r.a.createElement("div",{className:"col-12 finish-buttons"},r.a.createElement(ut.a,{id:"add-and-update-finish",className:"upload-button",onClick:function(){e.finishUpload(!0)},processing:n,disabled:n,successText:"Done"},"Import & update"),r.a.createElement(ut.a,{id:"add-finish",className:"upload-button",onClick:function(){e.finishUpload(!1)},processing:n,disabled:n,successText:"Done"},"Import new"),r.a.createElement(ut.a,{id:"add-cancel",className:"upload-button upload-button--red",onClick:function(){return i(c)},processing:n,disabled:n,successText:"Cancelled"},"Cancel"))):r.a.createElement("div",{className:"import-progress import-progress--finish"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large",className:"loading-backdrop--clear"}))),"finish"===o&&r.a.createElement("div",null,this.props.isProductCSV?r.a.createElement(Sr,{step:o,processing:n,show:!n,importData:s}):r.a.createElement(Ir,{step:o,processing:n,show:!n,importData:s}),r.a.createElement("div",{className:"finish-button-row row"},r.a.createElement("div",{className:"col-lg-2 offset-lg-10 col-3 offset-9 finish-buttons"},r.a.createElement(ut.a,{id:"finish-upload",className:"upload-button upload-button--red",onClick:function(){return i(c)}},"Finish"))))))))}}]),a}(n.Component),Pr=Object(l.b)((function(e){return{importProcessing:e.sales.importSalesProcessing,importStep:e.sales.importStep,importSummary:e.sales.importSummary,importFileKey:e.sales.importFileKey,importFileRowCount:e.sales.importFileRowCount,importResult:e.sales.importResult,isProductCSV:!1,csvTemplateString:"OrderID,OrderSource,ProductSKU,ContractSKU,Price,ProductLineItemID,ContractLineItemID,Quantity,FirstName,LastName,Country,Address1,Address2,Province,City,Zip,Email,Phone,OrderDate",importPrompts:{uploadInfo:"Upload a CSV using our template and we'll record your sales",importTitle:"Import Sales",downloadPrompt:"Download the CSV template to ensure your sales are properly recorded.",submitInfo:"Once your file is verified we\u2019ll review the orders and finish the import."}}}),(function(e){return Object(i.b)({_closeUploadModal:rr,_getImportSummary:or,_submitImport:cr},e)}))(Rr),Tr=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handlePageChange=function(t){e.props._setPage(t),e.setState({activePage:t})},e.handleSetSearch=function(t){e.props._setSearch(t.target.value)},e.handleSearchSubmit=function(t){t.preventDefault(),e.handleRefresh(e.props,!0)},e.handleRefresh=function(t,a){e.props._runSearch(t.shopId,t.saleSearch,a?1:t.pageNumber)},e}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.handleRefresh(this.props,!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(""!==e.shopId&&this.props.shopId!==e.shopId){this.props._setSearch("");var t=Object(d.a)(Object(d.a)({},e),{},{saleSearch:""});this.handleRefresh(t,!0)}!1===this.props.refresh&&!0===e.refresh&&(!0===e.preservePage?this.handleRefresh(e,!1):this.handleRefresh(e,!0))}},{key:"render",value:function(){return r.a.createElement("div",{className:"page-container"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | Sales")),r.a.createElement("div",{className:"page-layout"},r.a.createElement("div",{className:"actions-container"},r.a.createElement(ut.j,{id:"import-invoice",position:"right",label:r.a.createElement("div",{className:"actions-container__tooltip__text"},"Import sales data"),hideIndicator:!0},r.a.createElement("div",{onClick:this.props._showImportSalesModal,"data-tip":!0,"data-for":"import-invoice",className:"actions-container__button"},r.a.createElement("img",{className:"actions-container__button__image actions-container__button__image--sales-import",alt:"Import rate sheet",src:"/images/Sales.svg"}),r.a.createElement("span",{className:"actions-container__button__plus"},"+"))),r.a.createElement(ut.j,{id:"export-invoice",position:"right",label:r.a.createElement("div",{className:"actions-container__tooltip__text"},"Export invoice data"),hideIndicator:!0},r.a.createElement("div",{onClick:this.props._showInvoiceExportModal,"data-tip":!0,"data-for":"export-invoice",className:"actions-container__button"},r.a.createElement("img",{className:"actions-container__button__image actions-container__button__image--export",alt:"Export invoice data",src:"/images/download.svg"})))),r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("div",{className:"row contract-sales-title-container"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",null,"Contract Sales"))),r.a.createElement("br",null),r.a.createElement("div",{className:"row sale-pagination-row sale-pagination-row--top"},r.a.createElement("div",{className:"col-5"},r.a.createElement("form",{className:"sales-search-form",onSubmit:this.handleSearchSubmit},r.a.createElement(ut.i,{placeholder:"Search (Name/Phone/Email/Clyde ID)",onChange:this.handleSetSearch,value:this.props.saleSearch,dataTestValue:"salesSearch"}),r.a.createElement("input",{type:"submit",className:"sales-search-form__hidden-input"}))),r.a.createElement("div",{className:"col-5 offset-2"},r.a.createElement(gr.a,{itemClass:"page-item",linkClass:"page-link",activePage:this.props.pageNumber,itemsCountPerPage:25,totalItemsCount:this.props.saleCount,pageRangeDisplay:5,onChange:this.handlePageChange}))),r.a.createElement(vr,{sales:this.props.sales,showConfirmResendEmail:this.props._showConfirmResendEmail}),this.props.showResendEmailModal&&r.a.createElement(Nr,{saleId:this.props.resendContractSaleId}),this.props.invoiceExportModal&&r.a.createElement(Cr,null),this.props.importSalesModal&&r.a.createElement(Pr,null),r.a.createElement("div",{className:"row sale-pagination-row sale-pagination-row--bottom"},r.a.createElement("div",{className:"col-5 offset-7"},r.a.createElement(gr.a,{itemClass:"page-item",linkClass:"page-link",activePage:this.props.pageNumber,itemsCountPerPage:25,totalItemsCount:this.props.saleCount,pageRangeDisplay:5,onChange:this.handlePageChange}))))))}}]),a}(n.Component),wr=Object(l.b)((function(e){return e.sales}),(function(e){return Object(i.b)({_setSearch:er,_setPage:tr,_runSearch:Jn,_showConfirmResendEmail:dr,_showInvoiceExportModal:ar,_showImportSalesModal:nr},e)}))(Tr),jr=function(e){return{type:"SET_SEARCH",payload:e}},kr=function(e){return{type:"SET_PAGE_NUMBER",payload:{pageNumber:e}}},Ar=function(){return{type:"DISMISS_LAUNCH_INSTR",payload:{}}},Dr=function(e,t,a,n,r){return function(o){o({type:"GET_PRODUCTS_PROCESSING",payload:{}}),o(Oe({type:"GET_PRODUCTS_REQ",payload:{types:e,tags:t,manufacturers:a,search:n,pageNumber:r}}))}},Lr=function(e){return{type:"SET_FILTER_TYPES",payload:{types:e.map((function(e){return{name:e.value}}))}}},xr=function(e){return{type:"SET_FILTER_TAGS",payload:{tags:e.map((function(e){return{id:e.value,name:e.label}}))}}},Fr=function(e){return{type:"SET_FILTER_MANUFACTURERS",payload:{manufacturers:e.map((function(e){return{name:e.label}}))}}},Mr=function(){return function(e){e({type:"GET_FILTERS_PROCESSING",payload:{}}),e(Oe({type:"GET_FILTERS_REQ",payload:{}}))}},Ur=function(e,t,a){return function(n){n(Oe({type:"TOGGLE_PRODUCT_ACTIVE_REQ",payload:{productIds:e,productIndex:t,active:a}}))}},Gr=function(e,t,a){return function(n){n(Oe({type:"TOGGLE_PRODUCT_VARIANT_ACTIVE_REQ",payload:{productId:e,productIndex:t,variantIndex:a}}))}},Br=function(){return Oe({type:"GET_LAUNCHING_STATUS_REQ",payload:{}})},Hr=function(){return function(e){e({type:"PRODUCTS_LAUNCH_PROCESSING",payload:{}}),e(Oe({type:"LAUNCH_SHOP_PRODUCTS_REQ",payload:{}}))}},Wr=function(e){return{type:"OPEN_EDIT_PRODUCT_MODAL",payload:{product:e}}},Vr=function(e,t){return function(a){a(Oe({type:"UPDATE_PRODUCT_PARTS_REQ",payload:{parts:e,productId:t}}))}},Kr=function(e,t){return function(a){a(Oe({type:"UPDATE_PRODUCT_REQ",payload:{id:t,product:e}})),a({type:"SAVE_PRODUCT_PROCESSING",payload:{}})}},zr=function(e){return function(t){t(Oe({type:"CREATE_REGISTRABLE_PRODUCT_REQ",payload:{productIds:e}}))}},Yr=function(e){return function(t){t(Oe({type:"DELETE_REGISTRABLE_PRODUCT_REQ",payload:{productIds:e}}))}},Qr=function(){return{type:"OPEN_NEW_PRODUCT_MODAL",payload:{}}},qr=function(e,t){return function(a){a(Oe({type:"CREATE_PRODUCT_REQ",payload:{product:e,parts:t}})),a({type:"SAVE_PRODUCT_PROCESSING",payload:{}})}},$r=function(){return{type:"CLOSE_PRODUCT_MODAL",payload:{}}},Xr=function(){return{type:"OPEN_UPLOAD_MODAL",payload:{}}},Zr=function(e){return function(t){t(Oe({type:"IMPORT_SUMMARY_REQ",payload:{productData:e}})),t({type:"IMPORT_PRODUCTS_PROCESSING",payload:{}})}},Jr=function(e,t,a){return function(n){n(Oe({type:"IMPORT_PRODUCTS_REQ",payload:{updateBySku:e,importFileKey:t,rowCount:a}})),n({type:"IMPORT_PRODUCTS_PROCESSING",payload:{}})}},eo=function(e){return function(t){e&&""!==e&&t(Oe({type:"CANCEL_IMPORT",payload:{importFileKey:e}})),t({type:"CLOSE_UPLOAD_MODAL",payload:{}})}},to=function(){return function(e){e(Oe({type:"GET_SKU_EXPORT_REQ",payload:{}})),e({type:"GET_SKU_EXPORT_PROCESSING",payload:{}})}},ao=function(){return{type:"RESET_EXPORT",payload:{}}},no=function(){return Oe({type:"GET_RATE_SHEET_EXPORT_REQ",payload:{}})},ro=function(){return{type:"TOGGLE_DOWNLOAD_FALSE",payload:{}}},oo=function(e){return function(t){t(Oe({type:"UPDATE_PLATFORM_PRODUCT_REQ",payload:{product:e}})),t({type:"UPDATE_PLATFORM_PRODUCT_PROCESSING",payload:{}})}},co=function(){return{type:"TOGGLE_AUTO_MARGIN"}},lo=function(e){return{type:"SET_CUSTOM_MARGIN",payload:parseInt(e,10)||""}},so=function(e){return{type:"SET_ROUND_TOTAL",payload:e}},io=function(){return Oe({type:"GET_SHOP_SETTINGS_REQ",payload:{}})},mo=function(e,t){var a={autoMargin:e.autoMargin,markupPercentage:e.markupPercentage,roundTotal:e.roundTotal,marginChanged:t};return function(e){e({type:"AUTOPILOT_SAVE_PROCESSING",payload:{}}),e(Oe({type:"UPDATE_SHOP_SETTINGS_REQ",payload:a}))}},uo=function(){return function(e){return e(Oe({type:"GET_LICENSING_INFO_REQ",payload:{}}))}},po=function(e){return function(t){t(Oe({type:"GET_PRODUCT_REGISTRATIONS_EXPORT_REQ",payload:{shopId:e}}))}},_o=function(e){return function(t){t({type:"TOGGLE_REGISTRABLE_PRODUCT_VIEW",payload:{viewRegistrableProducts:e}})}},ho=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).openFileDialog=function(e){e.preventDefault(),document.getElementById("product-image").click()},n.selectFile=function(e){var t=e.target.value.split("\\"),a=t[t.length-1],r=e.target.files;if(FileReader&&r&&r.length){if(!["png","jpg","jpeg","gif"].includes(r[0].type.split("/")[1])||r[0].size>128e3)return void n.setState({imageErrorText:"Please use a png, gif, or jpeg no larger than 128kb."});var o=new FileReader;o.onload=function(){n.setState({validFile:!0,imageErrorText:"",fileData:o.result})},o.readAsDataURL(r[0])}n.setState({fileName:a,imageErrorText:""})},n.resetImage=function(){n.setState({fileData:"",product:Object(d.a)(Object(d.a)({},n.state.product),{},{image:""})})},n.alphabetizeParts=function(e,t){for(var a=0,n=0,r=e.name,o=t.name,c=r.length<o.length?r.length:o.length;0===a&&n<c;){var l=r.toLowerCase().charCodeAt(n)-o.toLowerCase().charCodeAt(n);a=n!==c-1||l?l:r.length-o.length,n+=1}return a},n.handleSubmit=function(){if(n.setState({missingFields:{}}),n.fieldsComplete()&&!0===n.state.formValid){var e=Object(d.a)(Object(d.a)({},n.state.product),{},{price:n.state.product.price,image:n.state.fileData}),t=n.state.parts;if("new"===n.props.productType)n.props._createProduct(e,t);else{var a=n.props.editProduct.ID;n.props._updateProduct(e,a),n.props._updateProductParts(t,a)}}},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState({product:Object(d.a)(Object(d.a)({},n.state.product),{},Object(b.a)({},a,r))},(function(){n.validateField(a,r)}))},n.handlePartChange=function(e){var t=e.target.name,a=e.target.value,r=t.split("-"),o=Object(an.a)(r,2),c=o[0],l=o[1],s=Object(E.a)(n.state.parts);s[c][l]=a,n.setState({parts:s},(function(){n.validatePartField(l,a,t,c)}))},n.handlePartDelete=function(e){var t,a=Object(E.a)(n.state.parts),r=a[e];r.id?(r.active=!1,t=a):t=a.filter((function(t,a){return a!==e}));var o=a.find((function(e){return e.active}));n.setState({hasActivePart:Boolean(o),parts:t&&t.length>1&&"new"!==n.props.productType?t.sort(n.alphabetizeParts):t})},n.handleNewPart=function(){var e={cost:"",name:"",modelNumber:"",active:!0,productId:n.state.product.id},t=[].concat(Object(E.a)(n.state.parts),[e]);n.setState({hasActivePart:!0,parts:t&&t.length>1&&"new"!==n.props.productType?t.sort(n.alphabetizeParts):t})},n.formatPrice=function(e){var t=e.target,a=t.value,r=t.name;if(a&&!Number.isNaN(Number(a))||parseFloat(a,10)){var o="";if(a.includes(".")){var c=a.split("."),l=Object(an.a)(c,2),s=l[0],i=l[1],m=s.length?s:"0",u=i;0===i.length?u="00":1===i.length?u="".concat(i,"0"):i.length>2&&(u=i.slice(0,2)),o="".concat(m,".").concat(u)}else o="".concat(a,".00");if("price"===r)n.setState({product:Object(d.a)(Object(d.a)({},n.state.product),{price:o})});else{var p=r.split("-"),_=Object(an.a)(p,1)[0],h=Object(E.a)(n.state.parts);h[_].cost=o,n.setState({parts:h})}}},n.validatePartField=function(e,t,a,r){var o=n.state.formErrors,c=Object(E.a)(n.state.parts);switch(e){case"modelNumber":c.filter((function(e){return e.modelNumber===t})).length>1?o[a]="A part with this model number already exists":delete o[a];break;case"cost":"0"===t||parseFloat(t,10)?(delete o[a],parseFloat(t,10)<=0&&(c[r].cost="1",n.setState({parts:c}))):o[a]="Invalid cost";break;default:""===t?o[a]="Missing part ".concat(a," field"):delete o[a]}n.setState({formErrors:o,formValid:0===Object.keys(o).length})},n.generateLabelClass=function(e,t){var a;switch(t){case"unique":a=gt()("product-field-label",{"product-field-label--invalid-unique":e});break;default:a=gt()("product-field-label",{"product-field-label--invalid":e})}return a},n.updatePlatformProduct=function(){if(n.fieldsComplete(!0)&&!0===n.state.formValid){var e=n.props,t=e._updatePlatformProduct,a=e._updateProductParts,r=n.state.product.variants[0].ProductID;if(!n.state.product.oemLength)return void n.setState({missingFields:{oemLength:!0}});t(n.state.product),a(n.state.parts,r)}},n.state={formChecked:!1,finishCreate:!1,validFile:!1,fileData:"",imageErrorText:"",product:{name:"",type:"",description:"",manufacturer:"",sku:"",price:"",image:"",oemLength:""},parts:[],deletedParts:[],formErrors:{},formValid:"edit"===n.props.productType,missingFields:{}},n}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.editProduct,a=e.platform,n=t?t.OEMWarrantyLength:"";!t||"Shopify"!==a&&"BigCommerce"!==a||(n=t.Variants[0].OEMWarrantyLength);var r=!1,o=t&&t.Parts?t.Parts.map((function(e){return e.Active&&(r=!0),{id:e.ID,name:e.Name,modelNumber:e.ModelNumber,cost:e.Cost,active:e.Active}})):[];"edit"===this.props.productType&&this.setState({hasActivePart:r,parts:o&&o.length>1?o.sort(this.alphabetizeParts):o,product:Object(d.a)(Object(d.a)({},this.state.product),{},{name:t.Name||"",type:t.Type||"",description:t.Description||"",manufacturer:t.Manufacturer||"",sku:t.SKU||"",price:t.Price||"",oemLength:n,image:t.ImageLink||"",variants:t.Variants||[]})})}},{key:"fieldsComplete",value:function(e){var t=this,a={};return e||Object.keys(this.state.product).forEach((function(e){"description"!==e&&"image"!==e&&"oemLength"!==e&&"manufacturer"!==e&&"variants"!==e&&0===t.state.product[e].trim().length&&(a[e]=!0)})),this.state.parts.forEach((function(e,t){var n=Object.keys(e);e.active&&n.forEach((function(n){var r=e[n],o=0===String(r).trim().length;if("id"!==n&&"modelNumber"!==n&&o){var c="".concat(t,"-").concat(n);a[c]=!0}}))})),!(Object.keys(a).length>0)||(this.setState({missingFields:a}),!1)}},{key:"validateField",value:function(e,t){var a=this.state.formErrors,n={};switch(e){case"description":break;case"price":"0"===t||parseFloat(t,10)?(delete a.price,parseFloat(t,10)<=0&&(n.price="1")):a.price="Invalid price";break;case"oemLength":!t||parseFloat(t,10)||"0"===t?(delete a.oemLength,parseFloat(t,10)<0&&(n.oemLength="")):a.oemLength="Invalid OEM term";break;default:""===t?a[e]="Missing product ".concat(e," field"):delete a[e]}this.setState({formErrors:a,formValid:0===Object.keys(a).length,product:Object(d.a)(Object(d.a)({},this.state.product),n)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.productType,n=t.saveProductProcessing,o=t.exitUpload,c=t._closeProductModal,l=t.platform,s=this.state,i=s.formErrors,m=s.missingFields,d=this.generateLabelClass,u=i,p="Shopify"===l||"BigCommerce"===l,_=p?this.updatePlatformProduct:this.handleSubmit;return r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-container__backdrop"}),r.a.createElement("div",{className:"clyde-modal-content new-product"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{id:"upload-modal",className:"new-product-modal"},this.state.finishCreate?r.a.createElement(ut.n,{onSuccess:o}):r.a.createElement("div",{className:"new-product-form"},r.a.createElement("div",{onClick:c,className:"close-product-modal","data-test":"close"},"\u2715"),"new"===a?r.a.createElement("div",{className:"new-product-header"},r.a.createElement("h2",{className:"new-product-header__prefixed-subtitle"},"After creating a product, Clyde will connect it with contracts shortly."),r.a.createElement("div",{className:"new-product-header__title-container row"},r.a.createElement("h1",{className:"new-product-header__title-container__title col-12"},"Add a product"))):r.a.createElement("div",{className:"new-product-header"},r.a.createElement("div",{className:"new-product-header__title-container row"},r.a.createElement("h1",{className:"new-product-header__title-container__title col-12"},"Edit product"))),r.a.createElement("div",{className:"new-product-content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:d(u.name||m.name),htmlFor:"productName"},"Product name"),r.a.createElement(ut.i,{className:"form-field",name:"name",id:"name",onChange:this.handleChange,value:this.state.product.name,disabled:p}),r.a.createElement("label",{className:d(u.type||m.type),htmlFor:"type"},"Type"),r.a.createElement(ut.i,{className:"form-field",name:"type",id:"type",onChange:this.handleChange,value:this.state.product.type,disabled:p})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:"product-field-label",htmlFor:"product-image"},"Image"),this.state.fileData||this.state.product.image?r.a.createElement("div",{className:"product-image-preview"},r.a.createElement("div",{className:"product-image-preview__reset",onClick:this.resetImage,"data-test":"removeImage"},"\u2715"),r.a.createElement("img",{className:"product-image-preview__image",alt:"uploaded",src:this.state.fileData||this.state.product.image})):r.a.createElement("div",null,r.a.createElement("div",{className:"product-image-upload-container","data-test":"imageUploadContainer",onClick:this.openFileDialog},r.a.createElement("div",{className:"product-image-upload"},r.a.createElement("img",{className:"product-image-upload__image",alt:"upload",src:"/images/upload.png"})),r.a.createElement("div",{className:"product-image-error"},this.state.imageErrorText)),r.a.createElement("div",{className:"hidden-input-container"},r.a.createElement("input",{id:"product-image",type:"file",onChange:this.selectFile,disabled:p})))),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:"product-field-label",htmlFor:"description"},"Description"),r.a.createElement(ut.i,{className:"form-field",name:"description",id:"description",onChange:this.handleChange,value:this.state.product.description,disabled:p})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:"product-field-label",htmlFor:"manufacturer"},"Manufacturer"),r.a.createElement(ut.i,{className:"form-field",name:"manufacturer",id:"manufacturer",onChange:this.handleChange,value:this.state.product.manufacturer,disabled:p})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:d(u.sku||m.sku),htmlFor:"sku"},"SKU",r.a.createElement("span",{className:"sku-tooltip"},r.a.createElement(ut.j,{position:"right",label:r.a.createElement("div",{className:"tooltip-text"},"This SKU must be unique. You'll use the value here to record contract sales for this product."),hideIndicator:!0},r.a.createElement("img",{"data-tip":!0,"data-for":"sku-info",alt:"sku",src:"/images/info-icon.svg"})))),r.a.createElement(ut.i,{className:"form-field",name:"sku",id:"sku",onChange:this.handleChange,value:this.state.product.sku,disabled:p})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:d(u.price||m.price),htmlFor:"price"},"Price (USD)"),r.a.createElement(ut.i,{className:"form-field",name:"price",id:"price",onChange:this.handleChange,onBlur:this.formatPrice,value:this.state.product.price,disabled:p})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:d(u.oemLength||m.oemLength),htmlFor:"oemLength"},"OEM Warranty Term (months)"," ",p&&"for all variants"),r.a.createElement(ut.i,{className:"form-field",name:"oemLength",id:"oemLength",onChange:this.handleChange,value:this.state.product.oemLength,typeNumber:!0}))),r.a.createElement("div",{className:"new-product-parts"},this.state.parts&&this.state.parts.length&&this.state.hasActivePart?this.state.parts.map((function(t,a){return t.active?r.a.createElement("div",{key:"part-".concat(a),"data-test":"part-".concat(a),className:"new-product-parts__list row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("label",{className:d(u["".concat(a,"-name")]||m["".concat(a,"-name")])},"Part Name"),r.a.createElement(ut.i,{className:"form-field",name:"".concat(a,"-name"),id:"".concat(a,"-name"),onChange:e.handlePartChange,value:e.state.parts[a].name,dataTestValue:"partName"})),r.a.createElement("div",{className:"col-3"},r.a.createElement("label",{className:d(u["".concat(a,"-modelNumber")],"unique")},"Model Number"),r.a.createElement(ut.i,{className:"form-field",name:"".concat(a,"-modelNumber"),id:"".concat(a,"-modelNumber"),onChange:e.handlePartChange,value:e.state.parts[a].modelNumber,dataTestValue:"partModelNumber"})),r.a.createElement("div",{className:"col-3"},r.a.createElement("label",{className:d(u["".concat(a,"-cost")]||m["".concat(a,"-cost")])},"Cost (USD)"),r.a.createElement(ut.i,{className:"form-field",name:"".concat(a,"-cost"),id:"".concat(a,"-cost"),onChange:e.handlePartChange,onBlur:e.formatPrice,value:e.state.parts[a].cost,dataTestValue:"cost"})),r.a.createElement("div",{className:"col-2"},r.a.createElement("div",{className:"new-product-parts__controls"},r.a.createElement("div",{onClick:function(){return e.handlePartDelete(a)},"data-test":"removeAdditionalPart",className:"circle minus",role:"button"}),r.a.createElement("div",{onClick:e.handleNewPart,"data-test":"addAdditionalPart",className:"circle plus",role:"button"})))):null})):r.a.createElement("div",{className:"new-product-parts__add"},r.a.createElement("p",{className:"new-product-parts__add__text"},"Add New Part"),r.a.createElement("div",{onClick:this.handleNewPart,"data-test":"addNewPart",className:"circle plus",role:"button"}))),r.a.createElement("div",{className:"new-product-footer"},r.a.createElement(ut.a,{id:"products-save-button",className:"product-save-button",onClick:_,processing:n,successText:"Done",disabled:!this.state.formValid,"data-test":"save"},"Save"))))))))}}]),a}(n.Component),Eo=Object(l.b)((function(e){return{saveProductProcessing:e.products.saveProductProcessing,editProduct:e.products.editProduct,productType:e.products.productType,platform:e.auth.platform,parts:e.products.parts}}),(function(e){return Object(i.b)({_closeProductModal:$r,_createProduct:qr,_updateProduct:Kr,_updatePlatformProduct:oo,_updateProductParts:Vr},e)}))(ho),go=Object(l.b)((function(e){return{importProcessing:e.products.importProductsProcessing,importStep:e.products.importStep,importSummary:e.products.importSummary,importFileKey:e.products.importFileKey,importFileRowCount:e.products.importFileRowCount,importResult:e.products.importResult,isProductCSV:!0,csvTemplateString:"Name,Type,Manufacturer,SKU,Barcode,Price,ImageLink,Description,OEMWarrantyLength,Attributes",importPrompts:{uploadInfo:"Upload a CSV using our template and we\u2019ll match to contracts",importTitle:"Import Products",downloadPrompt:"Download our template to ensure your products get matched properly.",submitInfo:"Once your file is verified we\u2019ll review the products and finish the import."}}}),(function(e){return Object(i.b)({_closeUploadModal:eo,_getImportSummary:Zr,_submitImport:Jr},e)}))(Rr),fo=function(e){return{type:"START_SALE",payload:{product:e}}},bo=function(e){return{type:"SELECT_VARIANT",payload:{variant:e}}},vo=function(e){return{type:"SELECT_CONTRACT",payload:{contract:e}}},yo=function(e,t,a,n,r,o,c,l,s){return function(i){i(Oe({type:"SUBMIT_SALE_REQ",payload:{productId:e,contractId:t,productPrice:parseFloat(a),contractBackendFee:n,contractPlatformFee:r,contractBaseCost:o,customerInfo:c,customerCost:l,quantity:s}})),i({type:"SUBMIT_SALE_PROCESSING",payload:{}})}},No=function(){return{type:"EXIT_SALE",payload:{}}},Oo=function(e){return r.a.createElement("div",null,e.product.Variants.length>1?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"sale-modal-step col-12"},e.step,". Choose variant:"),e.product.Variants.map((function(t,a){return r.a.createElement("span",{key:"variant-".concat(a)},t.Contracts.length>0&&r.a.createElement("div",{className:gt()("select-variant-tile",{"select-variant-tile--active":e.activeVariant&&t.ProductID===e.activeVariant.ProductID}),onClick:function(){return e.select(t)}},t.VariantName))}))):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"sale-modal-step col-12"},"1. Choose variant:"),r.a.createElement("div",{className:"select-variant-tile select-variant-tile--active"},"Default")))},Co=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"sale-modal-step col-12"},e.step,". Choose contract term:"),e.variant.Contracts.map((function(t,a){return r.a.createElement("div",{className:gt()("col-3 select-contract-tile",{"select-contract-tile--active":e.activeContract&&e.activeContract.ID===t.ID}),key:"contract-".concat(a),onClick:function(){return e.select(t)}},"".concat(t.Term," year"),r.a.createElement("span",{className:"font-10"}," ($",(t.BaseCost+t.BackendFee+t.PlatformFee+t.Markup).toFixed(2),")"))})),r.a.createElement("div",{className:"select-contract-info col-12"},r.a.createElement("a",{className:"select-contract-info__category-link",href:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?pid=").concat(e.variant.ProductID,"&cid=").concat(e.variant.Contracts[0].ID),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",null,e.variant.Contracts[0].Category)))))},So=a(204),Io=a.n(So),Ro={us:["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","AS","GU","MP","PR","UM","VI"],ca:["AB","BC","MB","NB","NL","NT","NS","NU","ON","PE","QC","SK","YT"]},Po=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).checkAgree=function(){n.setState({formChecked:!n.state.formChecked})},n.handleQuantityChange=function(e){var t=Math.round(Math.abs(e.target.value));n.setState({quantity:t},(function(){n.validateField("quantity",t)}))},n.handleCostChange=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(b.a)({},t,a),(function(){n.validateField(t,a)}))},n.fixCost=function(e){var t=e.target.name,a=e.target.value;parseFloat(a)?n.setState(Object(b.a)({},t,parseFloat(a).toFixed(2))):n.setState(Object(b.a)({},t,(n.props.contract.Markup+n.props.contract.BackendFee+n.props.contract.PlatformFee+n.props.contract.BaseCost).toFixed(2)))},n.handleChange=function(e){var t=e.target.name,a=e.target.value;n.setState({customer:Object(d.a)(Object(d.a)({},n.state.customer),{},Object(b.a)({},t,a))},(function(){n.validateField(t,a)}))},n.handleProvinceChange=function(e){var t=e?e.target.value:"";n.setState({customer:Object(d.a)(Object(d.a)({},n.state.customer),{},{province:t})},(function(){n.validateField("province",t)}))},n.checkLicense=function(e){var t=n.props.licensingInfo,a=(new Date).setHours(0,0,0,0),r=new Date(t["".concat(e.toLowerCase(),"DealerIdIssuedDate")]).setHours(0,0,0,0);if("CA"===e){var o=new Date(t.caDealerIDExpirationDate).setHours(0,0,0,0);return t.caDealerId&&a>=r&&o>a&&!!r}return t.flDealerId&&a>=r&&r},n.validateField=function(e,t){var a=n.state.formErrors;switch(e){case"email":""===t||t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)?delete a[e]:a[e]="Invalid email";break;case"phone":10===t.replace(/_|-/g,"").length||0===t.replace(/_|-/g,"").length?delete a[e]:a[e]="Invalid phone number format.";break;case"zip":""===t||t.match(/^\d{5}/i)?delete a[e]:a[e]="Invalid zip code.";break;case"quantity":parseInt(t,10)?delete a[e]:a[e]="Bad quantity";break;case"customerCost":parseFloat(t,10)>=Math.round(100*(n.props.contract.BackendFee+n.props.contract.PlatformFee+n.props.contract.BaseCost))/100?delete a[e]:a[e]="Invalid customer cost.";break;case"country":"US"===t?delete a[e]:a[e]="Invalid address - country";break;case"province":if("Asurion"!==n.props.contract.Underwriter||"CA"!==t&&"FL"!==t)delete a[e];else n.checkLicense(t)?delete a[e]:a[e]="Invalid address - missing license"}n.setState({formErrors:a,formValid:0===Object.keys(a).length})},n.fieldsComplete=function(){var e={};return Object.keys(n.state.customer).forEach((function(t){"phone"!==t&&"email"!==t&&"serialNumber"!==t&&"address2"!==t&&0===n.state.customer[t].trim().length&&(e[t]=!0)})),0===n.state.customer.email.trim().length&&0===n.state.customer.phone.trim().length&&(e.phone=!0,e.email=!0),!0===n.props.contract.RequireSerialNumber&&(0===n.state.customer.phone.replace(/_|-/g,"").length&&(e.phone=!0),0===n.state.customer.email.trim().length&&(e.email=!0),0===n.state.customer.serialNumber.trim().length&&(e.serialNumber=!0)),!(Object.keys(e).length>0)||(n.setState({missingFields:e}),!1)},n.handleSubmit=function(){n.setState({missingFields:{}});var e=n.props.variant.ProductID,t=n.props.variant.Price,a=n.props.contract.ID,r=n.props.contract.BackendFee,o=n.props.contract.PlatformFee,c=n.props.contract.BaseCost;n.fieldsComplete()&&!0===n.state.formValid&&n.props._submitSale(e,a,t,r,o,c,n.state.customer,parseFloat(n.state.customerCost,10),n.state.quantity)},n.generateLabelClass=function(e){return gt()("sale-customer-label",{"sale-customer-label--invalid":e})},n.state={customer:{email:"",firstName:"",lastName:"",phone:"",address1:"",address2:"",province:"",city:"",zip:"",serialNumber:"",country:n.props.contract.Jurisdiction},quantity:1,customerCost:(n.props.contract.Markup+n.props.contract.BackendFee+n.props.contract.PlatformFee+n.props.contract.BaseCost).toFixed(2),country:"US",formErrors:{},missingFields:{},formValid:!1,formChecked:!1},n.stateCodes=Ro[n.props.contract.Jurisdiction.toLowerCase()],n}return Object(ke.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.contract.contractId&&this.props.contract.contractId!==e.contract.contractId&&this.setState({customerCost:(e.contract.Markup+e.contract.BackendFee+e.contract.PlatformFee+e.contract.BaseCost).toFixed(2)})}},{key:"render",value:function(){var e=this.state,t=e.quantity,a=e.customerCost,n=e.formErrors,o=e.missingFields,c=e.customer,l=e.formChecked,s=e.submitSaleProcessing,i=this.props,m=i.step,d=i.contract,u=this.generateLabelClass,p=d.Jurisdiction,_="".concat(void 0===p?"US":p," only"),h="$".concat((t*a).toFixed(2)," has been collected for this sale."),E=n;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"sale-modal-step col-12"},m,". Enter customer info:"),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(E.email||o.email),htmlFor:"customer-email"},"Customer email"),r.a.createElement(ut.i,{id:"customer-email",placeholder:"example@joinclyde.com",onChange:this.handleChange,name:"email",value:c.email,className:"form-field"})),d&&!1===d.RequireSerialNumber?r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(E.phone||o.phone),htmlFor:"customer-phone"},"Customer Phone"),r.a.createElement(Io.a,{mask:"999-999-9999",id:"customer-phone",placeholder:"###-###-####",onChange:this.handleChange,name:"phone",value:c.phone,type:"text",className:"form-field"})):r.a.createElement("div",{className:"col-6"}),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(E.firstName||o.firstName),htmlFor:"customer-firstName"},"First name"),r.a.createElement(ut.i,{id:"customer-firstName",onChange:this.handleChange,name:"firstName",value:c.firstName,className:"form-field"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(E.lastName||o.lastName),htmlFor:"customer-lastName"},"Last name"),r.a.createElement(ut.i,{id:"customer-lastName",onChange:this.handleChange,name:"lastName",value:c.lastName,className:"form-field"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(E.address1||o.address1),htmlFor:"customer-address1"},"Address 1"),r.a.createElement(ut.i,{id:"customer-address1",onChange:this.handleChange,name:"address1",value:c.address1,className:"form-field"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(E.address2||o.address2),htmlFor:"customer-address2"},"Address 2"),r.a.createElement(ut.i,{id:"customer-address2",onChange:this.handleChange,name:"address2",value:c.address2,className:"form-field"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(E.city||o.city),htmlFor:"customer-city"},"City"),r.a.createElement(ut.i,{id:"customer-city",onChange:this.handleChange,name:"city",value:c.city,className:"form-field"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(E.province||o.province),htmlFor:"customer-province"},"State"),r.a.createElement(ut.g,{id:"customer-province",className:"clyde-select customer",style:{height:"38px"},value:c.province,options:this.stateCodes.map((function(e){return{text:e,value:e}})),overflow:!0,onChange:this.handleProvinceChange}),E.province?r.a.createElement("span",{className:"sale-customer-field-error"},"Invalid address - missing/expired license"):null),r.a.createElement("div",{className:"col-3"},r.a.createElement("label",{className:u(E.zip||o.zip),htmlFor:"customer-zip"},"Zip Code"),r.a.createElement(ut.i,{id:"customer-zip",maxLength:"5",placeholder:"#####",onChange:this.handleChange,name:"zip",value:c.zip,className:"form-field"})),r.a.createElement("div",{className:"col-3"},r.a.createElement("label",{className:u(E.country||o.country),htmlFor:"customer-country"},"Country"),r.a.createElement(ut.i,{id:"customer-country",name:"country",value:_,className:"form-field",onChange:this.handleChange,disabled:!0}),E.country?r.a.createElement("span",{className:"sale-customer-field-error"},"Invalid address - country"):null),d&&!1===d.RequireSerialNumber?r.a.createElement("div",{className:"col-3"},r.a.createElement("label",{className:u(E.quantity||o.quantity),htmlFor:"contract-quantity"},"Contract Quantity"),r.a.createElement(ut.i,{id:"contract-quantity",name:"quantity",onChange:this.handleQuantityChange,value:t,className:"form-field",typeNumber:!0})):null,r.a.createElement("div",{className:"col-3 row mb-0"},r.a.createElement("label",{className:u(E.customerCost||o.customerCost),htmlFor:"customer-cost"},"Cost per contract (USD)"),r.a.createElement("div",{className:"mt-1"},r.a.createElement(ut.j,{label:r.a.createElement("div",{className:"tooltip-text"},"This value represents how much the customer purchased each contract for. The value here must be greater than or equal to the premium we have to collect for each contract (".concat((this.props.contract.BaseCost+this.props.contract.BackendFee+this.props.contract.PlatformFee).toFixed(2),")."))})),r.a.createElement("input",{id:"customer-cost",name:"customerCost",type:"number",onBlur:this.fixCost,onChange:this.handleCostChange,value:a,className:"form-field mb-2"})),d&&!0===d.RequireSerialNumber&&r.a.createElement("span",{className:"row col-12"},r.a.createElement("div",{className:"sale-modal-step col-12 row "},"Additional information",r.a.createElement("div",{className:"ml-1"},r.a.createElement(ut.j,{label:r.a.createElement("div",{className:"tooltip-text"},"This contract requires the customer's phone number and product serial number in order to be fulfilled. If this info isn't available, we'll email the customer prompting them to record it on our website once their product arrives.")}))),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(o.serialNumber),htmlFor:"customer-serial-number"},"Product serial number"),r.a.createElement(ut.i,{id:"customer-serial-number",name:"serialNumber",onChange:this.handleChange,className:"form-field"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:u(E.phone||o.phone),htmlFor:"customer-phone"},"Phone"),r.a.createElement(Io.a,{mask:"999-999-9999",id:"customer-phone",placeholder:"###-###-####",onChange:this.handleChange,name:"phone",value:this.state.customer.phone,type:"text",className:"form-field"}))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"col-9 offset-3"},r.a.createElement("div",{className:"sale-checkbox-container"},!0===l?r.a.createElement("div",{onClick:this.checkAgree,className:"sale-checkbox sale-checkbox--checked"},r.a.createElement("span",null,"\u2714")):r.a.createElement("div",{onClick:this.checkAgree,className:"sale-checkbox"}),d&&r.a.createElement("div",{onClick:this.checkAgree,className:"sale-checkbox-text"},h))),r.a.createElement("div",{className:"col-6 offset-3"},r.a.createElement(ut.a,{id:"products-save-button",className:l?"finish-sale":"finish-sale finish-sale--disabled",onClick:this.handleSubmit,processing:s,disabled:!1===l,successText:"Done"},"Record Sale"))))}}]),a}(n.Component),To=Object(l.b)((function(e){return Object(d.a)(Object(d.a)({},e.contractSale),{},{licensingInfo:e.license.licensingInfo})}),(function(e){return Object(i.b)({_submitSale:yo},e)}))(Po),wo=["Clyde","Magento","SFCC"],jo=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.product.Variants&&1===this.props.product.Variants.length&&this.props._selectVariant(this.props.product.Variants[0]),this.props.product&&wo.indexOf(this.props.platform)>=0&&(this.props.product.ProductID=this.props.product.ID,this.props._selectVariant(this.props.product))}},{key:"render",value:function(){var e="Clyde"===this.props.platform?0:1,t=gt()("sale-modal",{"sale-modal--finished":"finish"===this.props.modalPage}),a=-1===wo.indexOf(this.props.platform);return r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-container__backdrop"}),this.props.billingReady?r.a.createElement("div",{className:t},r.a.createElement("div",{className:"sale-modal__content"},"finish"!==this.props.modalPage?r.a.createElement("div",null,r.a.createElement("div",{onClick:this.props._exitSale,className:"close-sale-modal"},"\u2715"),r.a.createElement("div",null,r.a.createElement("h2",null,this.props.product.Name),r.a.createElement("h1",null,"Record a sale:"),a&&r.a.createElement(Oo,{step:e,product:this.props.product,select:this.props._selectVariant,activeVariant:this.props.variant}),r.a.createElement(fr.UnmountClosed,{springConfig:{stiffness:300,damping:30},isOpened:null!==this.props.variant},r.a.createElement(Co,{step:e+1,variant:this.props.variant,select:this.props._selectContract,activeContract:this.props.contract,shopName:this.props.displayName,branded:this.props.shopBranded})),r.a.createElement(fr.UnmountClosed,{springConfig:{stiffness:300,damping:30},isOpened:void 0!==this.props.contract.ID},r.a.createElement(To,{step:e+2,platform:this.props.platform})))):r.a.createElement(ut.n,{text:"Sale recorded! ",onSuccess:this.props._exitSale}))):r.a.createElement("div",{className:"update-billing-modal"},r.a.createElement("div",{className:"update-billing-modal__content"},r.a.createElement("div",null,r.a.createElement("div",null,"You need to set up billing before you're able to record sales!"),r.a.createElement("div",{onClick:this.props.updateBilling,className:"col-8 offset-2 update-billing-modal__content__button"},"Update billing info")))))}}]),a}(n.Component),ko=Object(l.b)((function(e){return Object(d.a)(Object(d.a)({},e.contractSale),{},{displayName:e.customize.displayName,shopBranded:e.customize.branded})}),(function(e){return Object(i.b)({_exitSale:No,_selectVariant:bo,_selectContract:vo},e)}))(jo),Ao=function(e){return function(t){t({type:"GET_TAXONOMY_INFO_PROCESSING",payload:{}}),t(Oe({type:"GET_TAXONOMY_INFO_REQ",payload:{pageNumber:e}}))}},Do=a(93),Lo=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={typeFiltersValue:[],tagFiltersValue:[],manufacturerFiltersValue:[],downloadSkus:!1},e.handleTypeFilterChange=function(t){e.setState({typeFiltersValue:t}),e.props._setFilterTypes(t)},e.handleTagFilterChange=function(t){e.setState({tagFiltersValue:t}),e.props._setFilterTags(t)},e.handleManufacturerFilterChange=function(t){e.setState({manufacturerFiltersValue:t}),e.props._setFilterManufacturers(t)},e.handleSetSearch=function(t){e.props._setSearch(t.target.value)},e.handleSearchSubmit=function(t){t.preventDefault(),e.handleRefresh(e.props,!0)},e.handleRefresh=function(t,a){"products"===e.props.view?(e.props._runSearch(t.filterTypes,t.filterTags,t.filterManufacturers,t.productSearch,a?1:t.pageNumber),e.props._getProductFilters()):e.props._getTaxonomyInfo(a?1:t.pageNumber)},e.handleToggle=function(){"products"===e.props.view?e.props._getTaxonomyInfo(e.props.pageNumber):e.handleRefresh(e.props,!0),e.props._toggleView()},e}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.handleRefresh(this.props,!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;!1===this.props.refresh&&!0===e.refresh&&(!0===e.preservePage?this.handleRefresh(e,!1):this.handleRefresh(e,!0)),e.skuExport&&e.skuExport.length>0&&this.setState({downloadSkus:!0},(function(){t.props._resetExport(),t.setState({downloadSkus:!1})}))}},{key:"render",value:function(){var e=this.props,t=e.view,a=e.productTypes,n=e.productTags,o=e.productManufacturers,c=e.productSearch,l=a.map((function(e){return{label:e.name,value:e.name}})),s=n.map((function(e){return{label:e.name,value:e.id}})),i=o.map((function(e){return{label:e.name,value:e.name}})),m="products"===t;return r.a.createElement("div",{className:"product-filters-row row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 product-filter--padding-override"},r.a.createElement("div",{className:"product-filter product-filter--search"},r.a.createElement("form",{onSubmit:this.handleSearchSubmit},r.a.createElement(ut.i,{placeholder:"Product Name or SKU",className:"product-search form-field",onChange:this.handleSetSearch,value:c,disabled:!m,dataTestValue:"productSearch"}),r.a.createElement("input",{type:"submit",className:"hidden-input"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3 product-filter--padding-override"},r.a.createElement("div",{className:"product-filter"},r.a.createElement(ut.e,{direction:"row",placeholder:"Types",value:this.state.typeFiltersValue,options:l,onChange:this.handleTypeFilterChange,disabled:!m}))),r.a.createElement("div",{className:"col-3 product-filter--padding-override"},r.a.createElement("div",{className:"product-filter"},r.a.createElement(ut.e,{direction:"row",placeholder:"Manufacturer",value:this.state.manufacturerFiltersValue,options:i,onChange:this.handleManufacturerFilterChange,disabled:!m}))),r.a.createElement("div",{className:"col-3 product-filter--padding-override"},r.a.createElement("div",{className:"product-filter"},"Clyde"!==this.props.platform?r.a.createElement(ut.e,{direction:"row",placeholder:"Tags",style:{height:"38px"},value:this.state.tagFiltersValue,closeOnSelect:!1,multi:!0,options:s,removeSelected:!1,onChange:this.handleTagFilterChange}):r.a.createElement("div",{className:"product-filter__export",onClick:this.props._getSkuExport},"Export SKUs",this.state.downloadSkus&&r.a.createElement(Do.CSVDownload,{target:"_parent",filename:"clyde_skus.csv",data:this.props.skuExport})))),r.a.createElement("div",{className:"col-2 product-filter--padding-override"},r.a.createElement("div",{className:"product-filter"},this.props.hasTaxonomyItems&&r.a.createElement("div",{className:"product-filter__export",onClick:this.handleToggle},"View ",m?"Taxons":"Products"))))))}}]),a}(n.Component),xo=Object(l.b)((function(e){return{productTypes:e.products.productTypes,filterTypes:e.products.filterTypes,productTags:e.products.productTags,filterTags:e.products.filterTags,productManufacturers:e.products.productManufacturers,filterManufacturers:e.products.filterManufacturers,productSearch:e.products.productSearch,pageNumber:e.products.pageNumber,hasTaxonomyItems:e.products.taxonomyCount>0,skuExport:e.products.skuExport,exportReady:e.products.exportReady,getProductFiltersProcessing:e.products.getProductFiltersProcessing,refresh:e.products.refresh,preservePage:e.products.preservePage}}),(function(e){return Object(i.b)({_getProductFilters:Mr,_setFilterTags:xr,_setFilterTypes:Lr,_setFilterManufacturers:Fr,_setSearch:jr,_runSearch:Dr,_getSkuExport:to,_resetExport:ao,_getTaxonomyInfo:Ao},e)}))(Lo),Fo=a(33),Mo=a.n(Fo);var Uo,Go,Bo,Ho=Object(l.b)(null,(function(e){return Object(i.b)({_toggleProduct:Ur},e)}))((function(e){var t=e.productIds,a=e.index,n=e.active,o=e.reviewed,c=e.noMatch,l=e._toggleProduct,s=function(){l(t,a,n)},i={transition:"left 200ms ease-in-out"},m={entering:{left:"25px"},entered:{left:"25px"},exiting:{left:"4px"},exited:{left:"4px"}};if(o&&!c){var u="product-switch--".concat(n);return r.a.createElement(Ht.a,{in:"off"!==n,timeout:200},(function(e){return r.a.createElement("div",{onClick:s,className:"product-switch ".concat(u)},r.a.createElement("div",{className:"product-switch__contents",style:Object(d.a)(Object(d.a)({},i),m[e])},r.a.createElement("span",{className:"product-switch__contents__on"},"ON"),r.a.createElement("span",{className:"product-switch__contents__off"},"OFF")))}))}return o&&c?r.a.createElement("div",{className:"product-no-action product-no-action--red"},"..."):r.a.createElement("div",{className:"product-no-action product-no-action--green"},"...")})),Wo=Object(l.b)(null,(function(e){return Object(i.b)({_toggleVariant:Gr},e)}))((function(e){var t=e.reviewed,a=e.noMatch,n=e.productIndex,o=e.productId,c=e.variantIndex,l=e._toggleVariant,s=function(){l(o,n,c)},i={transition:"left 200ms ease-in-out"},m={entering:{left:"18px"},entered:{left:"18px"},exiting:{left:"4px"},exited:{left:"4px"}};return r.a.createElement("div",null,t&&!a&&r.a.createElement(Ht.a,{in:e.on,timeout:200},(function(t){return r.a.createElement("div",{onClick:s,className:e.on?"toggle-variant toggle-variant--on":"toggle-variant toggle-variant--off"},r.a.createElement("div",{className:"toggle-variant__dot",style:Object(d.a)(Object(d.a)({},i),m[t])}))})))})),Vo=function(e){var t,a=e.variant,o=e.status,c=e.variantIndex,l=e.productIndex,s=e.selectRegistrable,i=e.toggleRegistrable,m=e.onlyIncludeRegistrableProducts,d=Object(n.useState)(!1),u=Object(an.a)(d,2),p=u[0],_=u[1];return"matched"===o?t="Contracts: ".concat(a.Contracts.length):"no-match"===o?t="No contract match":"pending"===o&&(t="Contracts pending"),r.a.createElement("div",null,r.a.createElement("div",{className:"row variant-row ml-5"},r.a.createElement("div",{className:"col-10 col-md-6 offset-1 variant-row__name-section"},s?r.a.createElement(ut.b,{backgroundColor:"clydeBlack",className:"product-variant__registrable-products-checkbox",checked:a.RegistrableProduct||!m,disabled:!m,onChange:function(){return i(a.ProductID,a.RegistrableProduct)},name:"selectRegistrableVariant"}):null,r.a.createElement("div",null,s?null:"".concat(c+1,". "),a.VariantName.length>30?"".concat(a.VariantName.slice(0,30),"..."):a.VariantName," - $".concat(a.Price))),r.a.createElement("div",{onClick:a.Contracts.length>0&&"matched"===o?function(){_(!p)}:null,className:gt()("expand-contracts-text col-2 ml-5",{"expand-contracts-text--matched":a.Contracts.length>0&&"matched"===o})},t,"matched"===o&&r.a.createElement("img",{alt:"",id:"variant-contracts-toggle-".concat(a.ProductID),className:"expand-contracts-caret expand-contracts-caret--".concat(p?"down":"right"),src:"/images/caret.svg"})),r.a.createElement("div",{className:" col-2 variant-switch-container ml-2"},"matched"===o&&r.a.createElement(Wo,{productId:a.ProductID,productIndex:l,variantIndex:c,on:a.Active,reviewed:a.Reviewed,noMatch:"no-match"===o}))),a.Contracts.length>0&&"matched"===o&&r.a.createElement(fr.UnmountClosed,{springConfig:{stiffness:300,damping:30},className:"contracts-collapse-container",isOpened:p},r.a.createElement("div",{className:"variant-contracts-list"},a.Contracts.map((function(e){var t=e.BaseCost+e.BackendFee+e.PlatformFee;return r.a.createElement("div",{key:e.ID,className:"row variant-contract ml-3"},r.a.createElement("a",{className:"col-3 ml-5 variant-contract__name",href:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?pid=").concat(e.ProductID,"&cid=").concat(e.ID),target:"_blank",rel:"noopener noreferrer"},"".concat(e.Term," year ").concat(e.Category)),r.a.createElement("div",{className:"col-3"},"Merchant Cost: $",t.toFixed(2)),r.a.createElement("div",{className:"col-2"},"Markup: $",e.Markup,e.FixedMarkup&&r.a.createElement("div",{className:"variant-contract__tooltip"},r.a.createElement(ut.j,{label:r.a.createElement("div",{className:"tooltip-text"},"Your markup settings cannot be applied to this contract type."),hideIndicator:!0},r.a.createElement("img",{"data-tip":!0,"data-for":"contract-".concat(e.ID),alt:"info",className:"variant-contract__tooltip__icon",src:"/images/info-icon.svg"})))),r.a.createElement("div",{className:"col-2"},"Total: $",(t+e.Markup).toFixed(2)))})))))},Ko=function(e){var t=e.product,a=e.roundTotal,o=e.margin,c=e.displayName,l=e.shopBranded,s=e._startRecordSale,i=e._editProduct,m=e.selectRegistrable,d=e._createRegistrableProduct,u=e._deleteRegistrableProduct,p=e.onlyIncludeRegistrableProducts,_=Object(n.useState)(!1),h=Object(an.a)(_,2),E=h[0],g=h[1],f=t.Reviewed?"matched":"pending";"matched"===f&&(!t.Variants.some((function(e){return e.ContractCount>0}))&&(f="no-match"));var b=function(e,a){var n=[];if(e)n.push(e),a?u(n):d(n);else{var r,o=Object(ne.a)(t.Variants);try{for(o.s();!(r=o.n()).done;){var c=r.value;c.RegistrableProduct===t.RegistrableProduct&&n.push(c.ProductID)}}catch(l){o.e(l)}finally{o.f()}t.RegistrableProduct?u(n):d(n)}};return r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row product-tile"},r.a.createElement("div",{className:"col-7 product-tile__name-section"},m?r.a.createElement(ut.b,{backgroundColor:"clydeBlack",className:"product-view__registrable-products-checkbox",checked:t.RegistrableProduct||!p,onChange:function(){return b()},disabled:!p}):r.a.createElement("img",{onClick:function(){i(t)},alt:"edit product",className:"name-section__edit",src:"/images/edit.svg"}),r.a.createElement(Mo.a,{alt:"product",className:"name-section__thumb",src:[t.ImageLink,"/images/default-image.svg"]}),r.a.createElement("div",{className:"name-section__name"},t.Name)),r.a.createElement("div",{className:"col-lg-3 col-2 product-tile__record-sale-section"},"matched"===f&&r.a.createElement("div",{onClick:function(){s(t)},className:"record-sale-button"},"Record Sale")),r.a.createElement("div",{className:"col-lg-2 col-md-4 col-5 product-tile__expand-section"},r.a.createElement("div",{className:"expand-section__container",onClick:function(){g(!E)}},r.a.createElement("img",{alt:"",id:"product-variants-toggle-".concat(t.Index),className:"product-tile__variants-caret product-tile__variants-caret--".concat(E?"down":"right"),src:"/images/caret.svg"})),r.a.createElement(Ho,{productIds:t.Variants.map((function(e){return e.ProductID})),active:t.Active,reviewed:t.Reviewed,noMatch:"no-match"===f,index:t.Index})),r.a.createElement(fr.Collapse,{springConfig:{stiffness:300,damping:30},hasNestedCollapse:!0,className:"variants-container col-12",isOpened:E},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 list-view-variants"},t.Variants.map((function(e,n){return r.a.createElement(Vo,{key:e.ProductID,productIndex:t.Index,variantIndex:n,roundTotal:a,margin:o,variant:e,status:f,shopName:c,branded:l,selectRegistrable:m,toggleRegistrable:b,onlyIncludeRegistrableProducts:p})})))))))},zo=Object(l.b)(null,(function(e){return Object(i.b)({_toggleOnlyIncludeRegistrableProducts:ga},e)}))((function(e){var t=e.onlyIncludeRegistrableProducts,a=e._toggleOnlyIncludeRegistrableProducts,n=e.title,o=function(){return a(!t)},c={transition:"left 200ms ease-in-out"},l={entering:{left:"33px"},entered:{left:"33px"},exiting:{left:"2px"},exited:{left:"2px"}};return r.a.createElement("div",{className:"registrable-product-switch"},r.a.createElement("div",{className:"registrable-product-switch-title"},n),r.a.createElement(Ht.a,{in:e.on,timeout:200},(function(t){return r.a.createElement("div",{onClick:o,className:e.on?"toggle-onlyRegistrable toggle-onlyRegistrable--on":"toggle-onlyRegistrable toggle-onlyRegistrable--off"},r.a.createElement("div",{className:"toggle-onlyRegistrable__dot",style:Object(d.a)(Object(d.a)({},c),l[t])}))})))})),Yo=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).handlePageChange=function(e){n.props._setPage(e),n.setState({activePage:e})},n.toggleAllRegistrable=function(){var e,t=[],a=Object(ne.a)(n.props.products);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(!r.ID||r.ProductID){var o,c=Object(ne.a)(r.Variants);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.RegistrableProduct===n.state.allSelected&&t.push(l.ProductID)}}catch(s){c.e(s)}finally{c.f()}}else r.RegistrableProduct===n.state.allSelected&&t.push(r.ID)}}catch(s){a.e(s)}finally{a.f()}n.state.allSelected?n.props._deleteRegistrableProduct(t):n.props._createRegistrableProduct(t)},n.state={activePage:e.pageNumber,allSelected:!1},n}return Object(ke.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.activePage!==e.pageNumber&&this.setState({activePage:e.pageNumber}),this.props.products.every((function(e){return e.RegistrableProduct}))?this.setState({allSelected:!0}):this.setState({allSelected:!1})}},{key:"render",value:function(){var e=this,t=[],a=[],n=[];return this.props.products.forEach((function(e){!1!==e.Reviewed?e.Variants.some((function(e){return e.ContractCount>0}))?t.push(e):a.push(e):n.push(e)})),r.a.createElement("div",{className:"page-layout__content"},r.a.createElement("div",{className:"product-pagination-row product-pagination-row--top ".concat(this.props.selectRegistrable?"product-pagination-row__registrable-products-active":"")},r.a.createElement(gr.a,{itemClass:"page-item",linkClass:"page-link",activePage:this.state.activePage,itemsCountPerPage:25,totalItemsCount:this.props.productCount,pageRangeDisplay:5,onChange:this.handlePageChange})),this.props.selectRegistrable?r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row products-view__registrable-products-row"},r.a.createElement("div",{className:"products-view__registrable-products-row-section"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"selectAllProducts",name:"selectAllProducts",className:"product-view__registrable-products-checkbox",onChange:this.toggleAllRegistrable,checked:this.state.allSelected||!this.props.onlyIncludeRegistrableProducts,disabled:!this.props.onlyIncludeRegistrableProducts}),"Select all on page"),r.a.createElement("div",{className:"products-view__registrable-products-row-section"},r.a.createElement(zo,{_toggleOnlyIncludeRegistrableProducts:function(){return e.props._toggleOnlyIncludeRegistrableProducts(!e.props.onlyIncludeRegistrableProducts)},onlyIncludeRegistrableProducts:this.props.onlyIncludeRegistrableProducts,on:!this.props.onlyIncludeRegistrableProducts,title:"Use entire product catalog"})))):null,this.props.loading&&!this.props.registrableProductChange?r.a.createElement("div",{className:"products-loading-animation-container"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large",className:"loading-backdrop--clear"})):r.a.createElement("div",null,r.a.createElement("div",null,t.map((function(t,a){return r.a.createElement(Ko,{key:"review-list-tile-".concat(a),product:t,displayName:e.props.displayName,shopBranded:e.props.shopBranded,_startRecordSale:e.props._startRecordSale,_editProduct:e.props._editProduct,selectRegistrable:e.props.selectRegistrable,_createRegistrableProduct:e.props._createRegistrableProduct,_deleteRegistrableProduct:e.props._deleteRegistrableProduct,onlyIncludeRegistrableProducts:e.props.onlyIncludeRegistrableProducts})})),n.map((function(t,a){return r.a.createElement(Ko,{key:"pending-list-tile-".concat(a),product:t,displayName:e.props.displayName,shopBranded:e.props.shopBranded,_startRecordSale:e.props._startRecordSale,_editProduct:e.props._editProduct,selectRegistrable:e.props.selectRegistrable,_createRegistrableProduct:e.props._createRegistrableProduct,_deleteRegistrableProduct:e.props._deleteRegistrableProduct,onlyIncludeRegistrableProducts:e.props.onlyIncludeRegistrableProducts})})),a.map((function(t,a){return r.a.createElement(Ko,{key:"no-match-list-tile-".concat(a),product:t,displayName:e.props.displayName,shopBranded:e.props.shopBranded,_startRecordSale:e.props._startRecordSale,_editProduct:e.props._editProduct,selectRegistrable:e.props.selectRegistrable,_createRegistrableProduct:e.props._createRegistrableProduct,_deleteRegistrableProduct:e.props._deleteRegistrableProduct,onlyIncludeRegistrableProducts:e.props.onlyIncludeRegistrableProducts})})))),r.a.createElement("div",{className:"product-pagination-row product-pagination-row--bottom"},r.a.createElement(gr.a,{itemClass:"page-item",linkClass:"page-link",activePage:this.state.activePage,itemsCountPerPage:25,totalItemsCount:this.props.productCount,pageRangeDisplay:5,onChange:this.handlePageChange})))}}]),a}(n.Component),Qo=Object(l.b)((function(e){return{products:e.products.products,productCount:e.products.productCount,loading:e.products.getProductsProcessing,roundTotal:e.autopilot.roundTotal,pageNumber:e.products.pageNumber,contractSaleModalOpen:e.contractSale.modalOpen,displayName:e.customize.displayName,shopBranded:e.customize.branded,onlyIncludeRegistrableProducts:e.customize.onlyIncludeRegistrableProducts,registrableProductChange:e.products.registrableProductChange}}),(function(e){return Object(i.b)({_setPage:kr,_startRecordSale:fo,_editProduct:Wr,_createRegistrableProduct:zr,_deleteRegistrableProduct:Yr,_toggleOnlyIncludeRegistrableProducts:ga},e)}))(Yo),qo=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showContracts:!1},e.toggleExpandContracts=function(){e.setState((function(e){return{showContracts:!e.showContracts}}))},e.startRecordSale=function(){e.props._startRecordSale(e.props.product)},e.editProduct=function(){e.props._editProduct(e.props.product)},e.toggleRegistrable=function(t,a){a?e.props._deleteRegistrableProduct([t]):e.props._createRegistrableProduct([t])},e}return Object(ke.a)(a,[{key:"render",value:function(){var e,t=this,a=!0===this.props.product.Reviewed?"matched":"pending";return"matched"===a&&0===this.props.product.Contracts.length&&(a="no-match"),"matched"===a?e="Contracts: ".concat(this.props.product.Contracts.length):"no-match"===a?e="No contract match":"pending"===a&&(e="Contracts pending"),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row product-tile","data-test":"productRow-".concat(this.props.product.ID)},r.a.createElement("div",{className:"col-5 product-tile__name-section"},this.props.selectRegistrable?r.a.createElement(ut.b,{backgroundColor:"clydeBlack",className:"product-view__registrable-products-checkbox",checked:this.props.product.RegistrableProduct||!this.props.onlyIncludeRegistrableProducts,onChange:function(){t.toggleRegistrable(t.props.product.ID,t.props.product.RegistrableProduct)},disabled:!this.props.onlyIncludeRegistrableProducts}):r.a.createElement("img",{onClick:this.editProduct,alt:"",className:"name-section__edit",src:"/images/edit.svg","data-test":"editProduct"}),r.a.createElement(Mo.a,{alt:"product",className:"name-section__thumb",src:[this.props.product.ImageLink,"/images/default-image.svg"]}),r.a.createElement(ut.j,{id:"product-".concat(this.props.product.ID),hideIndicator:!0,label:r.a.createElement("div",{className:"tooltip-text"},this.props.product.Name)},r.a.createElement("div",{"data-tip":!0,"data-for":"product-".concat(this.props.product.ID),className:"name-section__name","data-test":"nameCard"},this.props.product.Name.length>30?"".concat(this.props.product.Name.slice(0,30),"..."):this.props.product.Name))),r.a.createElement("div",{className:"col-2 product-tile__sku-section","data-test":"skuNumberCard"},"SKU: ",this.props.product.SKU),r.a.createElement("div",{className:"col-2 product-tile__record-sale-section"},"matched"===a?r.a.createElement("div",{onClick:this.startRecordSale,className:"record-sale-button"},"Record Sale"):null),r.a.createElement("div",{className:"col-3 product-tile__expand-section"},r.a.createElement("div",{className:"expand-section__container","data-test":"contractsCard",onClick:"matched"===a?this.toggleExpandContracts:null},r.a.createElement("span",{className:"product-tile__contracts-text"},e),"matched"===a?r.a.createElement("img",{alt:"",id:"product-contracts-toggle-".concat(this.props.product.ID),className:"product-tile__contracts-caret product-tile__contracts-caret--".concat(this.state.showContracts?"down":"right"),src:"/images/caret.svg"}):null)),r.a.createElement(fr.UnmountClosed,{springConfig:{stiffness:300,damping:30},hasNestedCollapse:!1,className:"col-12",isOpened:this.state.showContracts},r.a.createElement("div",{className:"clyde-contracts-container row"},r.a.createElement("div",{className:"col-12 clyde-contracts"},this.props.product.Contracts.map((function(e){var a=e.BaseCost+e.BackendFee+e.PlatformFee;return r.a.createElement("div",{key:e.ID,className:"row clyde-contract-row"},r.a.createElement("span",{className:"col-4"},r.a.createElement("a",{className:"clyde-contract-row__name",href:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?pid=").concat(t.props.product.ID,"&cid=").concat(e.ID),rel:"noopener noreferrer",target:"_blank"},"".concat(e.Term," year ").concat(e.Category))),r.a.createElement("span",{className:"col-2"},"SKU: ",e.SKU),r.a.createElement("div",{className:"col-2"},"Merchant Cost: $",a.toFixed(2)),r.a.createElement("div",{className:"col-2"},"Markup: $",e.Markup),r.a.createElement("div",{className:"col-2"},"Total: $",(a+e.Markup).toFixed(2)))})))))))}}]),a}(n.Component),$o=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).handlePageChange=function(e){n.props._setPage(e),n.setState({activePage:e})},n.toggleAllRegistrable=function(){var e,t=[],a=Object(ne.a)(n.props.products);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.RegistrableProduct===n.props.allSelected&&t.push(r.ID)}}catch(o){a.e(o)}finally{a.f()}n.props.allSelected?n.props._deleteRegistrableProduct(t):n.props._createRegistrableProduct(t)},n.state={activePage:e.pageNumber},n}return Object(ke.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.activePage!==e.pageNumber&&this.setState({activePage:e.pageNumber})}},{key:"render",value:function(){var e=this,t=[],a=[],n=[];return this.props.products.forEach((function(e){!1!==e.Reviewed?!0!==e.Reviewed||0===e.Contracts.length?a.push(e):t.push(e):n.push(e)})),r.a.createElement("div",{className:"page-layout__content"},r.a.createElement("div",{className:"product-pagination-row product-pagination-row--top ".concat(this.props.selectRegistrable?"product-pagination-row__registrable-products-active":"")},r.a.createElement(gr.a,{itemClass:"page-item",linkClass:"page-link",activePage:this.state.activePage,itemsCountPerPage:25,totalItemsCount:parseInt(this.props.productCount,10),pageRangeDisplay:5,onChange:this.handlePageChange})),this.props.selectRegistrable?r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row products-view__registrable-products-row"},r.a.createElement("div",{className:"products-view__registrable-products-row-section"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"selectAllProducts",name:"selectAllProducts",className:"product-view__registrable-products-checkbox",onChange:this.toggleAllRegistrable,checked:this.props.allSelected||!this.props.onlyIncludeRegistrableProducts,disabled:!this.props.onlyIncludeRegistrableProducts}),"Select all on page"),r.a.createElement("div",{className:"products-view__registrable-products-row-section"},r.a.createElement(zo,{_toggleOnlyIncludeRegistrableProducts:function(){return e.props._toggleOnlyIncludeRegistrableProducts(!e.props.onlyIncludeRegistrableProducts)},onlyIncludeRegistrableProducts:this.props.onlyIncludeRegistrableProducts,on:!this.props.onlyIncludeRegistrableProducts,title:"Use entire product catalog"})))):null,this.props.loading&&!this.props.registrableProductChange?r.a.createElement("div",{className:"products-loading-animation-container"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large",className:"loading-backdrop--clear"})):r.a.createElement("div",null,r.a.createElement("div",null,t.map((function(t,a){return r.a.createElement(qo,{key:"review-list-tile-".concat(a),product:t,_startRecordSale:e.props._startRecordSale,_editProduct:e.props._editProduct,selectRegistrable:e.props.selectRegistrable,_createRegistrableProduct:e.props._createRegistrableProduct,_deleteRegistrableProduct:e.props._deleteRegistrableProduct,onlyIncludeRegistrableProducts:e.props.onlyIncludeRegistrableProducts})})),n.map((function(t,a){return r.a.createElement(qo,{key:"pending-list-tile-".concat(a),product:t,_startRecordSale:e.props._startRecordSale,_editProduct:e.props._editProduct,selectRegistrable:e.props.selectRegistrable,_createRegistrableProduct:e.props._createRegistrableProduct,_deleteRegistrableProduct:e.props._deleteRegistrableProduct,onlyIncludeRegistrableProducts:e.props.onlyIncludeRegistrableProducts})})),a.map((function(t,a){return r.a.createElement(qo,{key:"no-match-list-tile-".concat(a),product:t,_startRecordSale:e.props._startRecordSale,_editProduct:e.props._editProduct,selectRegistrable:e.props.selectRegistrable,_createRegistrableProduct:e.props._createRegistrableProduct,_deleteRegistrableProduct:e.props._deleteRegistrableProduct,onlyIncludeRegistrableProducts:e.props.onlyIncludeRegistrableProducts})})))),r.a.createElement("div",{className:"product-pagination-row product-pagination-row--bottom"},r.a.createElement(gr.a,{itemClass:"page-item",linkClass:"page-link",activePage:this.state.activePage,itemsCountPerPage:25,totalItemsCount:this.props.productCount,pageRangeDisplay:5,onChange:this.handlePageChange})))}}]),a}(n.Component),Xo=Object(l.b)((function(e){return{products:e.products.products,productCount:e.products.productCount,loading:e.products.getProductsProcessing,pageNumber:e.products.pageNumber,contractSaleModalOpen:e.contractSale.modalOpen,contractSaleProduct:e.contractSale.product,onlyIncludeRegistrableProducts:e.customize.onlyIncludeRegistrableProducts,registrableProductChange:e.products.registrableProductChange}}),(function(e){return Object(i.b)({_setPage:kr,_startRecordSale:fo,_editProduct:Wr,_createRegistrableProduct:zr,_deleteRegistrableProduct:Yr,_toggleOnlyIncludeRegistrableProducts:ga},e)}))($o),Zo=function(e){var t=e.taxonomyItem,a=e.taxonomyItem.contracts,o=Object(n.useState)(!1),c=Object(an.a)(o,2),l=c[0],s=c[1],i=a.length>0?"matched":"no-match",m=a.length>0?"Contracts: ".concat(a.length):"No contract match";return r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row product-tile"},r.a.createElement("div",{className:"col-3 row product-tile__name-section ml-2"},r.a.createElement(ut.j,{label:r.a.createElement("div",{className:"tooltip-text"},t.name),hideIndicator:!0},r.a.createElement("div",{"data-tip":!0,"data-for":"taxonomy-item-".concat(t.id),className:"name-section__name"},t.name.length>30?"".concat(t.name.slice(0,30),"..."):t.name))),r.a.createElement("div",{className:"col-2 product-tile__sku-section"},"Taxon: ",t.levelId),r.a.createElement("div",{className:"col-2 product-tile__sku-section"},"Level: ",t.level),r.a.createElement("div",{className:"col-2 product-tile__record-sale-section"},t.parentId&&"Parent ID: ".concat(t.parentId)),r.a.createElement("div",{className:"col-3 product-tile__expand-section"},r.a.createElement("div",{className:"expand-section__container",onClick:function(){"matched"===i&&s(!l)}},r.a.createElement("span",{className:"product-tile__contracts-text"},m),"matched"===i?r.a.createElement("img",{alt:"",id:"product-contracts-toggle-".concat(t.id),className:"product-tile__contracts-caret product-tile__contracts-caret--".concat(l?"down":"right"),src:"/images/caret.svg"}):null)),r.a.createElement(fr.UnmountClosed,{springConfig:{stiffness:300,damping:30},hasNestedCollapse:!1,className:"col-12",isOpened:l},r.a.createElement("div",{className:"clyde-contracts-container row"},r.a.createElement("div",{className:"col-12 clyde-contracts"},a.map((function(e){var a=e.baseCost+e.backendFee+e.platformFee;return r.a.createElement("div",{key:e.id,className:"row clyde-contract-row"},r.a.createElement("span",{className:"col-8"},r.a.createElement("a",{className:"clyde-contract-row__name",href:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?pid=").concat(t.ID,"&cid=").concat(e.id),rel:"noopener noreferrer",target:"_blank"},"".concat(e.term," year ").concat(e.category))),r.a.createElement("span",{className:"col-2"},"SKU: ",e.sku),r.a.createElement("div",{className:"col-2"},"Merchant Cost: $",a.toFixed(2)))})))))))},Jo=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).handlePageChange=function(e){n.props._setPage(e),n.setState({activePage:e})},n.state={activePage:e.pageNumber},n}return Object(ke.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.activePage!==e.pageNumber&&this.setState({activePage:e.pageNumber})}},{key:"render",value:function(){var e=this.props.taxonomyItems;return r.a.createElement("div",{className:"page-layout__content"},r.a.createElement("div",{className:"product-pagination-row product-pagination-row--top"},r.a.createElement(gr.a,{itemClass:"page-item",linkClass:"page-link",activePage:this.state.activePage,itemsCountPerPage:25,totalItemsCount:this.props.taxonomyCount,pageRangeDisplay:5,onChange:this.handlePageChange})),this.props.loading?r.a.createElement("div",{className:"products-loading-animation-container"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large",className:"loading-backdrop--clear"})):r.a.createElement("div",null,r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement(Zo,{key:"taxon-list-tile-".concat(t),taxonomyItem:e})})))),r.a.createElement("div",{className:"product-pagination-row product-pagination-row--bottom"},r.a.createElement(gr.a,{itemClass:"page-item",linkClass:"page-link",activePage:this.state.activePage,itemsCountPerPage:25,totalItemsCount:this.props.taxonomyCount,pageRangeDisplay:5,onChange:this.handlePageChange})))}}]),a}(n.Component),ec=Object(l.b)((function(e){return{taxonomyItems:e.products.taxonomyItems,taxonomyCount:e.products.taxonomyCount,loading:e.products.getProductsProcessing,pageNumber:e.products.pageNumber}}),(function(e){return Object(i.b)({_setPage:kr,_startRecordSale:fo,_editProduct:Wr},e)}))(Jo),tc=function(e){return r.a.createElement("div",{className:"spinner ".concat(e.containerClass)},r.a.createElement("div",{className:"bounce1"}),r.a.createElement("div",{className:"bounce2"}),r.a.createElement("div",{className:"bounce3"}))},ac=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).state={buttonText:e.text||"Save",disabled:n.props.disabled||!1,onClick:n.props.saveFunc||null,visible:n.props.visible||!1},n}return Object(ke.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;e.processing?this.setState({onClick:null}):(e.visible&&this.setState({visible:!0}),!this.props.processing||e.processing||e.visible?this.setState({buttonText:this.props.text||"Save",onClick:this.props.saveFunc}):(this.setState({buttonText:this.props.successText||"Saved",onClick:null}),setTimeout((function(){t.setState({visible:!1})}),600)),e.disabled?this.setState({disabled:!0}):this.setState({disabled:!1}))}},{key:"render",value:function(){var e=this,t=this.props.className||"button";t+=this.state.visible?"":" button--hidden",t+=this.state.disabled?" button--disabled":"";var a=function(){var a=e.props.enableTooltip?"button-nostyle button-internal":"button-nostyle ".concat(t);return r.a.createElement("button",{"data-tip":!0,"data-for":e.props.tooltipId,id:e.props.id,onClick:e.props.disabled||e.props.processing?null:e.state.onClick,className:a},e.props.processing?r.a.createElement(tc,null):r.a.createElement("span",null,e.state.buttonText),e.props.children)};return this.props.enableTooltip?r.a.createElement("div",{className:"button-nostyle ".concat(t)},r.a.createElement(ut.j,{label:r.a.createElement("div",{className:"tooltip-text"},this.props.tooltipText),hideIndicator:!0},a())):a()}}]),a}(n.Component),nc=function(e){var t,a=e.launched?"Update my store":"Launch",n=e.launched?"Updated":"Launched";switch(e.platform){case"Shopify":t="/images/shopify.png";break;case"BigCommerce":t="/images/bigCommerce.png"}return r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-container__backdrop"}),r.a.createElement("div",{className:"clyde-modal-content"},r.a.createElement("div",{className:"launch-modal"},e.billingReady?r.a.createElement("div",null,e.launched?r.a.createElement("div",{className:"launch-modal-text"},e.updateText):r.a.createElement("div",null,r.a.createElement("div",{className:""},"You\u2019re about to offer protection live on your store."),r.a.createElement("div",{className:"launch-modal-text"},"Ready to launch?"))):r.a.createElement("div",null,"You need to set up billing before we can offer contracts"),r.a.createElement("div",{className:"launch-logos row"},r.a.createElement("div",{className:"offset-2 col-3"},r.a.createElement("img",{className:"launch-logos__image",alt:"",src:"/images/Clyde-Circle-Light.png"})),r.a.createElement("div",{className:"col-2"},r.a.createElement("img",{className:"launch-logos__image",alt:"",src:"/images/arrows.svg"})),r.a.createElement("div",{className:"col-3"},r.a.createElement("img",{className:"launch-logos__image",alt:"",src:t}))),r.a.createElement("div",{className:"row"},e.billingReady?r.a.createElement("div",{className:"col-lg-6 offset-lg-3 col-md-12 col-sm-12"},r.a.createElement(ut.a,{id:"launch-button",className:"confirm-launch-button",onClick:function(){e.handleLaunch()},processing:e.launchProcessing,successText:n},a)):r.a.createElement("div",{onClick:e.updateBilling,className:"col-lg-4 offset-lg-4 col-md-6 offset-md-3 col-sm-12 confirm-launch-button"},"Update billing")),r.a.createElement("div",{className:"row"},e.launchProcessing?r.a.createElement("div",{className:"launch-started-text col-12"},r.a.createElement("div",null,"This may take a few minutes."),r.a.createElement("div",null,"You can leave or close this tab at any time.")):r.a.createElement("div",{onClick:e.closeLaunchModal,className:"col-lg-4 offset-lg-4 col-md-6 offset-md-3 col-sm-12 cancel-launch-button"},e.cancelText||"Cancel")))))},rc=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={showLaunchModal:!1,view:"products",allSelected:!1,onlyIncludeRegistrableProducts:!1},e.toggleViewType=function(){var t="products"===e.state.view?"taxonomy":"products";e.props._setPage(1),e.setState({view:t})},e.toggleSelectRegistrable=function(){e.props._toggleViewRegistrableProducts()},e.refreshAllSelected=function(){e.props.products.products.every((function(e){return e.RegistrableProduct}))?e.setState({allSelected:!0}):e.setState({allSelected:!1})},e.toggleLaunchInstrRef=r.a.createRef(),e}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props._getCTAInfo(),this.props._getBillingInfo(),this.props._getLicensingInfo(),"Shopify"!==this.props.platform&&"BigCommerce"!==this.props.platform||this.props._getShopSettings()}},{key:"toggleLaunchModal",value:function(){this.setState({showLaunchModal:!this.state.showLaunchModal})}},{key:"goToBilling",value:function(){this.toggleLaunchModal(),this.props.history.push("/settings")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.platform||"Shopify"!==e.platform&&"BigCommerce"!==e.platform||(this.props._getShopSettings(),this.props._getLaunchingStatus()),e.products.download){var a=document.createElement("a");a.href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,".concat(e.products.excelExport);var n=(new Date).toLocaleDateString();a.download="Clyde Rate Sheet ".concat(n.replace(/\//g,"-"),".xlsx"),a.click(),setTimeout((function(){t.props._toggleDownloadFalse()}),500)}this.refreshAllSelected()}},{key:"handleLaunch",value:function(){this.toggleLaunchModal(),this.props._launchProducts()}},{key:"closeLaunchInstr",value:function(){this.toggleLaunchInstrRef.click(),this.props._dismissLaunchInstr()}},{key:"export",value:function(e){e.preventDefault(),this.props.products.download||this.props._getRateSheetExport()}},{key:"render",value:function(){var e,t=this,a=this.state.view,n=this.props,o=n.products,c=n.platform,l=n.viewRegistrableProducts;e="taxonomy"===a?ec:"Shopify"===c||"BigCommerce"===c?Qo:Xo;var s=this.props.billingAccounts.find((function(e){return e.default})),i=this.props.billingInvoice||s&&"verified"===s.status||s&&"card_"===s.stripeSourceID.slice(0,5),m=o.showSaveButton||o.matchingComplete&&(!o.launched||o.needLaunch),d=["Clyde","Magento","SFCC"].indexOf(c)>=0;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"page-container"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | Products")),r.a.createElement("div",{className:"page-layout"},d&&r.a.createElement("div",{className:"actions-container"},r.a.createElement(ut.j,{id:"export-rate-sheet",position:"right",label:r.a.createElement("div",{className:"actions-container__tooltip__text"},"Export rate sheet"),hideIndicator:!0},r.a.createElement("div",{onClick:function(e){return t.export(e)},"data-tip":!0,"data-for":"export-rate-sheet",className:"actions-container__button"},r.a.createElement("img",{className:"actions-container__button__image actions-container__button__image--export",alt:"Export rate sheet",src:"/images/download.svg"}))),r.a.createElement(ut.j,{id:"upload-products",label:r.a.createElement("div",{className:"actions-container__tooltip__text"},"Import products "),position:"right",hideIndicator:!0},r.a.createElement("div",{onClick:this.props._openUploadModal,"data-tip":!0,"data-for":"import-products",className:"actions-container__button"},r.a.createElement("img",{className:"actions-container__button__image",alt:"Import products",src:"/images/upload.svg"}))),r.a.createElement(ut.j,{id:"new-product",label:r.a.createElement("div",{className:"actions-container__tooltip__text"},"New product"),position:"right",hideIndicator:!0},r.a.createElement("div",{onClick:this.props._openNewProductModal,"data-tip":!0,"data-for":"new-product","data-test":"newProduct",className:"actions-container__button"},r.a.createElement("img",{className:"actions-container__button__image",alt:"New product",src:"/images/new-contracts.svg"})))),r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("div",{className:"row align-items-end"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h1",null,"Manage Products")),r.a.createElement("div",{className:"col-12"},this.props.showRegistrationPage?r.a.createElement("button",{className:"products-view__eligible-registrable-products-button ".concat(this.state.selectRegistrable?"products-view__eligible-registrable-products-button-toggled":""),onClick:function(){return t.toggleSelectRegistrable()}},"Select Registrable Products"):null,r.a.createElement(xo,{platform:c,view:a,_toggleView:this.toggleViewType})))),e?r.a.createElement(e,{selectRegistrable:l,allSelected:this.state.allSelected,onlyIncludeRegistrableProducts:this.props.onlyIncludeRegistrableProducts,toggleSelectRegistrable:this.toggleSelectRegistrable}):null,r.a.createElement("div",null,this.props.products.openProductModal?r.a.createElement(Eo,null):null,!0===this.props.products.openUploadModal?r.a.createElement(go,null):null,!0===this.props.contractSaleModalOpen?r.a.createElement(ko,{platform:c,billingReady:i,updateBilling:function(){t.goToBilling()}}):null,this.state.showLaunchModal?r.a.createElement(nc,{platform:c,updateText:"Ready to push your updates?",handleLaunch:function(){t.handleLaunch()},closeLaunchModal:function(){t.toggleLaunchModal()},launched:this.props.products.launched,launchProcessing:this.props.products.launchProcessing,billingReady:i,updateBilling:function(){t.goToBilling()}}):null))),d?null:r.a.createElement("div",{className:"process-div"},r.a.createElement("div",{className:"fixed-save-bar"},r.a.createElement(ac,{id:"products-save-button",saveFunc:function(){t.toggleLaunchModal()},className:"products-save-button",tooltipId:"contract-settings-tooltip",enableTooltip:this.props.products.launchProcessing,tooltipText:"Your contracts are currently updating. Please wait for this process to complete before beginning a new launch.",processing:this.props.products.launchProcessing,disabled:!1,visible:m,text:this.props.products.launched?"Launch updates":"Launch",successText:"Launched"},r.a.createElement("div",{ref:this.toggleLaunchInstrRef,id:"toggle-launch-instr",className:"toggle-launch-instructions","data-tip":!0,"data-for":"launch-instr","data-scroll-hide":"false","data-event":"click"})),r.a.createElement(Mt.a,{to:"/contracts",className:"contract-settings-link"},"Manage contracts"),r.a.createElement("div",{className:"rate-sheet-export-button",onClick:function(e){return t.export(e)}},r.a.createElement("span",null,"Export Rate Sheet"))))))}}]),a}(n.Component),oc=Object(Fe.a)(Object(l.b)((function(e){return{products:e.products,billingAccounts:e.billing.accounts,platform:e.auth.platform,billingInvoice:e.billing.invoice,contractSaleModalOpen:e.contractSale.modalOpen,onlyIncludeRegistrableProducts:e.customize.onlyIncludeRegistrableProducts,showRegistrationPage:e.customize.showRegistrationPage,viewRegistrableProducts:e.productRegistrations.viewRegistrableProducts}}),(function(e){return Object(i.b)({_launchProducts:Hr,_getBillingInfo:Pa,_getShopSettings:io,_openUploadModal:Xr,_openNewProductModal:Qr,_dismissLaunchInstr:Ar,_getCTAInfo:_a,_getRateSheetExport:no,_toggleDownloadFalse:ro,_setPage:kr,_getLaunchingStatus:Br,_toggleOnlyIncludeRegistrableProducts:ga,_toggleViewRegistrableProducts:_o,_getLicensingInfo:uo},e)}))(rc)),cc=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t={transition:"left 200ms ease-in-out"},a={entering:{left:"50px"},entered:{left:"50px"},exiting:{left:"0px"},exited:{left:"0px"}},n=this.props.on?"autopilot-switch autopilot-switch--on":"autopilot-switch autopilot-switch--off";return r.a.createElement(Ht.a,{in:this.props.on,timeout:200},(function(o){return r.a.createElement("div",{onClick:!0===e.props.disabled?null:e.props.toggle,className:n},r.a.createElement("div",{className:"autopilot-switch__contents",style:Object(d.a)(Object(d.a)({},t),a[o])}),r.a.createElement("div",{className:"autopilot-switch__text"},r.a.createElement("span",{className:"autopilot-switch__text__on"},"ON"),r.a.createElement("span",{className:"autopilot-switch__text__off"},"OFF")))}))}}]),a}(n.Component),lc=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={marginChanged:!1,showLaunchModal:!1},e}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props._getShopSettings()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,a=t.platform,n=t.autopilot,r=t.billingAccounts,o=t.billingInvoice;if(n.saveProcessing&&!e.autopilot.saveProcessing&&("Shopify"===a||"BigCommerce"===a)){var c=r.find((function(e){return e.default})),l=o||c&&"verified"===c.status||c&&"card_"===c.stripeSourceID.slice(0,5);this.state.marginChanged&&l&&(this.setState({marginChanged:!1}),this.toggleLaunchModal())}}},{key:"handleLaunch",value:function(){this.toggleLaunchModal(),this.props._launchProducts()}},{key:"handleSave",value:function(){this.props._updateShopSettings(this.props.autopilot,this.state.marginChanged)}},{key:"toggleLaunchModal",value:function(){this.setState({showLaunchModal:!this.state.showLaunchModal})}},{key:"marginChange",value:function(e){e.target.value>400?this.props._setCustomMargin(400):this.props._setCustomMargin(e.target.value.slice(0,6)),this.setState({marginChanged:!0})}},{key:"emptyMargin",value:function(e){this.setState({marginChanged:!0}),e.target.value||this.props._setCustomMargin(25)}},{key:"handleRoundTotal",value:function(e){this.setState({marginChanged:!0}),this.props._setRoundTotal(e.target.checked)}},{key:"handleToggleAutoMargin",value:function(){this.setState({marginChanged:!0}),this.props._toggleAutoMargin()}},{key:"render",value:function(){var e=this,t=this.props.platform,a=this.props.autopilot.roundTotal?(2*Math.round(5*this.props.autopilot.markupPercentage/100)/2-.01).toFixed(2):(Math.round(5*this.props.autopilot.markupPercentage/100*100)/100).toFixed(2),n=(parseFloat(a)+5).toFixed(2);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"page-container"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | Contracts")),r.a.createElement("div",{className:"page-layout"},!1===this.props.autopilot.shopReviewed&&r.a.createElement("p",{className:"onboarding-instructions"},"Customize your autopilot settings to determine how we should manage your protection program."),r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("h1",null,"Contract Settings"),r.a.createElement("br",null)),r.a.createElement("div",{className:"page-layout__content"},r.a.createElement("div",{className:"autopilot-option"},r.a.createElement("div",{className:"autopilot-option__title "},"Autopilot Connect"),r.a.createElement("div",{className:"autopilot-switch--always-on"},"ON"),r.a.createElement("div",{className:"autopilot-option__subtitle"},"Clyde automatically connects all your products with contracts, even when you add a new product. This is always on.")),r.a.createElement("div",{className:"autopilot-option"},r.a.createElement("div",{className:gt()("autopilot-option__title",{"autopilot-option__title--inactive":!this.props.autopilot.autoMargin})},"Autopilot Markup"),r.a.createElement("div",{className:"autopilot-switch-container"},r.a.createElement(cc,{on:this.props.autopilot.autoMargin,toggle:function(){e.handleToggleAutoMargin()}})),r.a.createElement("div",{className:gt()("autopilot-option__subtitle",{"autopilot-option__subtitle--inactive":!this.props.autopilot.autoMargin})},"Clyde automatically optimizes your markup on each contract to drive the most passive revenue to your top line.","Shopify"!==this.props.platform&&r.a.createElement("span",null,"We use this setting to provide you with a recommended retail price for your contracts."))),r.a.createElement(fr.UnmountClosed,{isOpened:!1===this.props.autopilot.autoMargin},r.a.createElement("div",null,r.a.createElement("div",{className:"autopilot-option"},r.a.createElement("div",{className:"autopilot-option__title "},"Set custom markup percentage"),r.a.createElement("div",{className:"autopilot-option__subtitle"},"Set a markup percentage that applies to every contract. The % amount is based on the price of the contract.")),r.a.createElement("div",{className:"autopilot-option"},r.a.createElement("div",{className:"margin-options"},this.props.autopilot.markupPercentage>400&&r.a.createElement("span",null,"Note: Your current markup percentage was set by Clyde to be above the allowed maximum."),r.a.createElement("input",{value:this.props.autopilot.markupPercentage,onBlur:function(t){e.emptyMargin(t)},onChange:function(t){e.marginChange(t)},disabled:this.props.launchProcessing,type:"number",min:"0",max:"400",className:"margin-options__amount-input"}),r.a.createElement("span",{className:"margin-options__percent"},"%"),r.a.createElement("div",{className:"margin-options__round-total"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"roundTotal",onChange:function(t){e.handleRoundTotal(t)},checked:this.props.autopilot.roundTotal,disabled:this.props.launchProcessing,label:"Round total cost to the nearest $0.99"}))),r.a.createElement("div",{className:"margin-explanation"},"If a contract costs ",r.a.createElement("span",{className:"margin-explanation__highlight"},"$5.00")," to underwrite, you are adding a markup of ",r.a.createElement("span",{className:"margin-explanation__highlight"},"$",a," (",this.props.autopilot.markupPercentage,"%)"),". Total cost to the consumer is ",r.a.createElement("span",{className:"margin-explanation__highlight"},"$",n),", and you make ",r.a.createElement("span",{className:"margin-explanation__highlight"},"$",a)," in profit.")))))))),r.a.createElement("div",{className:"process-div"},r.a.createElement("div",{className:"fixed-save-bar"},r.a.createElement(ac,{id:"contract-settings-save-button",tooltipId:"contract-settings-tooltip",className:"autopilot-save-button",enableTooltip:this.props.autopilot.saveProcessing||this.props.launchProcessing,tooltipText:"Your contracts are currently updating. Please wait for this process to complete before changing your settings.",disabled:!1,visible:this.props.autopilot.showSaveButton,saveFunc:function(){e.handleSave()},processing:this.props.autopilot.saveProcessing||this.props.launchProcessing}),r.a.createElement(Mt.a,{to:"/products",className:"products-page-link"},"Manage products"))),this.state.showLaunchModal&&r.a.createElement(nc,{platform:t,updateText:"Ready to launch your markup changes to ".concat(t,"?"),cancelText:"Not yet",handleLaunch:function(){e.handleLaunch()},closeLaunchModal:function(){e.toggleLaunchModal()},launched:!0,launchProcessing:this.props.launchProcessing,billingReady:!0}))}}]),a}(n.Component),sc=Object(Fe.a)(Object(l.b)((function(e){return{autopilot:e.autopilot,billingAccounts:e.billing.accounts,billingInvoice:e.billing.invoice,launchProcessing:e.products.launchProcessing,platform:e.auth.platform}}),(function(e){return Object(i.b)({_toggleAutoMargin:co,_setCustomMargin:lo,_setRoundTotal:so,_getShopSettings:io,_updateShopSettings:mo,_launchProducts:Hr},e)}))(lc)),ic=a(685),mc=["account","userManagement","integrations"],dc=["account"],uc={account:"account",integrations:"integrations",userManagement:"user-management",waw:"warranty-anywhere",registrations:"registrations"},pc={account:"Account",integrations:"Integrations",userManagement:"User Management",waw:"Warranty Anywhere",registrations:"Product Registration"},_c=[{name:"View All",value:"all"},{name:"Connected Apps",value:"connected"},{name:"Ecommerce",value:"ecommerce"},{name:"Communication",value:"communication"},{name:"Productivity",value:"productivity"},{name:"MarketPlace",value:"market"}],hc=function(e){var t=e.isActive,a=e.tabType,n=gt()("settings-tab-header-button",{"settings-tab-header-button--active":t});return r.a.createElement(Mt.a,{className:n,onMouseUp:function(e){e.currentTarget.blur()},to:"/settings/".concat(uc[a])},pc[a])},Ec=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSave=function(){var t=e.props,a=t.contactInfo,n=t._updateShopContacts,r=t._setValidationErrors,o=!1,c=a.contactList.map((function(e){var t=La(e);return Object.keys(t).length&&(o=!0),t}));o||n(a),r(c)},e.handleContactChange=function(t){return function(a){var n=a.target,r=n.name,o=n.value,c="phoneNumber"===r;e.props._setText({name:r,value:o,numeric:c,index:t})}},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=this.props.contactInfo,a=t.contactList,n=t.formErrors,o=t.getProcessing,c=t.showSaveButton,l=t.saveProcessing;return r.a.createElement("div",null,r.a.createElement("div",{className:"settings-tile"},r.a.createElement("div",{className:"settings-tile__title"},"Additional Contact Info"),o?r.a.createElement("div",{className:"settings-tile__content settings-tile__content--profile"},r.a.createElement("div",{className:"settings-tile__content__loading-container settings-tile__content__loading-container--profile"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))):r.a.createElement("div",{className:"settings-tile__content"},a.map((function(t,a){return r.a.createElement(Ka,{key:"".concat(t.type,"-form"),contactInfo:t,formErrors:n[a],handleChange:e.handleContactChange(a)})})))),r.a.createElement("div",{className:"profile-settings-button-container"},c&&r.a.createElement(ut.a,{id:"settings-save-button",className:"button--small settings-save-button",onClick:this.handleSave,processing:l,successText:"Saved"},"Save")))}}]),a}(n.Component),gc=Object(l.b)((function(e){return{contactInfo:e.contactInfo}}),(function(e){return Object(i.b)({_setText:ra,_updateShopContacts:oa,_setValidationErrors:ca},e)}))(Ec),fc=function(){return function(e){e({type:"SHOP_GET_PROCESSING",payload:{}}),e(Oe({type:"GET_SHOP_DEVELOPER_INFO_REQ",payload:{}}))}},bc=function(e){return{type:"SET_IS_BASIC_AUTH",payload:e}},vc=function(e){var t={isBasicAuth:e.isBasicAuth};return function(e){e({type:"SHOP_SECURITY_SAVE_PROCESSING",payload:{}}),e(Oe({type:"UPDATE_SHOP_SECURITY_INFO_REQ",payload:t}))}},yc=function(e){var t=function(){e.disabled||e.toggleFunc(e.settingName)},a={transition:"left 200ms ease-in-out"},n={entering:{left:"34px"},entered:{left:"34px"},exiting:{left:"4px"},exited:{left:"4px"}},o=gt()("small-switch",Object(b.a)({"small-switch--disabled":e.disabled,"small-switch--true":e.settingName&&!e.disabled,"small-switch--false":!e.settingName&&!e.disabled},e.className,!!e.className));return r.a.createElement(Ht.a,{in:e.settingName,timeout:200},(function(c){return r.a.createElement("div",{className:o,onClick:t},r.a.createElement("div",{className:"small-switch__dot",style:Object(d.a)(Object(d.a)({},a),n[c])},r.a.createElement("span",{className:"small-switch__dot__text small-switch__dot__text--true"},e.trueLabel),r.a.createElement("span",{className:"small-switch__dot__text small-switch__dot__text--false"},e.falseLabel)))}))},Nc=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showLiveKeys:!0,showSecret:!1},e.UNSAFE_componentWillMount=function(){e.props._getShopInfo()},e.handleSave=function(){e.props._updateShopInfo(e.props.developers)},e.handleSelectChange=function(t){e.props._setIsBasicAuth(t.target.value)},e.showSecret=function(){e.setState({showSecret:!0})},e.toggleKeys=function(){e.setState({showLiveKeys:!e.state.showLiveKeys,showSecret:!1})},e}return Object(ke.a)(a,[{key:"render",value:function(){var e,t,a=["Live","Test"];this.state.showLiveKeys?(e=this.props.developers.apiKeys.liveKeys.clientKey,t=this.props.developers.apiKeys.liveKeys.secret):(a=a.slice(1).concat(a.slice(0,1)),e=this.props.developers.apiKeys.testKeys.clientKey,t=this.props.developers.apiKeys.testKeys.secret);return r.a.createElement("div",null,r.a.createElement("div",{className:"settings-tile"},r.a.createElement("div",{className:"settings-tile__title settings-tile__title--developers"},"Developers"),this.props.developers.getProcessing?r.a.createElement("div",{className:"settings-tile__content settings-tile__content--developers"},r.a.createElement("div",{className:"tile-loading-container"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))):r.a.createElement("div",{className:"settings-tile__content settings-tile__content--".concat(this.state.showLiveKeys?"live":"test")},r.a.createElement("div",{className:"row settings-tile__content__section"},r.a.createElement("div",{className:"col-6 col-xl-3 api-keys-section"},r.a.createElement("h5",null,a[0]," API Keys")),r.a.createElement("div",{className:"col-6 col-xl-3 api-keys-section__switch-container"},r.a.createElement(yc,{toggleFunc:this.toggleKeys,settingName:this.state.showLiveKeys,trueLabel:"LIVE",falseLabel:"TEST"})),r.a.createElement("div",{className:"col-12 api-keys-section"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4 col-md-3 col-lg-2 api-keys-section__key-name"},"Client Key:"),r.a.createElement("div",{className:"col-sm-7 col-md-5 col-lg-10 api-keys-section__key-value"},r.a.createElement("span",{className:"api-keys-section__key-value__text"},e))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4 col-md-3 col-lg-2 api-keys-section__key-name"},"Secret:"),r.a.createElement("div",{className:"col-sm-7 col-md-5 col-lg-10 api-keys-section__key-value"},this.state.showSecret?r.a.createElement("span",{className:"api-keys-section__key-value__text"},t):r.a.createElement("button",{className:"show-secret-button",onClick:this.showSecret},"Show Secret"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-xl-6 api-security"},r.a.createElement("label",{className:"api-security__label",htmlFor:"isBasicAuth"},"API security options",r.a.createElement("div",{className:"api-security__tooltip-container"},r.a.createElement(ut.j,{position:"right",label:r.a.createElement("div",{className:"tooltip-text tooltip-text--right"},"Stores default to signed requests for enhanced security. API customers have the choice to change from Signed Requests to Basic Auth for situations in which signed requests are not needed. Do not change if you are using a language specific SDK."),hideIndicator:!0},r.a.createElement("img",{alt:"info","data-tip":!0,"data-for":"api-security",className:"info-icon",src:"/images/info-icon.svg"})))),r.a.createElement("select",{className:"form-field",id:"isBasicAuth",name:"isBasicAuth",value:this.props.developers.isBasicAuth,onChange:this.handleSelectChange},r.a.createElement("option",{value:"false",key:"false"},"Request Signing"),r.a.createElement("option",{value:"true",key:"true"},"Basic Auth")))))),r.a.createElement("div",{id:"prof-settings-save-container",className:"security-settings-save-container"},this.props.developers.showSaveButton&&r.a.createElement(ut.a,{id:"developers-save-button",className:"button--small settings-save-button",onClick:this.handleSave,processing:this.props.developers.saveProcessing,successText:"Saved"},"Save")))}}]),a}(n.Component),Oc=Object(l.b)((function(e){return{developers:e.developers}}),(function(e){return Object(i.b)({_getShopInfo:fc,_updateShopInfo:vc,_setIsBasicAuth:bc},e)}))(Nc),Cc=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSave=function(){var t=e.props,a=t.profile,n=t.platform,r=t._updateShopInfo,o=t._setValidationErrors,c=Ua(Object(d.a)({},a),n);Object(ka.isEmpty)(c)&&r(a),o(c)},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value,o="phoneNumber"===n||"zip"===n;e.props._setText(n,r,o)},e}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props._getShopInfo()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"settings-tile"},r.a.createElement("div",{className:"settings-tile__title"},"Profile"),this.props.profile.getProcessing?r.a.createElement("div",{className:"settings-tile__content settings-tile__content--profile"},r.a.createElement("div",{className:"settings-tile__content__loading-container settings-tile__content__loading-container--profile"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))):r.a.createElement("div",{className:"settings-tile__content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-6 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("label",{className:gt()("profile-label",{"profile-label--invalid":this.props.profile.formErrors.shopName}),htmlFor:"store-name"},"Shop Name"),"Clyde"!==this.props.platform?r.a.createElement(ut.i,{disabled:"disabled",name:"shopName",value:this.props.profile.shopName,id:"store-name",className:"form-field",maxLength:"100"}):r.a.createElement(ut.i,{onChange:this.handleChange,name:"shopName",value:this.props.profile.shopName,id:"store-name",className:"form-field",maxLength:"100"})),r.a.createElement("div",{className:"col-12 col-lg-6 col-md-6 col-sm-6 col-xs-12"},r.a.createElement("label",{className:gt()("profile-label",{"profile-label--invalid":this.props.profile.formErrors.domain}),htmlFor:"domain"},"Shop URL"),r.a.createElement(ut.i,{disabled:"Clyde"!==this.props.platform,name:"domain",value:this.props.profile.domain,id:"domain",className:"form-field",maxLength:"100"}))),r.a.createElement(Ka,{contactInfo:this.props.profile,formErrors:this.props.profile.formErrors,handleChange:this.handleChange}),r.a.createElement(Ya,{contactInfo:this.props.profile,formErrors:this.props.profile.formErrors,handleChange:this.handleChange}))),r.a.createElement("div",{className:"profile-settings-button-container"},this.props.profile.showSaveButton&&r.a.createElement(ut.a,{id:"settings-save-button",className:"button--small settings-save-button",onClick:this.handleSave,processing:this.props.profile.saveProcessing,successText:"Saved"},"Save")))}}]),a}(n.Component),Sc=Object(l.b)((function(e){return{profile:e.profile}}),(function(e){return Object(i.b)({_setText:Xt,_getShopInfo:Jt,_updateShopInfo:ta,_setValidationErrors:na},e)}))(Cc),Ic=function(){return function(e){e(Oe({type:"GET_USER_EMAIL_REQ",payload:{}}))}},Rc=function(e,t){return function(a){a(Oe({type:"UPDATE_USER_REQ",payload:{password:e,newPassword:t}})),a({type:"UPDATE_USER_PROCESSING",payload:{}})}},Pc=function(){return{type:"CLEAR_SETTINGS_STATUS"}},Tc=function(){return{type:"SHOW_SAVE_BUTTON"}},wc=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target.name,a=e.target.value;n.setState({user:Object(d.a)(Object(d.a)({},n.state.user),{},Object(b.a)({},t,a))},(function(){n.validateField(t,a),n.props._showSaveButton()}))},n.validateField=function(e,t){var a=n.state.formErrors;switch(e){case"newPassword":var r=dt()(t).score;r<3?a.newPassword="Password not strong enough":delete a.newPassword,""!==n.state.user.confirmPassword&&t!==n.state.user.confirmPassword?a.confirmPassword="Passwords do not match.":delete a.confirmPassword,n.setState({passwordStrength:r});break;case"confirmPassword":t===n.state.user.newPassword?delete a.confirmPassword:a.confirmPassword="Passwords do not match."}n.setState({formErrors:a,formValid:0===Object.keys(a).length})},n.fieldsComplete=function(){var e={};return Object.keys(n.state.user).forEach((function(t){0===n.state.user[t].trim().length&&(e[t]=!0)})),!(Object.keys(e).length>0)||(n.setState({missingFields:e}),!1)},n.handleSubmit=function(){n.setState({missingFields:{}}),n.fieldsComplete()&&!0===n.state.formValid&&n.props._submitUserUpdate(n.state.user.password,n.state.user.newPassword)},n.state={user:{email:n.props.user.email,password:"",newPassword:"",confirmPassword:""},passwordStrength:0,formErrors:{},formValid:!1,missingFields:{}},n}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props._getUserEmail()}},{key:"componentWillUnmount",value:function(){this.props._clearSettingsStatus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.user.email!==this.props.user.email&&this.setState({user:Object(d.a)(Object(d.a)({},this.state.user),{},{email:e.user.email})}),!0===this.props.user.updateProcessing&&!1===e.user.updateProcessing&&this.setState({user:Object(d.a)(Object(d.a)({},this.state.user),{},{email:e.user.email,password:"",newPassword:"",confirmPassword:""}),passwordStrength:0})}},{key:"render",value:function(){var e=this.state.formErrors,t=this.state.missingFields;return r.a.createElement("div",null,r.a.createElement("div",{className:"settings-tile"},r.a.createElement("div",{className:"settings-tile__title"},r.a.createElement("span",null,"Account"),this.props.oAuthUser&&r.a.createElement("span",{className:"settings-tile__title__oauth-disabled-message"},"Password management is disabled for OAuth users"),this.props.user.passwordUpdated&&r.a.createElement("span",{className:"settings-tile__title__updated"},"Your password has been updated!")),r.a.createElement("div",{className:"settings-tile__content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:"account-label",htmlFor:"userEmail"},"Email"),r.a.createElement(ut.i,{className:"form-field",id:"userEmail",name:"email",value:this.state.user.email,disabled:!0})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:gt()("account-label",{"account-label--invalid":e.password||t.password}),htmlFor:"userPassword"},"Current password"),r.a.createElement("input",{className:"form-field",onChange:this.handleChange,id:"userPassword",type:"password",name:"password",disabled:this.props.oAuthUser,value:this.state.user.password})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:gt()("account-label account-label--inline-block",{"account-label--invalid":e.newPassword||t.newPassword}),htmlFor:"newPassword"},"New password"),r.a.createElement("div",{className:"password-strength strength-".concat(this.state.passwordStrength)},r.a.createElement("span",{className:"strength-1"}),r.a.createElement("span",{className:"strength-2"}),r.a.createElement("span",{className:"strength-3"}),r.a.createElement("span",{className:"strength-4"})),r.a.createElement("input",{className:"form-field",onChange:this.handleChange,id:"newPassword",type:"password",name:"newPassword",disabled:this.props.oAuthUser,value:this.state.user.newPassword})),r.a.createElement("div",{className:"col-6"},r.a.createElement("label",{className:gt()("account-label",{"account-label--invalid":e.confirmPassword||t.confirmPassword}),htmlFor:"confirmPassword"},"Confirm password"),r.a.createElement("input",{className:"form-field",onChange:this.handleChange,id:"confirmPassword",type:"password",name:"confirmPassword",disabled:this.props.oAuthUser,value:this.state.user.confirmPassword}))))),r.a.createElement("div",{className:"user-settings-save-container"},this.props.user.error&&r.a.createElement("div",{className:"invalid-password"},"Invalid password"),this.props.user.showSaveButton&&r.a.createElement(ut.a,{id:"account-save-button",className:"button--small settings-save-button",disabled:this.props.oAuthUser,onClick:this.handleSubmit,processing:this.props.user.updateProcessing,successText:"Saved"},"Save")))}}]),a}(n.Component),jc=Object(l.b)((function(e){return{user:e.user,oAuthUser:e.auth.oAuth}}),(function(e){return Object(i.b)({_submitUserUpdate:Rc,_getUserEmail:Ic,_clearSettingsStatus:Pc,_showSaveButton:Tc},e)}))(wc),kc=function(e){var t=e.accountType,a=e.platform,n=[];switch(t){case"admin":n=[{id:"billingSettings",Tile:En},{id:"profileSettings",Tile:Sc},{id:"contactSettings",Tile:gc},{id:"userSettings",Tile:jc},{id:"developersSettings",Tile:Oc}];break;case"basic":default:n=[{id:"userSettings",Tile:jc}]}return r.a.createElement("div",{className:"settings-tab settings-tab--account"},n.map((function(e){var t=e.id,n=e.Tile;return r.a.createElement("div",{className:"settings-tile-container",key:t},r.a.createElement(n,{platform:a}))})))},Ac=function(e){return function(t){t({type:"GET_SHOP_INTEGRATIONS_INFO",payload:{}}),t(Oe({type:"GET_SHOP_INTEGRATIONS_INFO_REQ",payload:{userId:e}}))}},Dc=function(e){return{type:"INTEGRATIONS_TAB_FILTER_INTEGRATIONS",filterValue:e}},Lc=function(e){return{type:"INTEGRATIONS_TAB_SEARCH_INTEGRATIONS",searchString:e}},xc=function(){return{type:"INTEGRATIONS_TAB_RESET_SETTINGS"}},Fc=function(e,t){return function(a){var n="";switch(e){case"affirm":n="INTEGRATIONS_CONNECT_AFFIRM_REQ";break;case"klaviyo":n="INTEGRATIONS_CONNECT_KLAVIYO_REQ";break;default:n="INTEGRATIONS_CONNECT_INVALID_REQ"}a(Uc),a(Oe({type:n,payload:t}))}},Mc=function(e,t,a){return function(n){n(Oe({type:"INTEGRATIONS_DISCONNECT_FRIGG_INTEGRATION_REQ",payload:{integrationId:t,userId:e,integrationType:a}}))}},Uc={type:"INTEGRATIONS_SETUP_MODAL_CONNECT_ACCOUNT"},Gc=["svgRef","title"];function Bc(){return(Bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Hc(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Wc,Vc,Kc=function(e){var t=e.svgRef,a=e.title,n=Hc(e,Gc);return r.a.createElement("svg",Bc({width:40,height:41,viewBox:"0 0 40 41",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,Uo||(Uo=r.a.createElement("path",{d:"M20 23.0001V12.1667",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Go||(Go=r.a.createElement("ellipse",{cx:19.9999,cy:28.8334,rx:1.66667,ry:1.66667,fill:"#000000"})),Bo||(Bo=r.a.createElement("path",{d:"M19.9999 37.1666C29.2047 37.1666 36.6666 29.7047 36.6666 20.4999C36.6666 11.2952 29.2047 3.83325 19.9999 3.83325C10.7952 3.83325 3.33325 11.2952 3.33325 20.4999C3.33325 29.7047 10.7952 37.1666 19.9999 37.1666Z",stroke:"#000000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))},zc=r.a.forwardRef((function(e,t){return r.a.createElement(Kc,Bc({svgRef:t},e))})),Yc=(a.p,["svgRef","title"]);function Qc(){return(Qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function qc(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var $c,Xc,Zc=function(e){var t=e.svgRef,a=e.title,n=qc(e,Yc);return r.a.createElement("svg",Qc({width:70,height:70,viewBox:"0 0 70 70",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,Wc||(Wc=r.a.createElement("g",{clipPath:"url(#clip0_343_2697)"},r.a.createElement("path",{d:"M34.9967 1.2207e-06C25.7144 0.00172528 16.8129 3.69033 10.2499 10.2545C3.6869 16.8187 -6.11953e-05 25.7209 -6.10352e-05 35.0032C-6.11953e-05 44.2856 3.6869 53.1878 10.2499 59.752C16.8129 66.3162 25.7144 70.0048 34.9967 70.0065C39.5934 70.0065 44.1452 69.1011 48.392 67.342C52.6387 65.5829 56.4974 63.0046 59.7477 59.7543C62.9981 56.5039 65.5765 52.6452 67.3355 48.3984C69.0946 44.1516 70 39.5999 70 35.0032C70 30.4066 69.0946 25.8549 67.3355 21.6081C65.5765 17.3613 62.9981 13.5026 59.7477 10.2522C56.4974 7.00187 52.6387 4.42354 48.392 2.66447C44.1452 0.905388 39.5934 1.2207e-06 34.9967 1.2207e-06ZM50.9706 41.8882C49.2607 48.071 44.2872 54.2407 36.0175 54.2407C33.5723 54.2614 31.1474 53.7961 28.8836 52.8717C26.6198 51.9473 24.5621 50.5822 22.8304 48.8559C21.0986 47.1296 19.7271 45.0763 18.7956 42.8154C17.8641 40.5546 17.3911 38.1311 17.4041 35.6859C17.4041 24.7181 24.7637 15.8373 35.5364 15.8373C44.8203 15.8373 50.3139 21.539 50.3139 25.9469C50.3359 26.3413 50.2728 26.7358 50.129 27.1037C49.9852 27.4716 49.7641 27.8043 49.4805 28.0793C49.1969 28.3543 48.8575 28.5651 48.4853 28.6974C48.1131 28.8298 47.7168 28.8806 47.3233 28.8465C42.4213 28.8465 42.8439 18.4443 34.5222 18.4443C29.2496 18.4443 24.5555 23.873 24.5555 30.8684C24.5555 41.7842 30.6343 47.8629 37.5582 47.8629C43.1884 47.8629 46.7057 44.2937 48.487 40.887C48.5512 40.7703 48.655 40.6804 48.7796 40.6334C48.9028 40.5845 49.04 40.5845 49.1632 40.6334L50.6585 41.238C50.7831 41.2859 50.8851 41.3787 50.9446 41.4981C50.9999 41.6207 51.0091 41.7593 50.9706 41.8882Z",fill:"url(#paint0_linear_343_2697)"}))),Vc||(Vc=r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"paint0_linear_343_2697",x1:-610352e-10,y1:38.3491,x2:70,y2:38.3491,gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{stopColor:"#FEED7A"}),r.a.createElement("stop",{offset:.489583,stopColor:"#FF8400"}),r.a.createElement("stop",{offset:1,stopColor:"#DF91FF"})),r.a.createElement("clipPath",{id:"clip0_343_2697"},r.a.createElement("rect",{width:70,height:70,fill:"white"})))))},Jc=r.a.forwardRef((function(e,t){return r.a.createElement(Zc,Qc({svgRef:t},e))})),el=(a.p,["svgRef","title"]);function tl(){return(tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function al(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var nl,rl,ol=function(e){var t=e.svgRef,a=e.title,n=al(e,el);return r.a.createElement("svg",tl({width:20,height:16,viewBox:"0 0 20 16",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,$c||($c=r.a.createElement("path",{d:"M20 3.75L14 0.285899L14 7.2141L20 3.75ZM5 4.35L14.6 4.35L14.6 3.15L5 3.15L5 4.35Z",fill:"#D1D1D1"})),Xc||(Xc=r.a.createElement("path",{d:"M0 12.25L6 15.7141V8.7859L0 12.25ZM5.4 12.85H15V11.65H5.4V12.85Z",fill:"#D1D1D1"})))},cl=r.a.forwardRef((function(e,t){return r.a.createElement(ol,tl({svgRef:t},e))})),ll=(a.p,function(e){switch(e.headerType){case"alert":return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"integrations-setup-modal__logos"},r.a.createElement("div",{className:"integrations-setup-modal__logos__other"},r.a.createElement(zc,{className:"integrations-setup-modal__logos__other__alert"}))),r.a.createElement("h2",{className:"integrations-setup-modal__header"},"Contact Clyde to Connect Integration"));default:var t=e.logo,a=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"integrations-setup-modal__logos"},r.a.createElement(Jc,{className:"integrations-setup-modal__logos__clyde"}),r.a.createElement(cl,{className:"integrations-setup-modal__logos__arrows"}),r.a.createElement("div",{className:"integrations-setup-modal__logos__other"},r.a.createElement(Mo.a,{alt:"".concat(a," logo"),className:"integration-outside-logo",src:[t,"/images/warranty-shield.svg"]}))),r.a.createElement("h2",{className:"integrations-setup-modal__header"},"Connect ",a," to your Clyde Account"))}}),sl=function(e){var t=e.buttonType,a=e.submitProcessing,n=e._closeModal,o=null;switch(t){case"contact":o=r.a.createElement("a",{className:"integrations-setup-modal__buttons__link",href:"mailto:support@joinclyde.com"},"Contact Clyde");break;case"oauth2":o=r.a.createElement("button",{type:"submit",className:"integrations-setup-modal__buttons__link"},"Connect Integration");break;case"basic":default:o=r.a.createElement(ut.a,{className:"integrations-setup-modal__buttons__connect",processing:a,type:"submit"},"Connect Integration")}return r.a.createElement("div",{className:"integrations-setup-modal__buttons"},o,r.a.createElement("button",{className:"button-no-style integrations-setup-modal__buttons__cancel",disabled:a,onClick:n,type:"button"},"Cancel"))},il=Object(l.b)((function(e){return{submitProcessing:e.integrations.setupModal.submitProcessing}}),(function(e){return{_closeModal:function(){e({type:"INTEGRATIONS_SETUP_MODAL_CLOSE"})}}}))(sl),ml=function(e){var t=e.integration,a=t.logo,n=t.name,o=t.clydeOptions.affirmPublicKey,c=e._onSubmit,l=e._onTextChange;return r.a.createElement("form",{className:"integrations-setup-modal-form",onSubmit:function(e){e.preventDefault(),c("affirm",{affirmPublicKey:o})}},r.a.createElement(ll,{logo:a,name:n}),r.a.createElement("p",{className:"integrations-setup-modal-form__info"},"Input your information below to complete your integration"),r.a.createElement("div",{className:"integrations-setup-modal-form__inputs"},r.a.createElement("div",{className:"integrations-setup-modal-form__inputs__input-group integrations-setup-modal-form__inputs__input-group--margin-right"},r.a.createElement("label",{htmlFor:"affirmPublicKey"},"Public Key"),r.a.createElement(ut.i,{id:"affirmPublicKey",name:"affirmPublicKey",onChange:function(e){var t=e.target,a=t.name,n=t.value;l(a,n)},placeholder:"Public Key",value:o}))),r.a.createElement(il,null))},dl=function(e){var t=e.integration,a=t.logo,n=t.name,o=t.clydeOptions,c=o.klaviyoIntegration,l=o.klaviyoPublicKey,s=e._onSubmit,i=e._onTextChange;return r.a.createElement("form",{className:"integrations-setup-modal-form",onSubmit:function(e){e.preventDefault(),s("klaviyo",{klaviyoPublicKey:l})}},r.a.createElement(ll,{headerType:c?"connect":"alert",logo:a,name:n}),c?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"integrations-setup-modal-form__info"},"Input your information below to complete your integration"),r.a.createElement("div",{className:"integrations-setup-modal-form__inputs"},r.a.createElement("div",{className:"integrations-setup-modal-form__inputs__input-group"},r.a.createElement("label",{htmlFor:"klaviyoPublicKey"},"Public Key"),r.a.createElement(ut.i,{id:"klaviyoPublicKey",name:"klaviyoPublicKey",onChange:function(e){var t=e.target,a=t.name,n=t.value;i(a,n)},placeholder:"Public Key",value:l})))):r.a.createElement("p",{className:"integrations-setup-modal-form__info"},"The Klaviyo integration is included with Clyde, but has compliance restrictions. Please contact ",r.a.createElement("a",{href:"mailto:support@joinclyde.com"},"support@joinclyde.com"),"."),r.a.createElement(il,{buttonType:c?"connect":"contact"}))},ul=function(e){var t=e.selectedIntegration,a=e.userId,n=e._connectIntegration,o=e._updateValue,c=function(e,t){n(e,Object(d.a)(Object(d.a)({},t),{},{userId:a}))};switch(t.id){case"affirm":return r.a.createElement(ml,{integration:t,_onSubmit:c,_onTextChange:o});case"klaviyo":return r.a.createElement(dl,{integration:t,_onSubmit:c,_onTextChange:o});default:return null}},pl=Object(l.b)((function(e){return{userId:e.auth.userId,selectedIntegration:e.integrations.setupModal.selectedIntegration}}),(function(e){return{_connectIntegration:function(t,a){e(Fc(t,a))},_updateValue:function(t,a){e(function(e,t){return{type:"INTEGRATIONS_SETUP_MODAL_UPDATE_CLYDE_CONTROLLED_INTEGRATION_VALUE",key:e,value:t}}(t,a))}}}))(ul),_l=a(319),hl=a.n(_l),El=function(e){var t=e.integrationData,a=e.jsonSchema,n=e.uiSchema,o=e._handleTextChange,c=e._setFormDirty,l=e._formDirty,s=e.errorMap,i=Object.keys(a.properties);return r.a.createElement("div",{className:"integrations-setup-modal-form__inputs"},i.map((function(e){var i=a.properties[e],m=n[e],d=s[e]&&l?"integrations-setup-modal-form__inputs__input-group-error":"";return r.a.createElement("div",{className:"integrations-setup-modal-form__inputs__input-group",key:e},r.a.createElement("label",{className:d,htmlFor:e},i.title),r.a.createElement(ut.i,{className:d,id:e,name:e,onChange:o,onSubmit:c,placeholder:m["ui:placeholder"],value:t[e]||""}))})))},gl=function(){return window.self!==window.top},fl=function(e){var t,a,o=e.userId,c=e.authRequirements,l=e.getProcessing,s=e.selectedIntegration,i=e.integrationData,m=e._setFriggOAuthData,u=e._updateValue,p=c.data&&c.data.jsonSchema&&c.data.jsonSchema.required&&c.data.jsonSchema.required.length>0,_=null;if("oauth2"===c.type&&p){var h=decodeURI(c.url);_=hl.a.render(h,{subdomain:i.subdomain})}else _=decodeURI(c.url);var E=Object(n.useState)({}),g=Object(an.a)(E,2),f=g[0],v=g[1],y=Object(n.useState)(!1),N=Object(an.a)(y,2),O=N[0],C=N[1],S=Object.values(f).some((function(e){return e}));Object(n.useEffect)((function(){if(p){var e,t=Object(ne.a)(c.data.jsonSchema.required);try{for(t.s();!(e=t.n()).done;){var a=e.value;v(Object(d.a)(Object(d.a)({},f),{},Object(b.a)({},a,!0)))}}catch(n){t.e(n)}finally{t.f()}}}),[c]);var I=r.a.createElement("div",null,r.a.createElement(ll,{logo:null===(t=s.entityOptions.display)||void 0===t?void 0:t.icon,name:s.name}),r.a.createElement("div",{className:"integrations-setup-modal__message"},"Setting up this integration requires us to redirect you to ",s.name," to grant necessary permissions. This redirect isn't possible while using our Dashboard from within BigCommerce. Please open the ",r.a.createElement("a",{href:window.location.href,target:"_blank",rel:"noopener noreferrer"},"Clyde Dashboard")," in a separate tab to complete this integration.")),R=r.a.createElement("div",{className:"integrations-setup-modal__body"},r.a.createElement(ll,{logo:null===(a=s.entityOptions.display)||void 0===a?void 0:a.icon,name:s.name}),l?r.a.createElement("div",{className:"integrations-setup-modal__body__loading"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"})):r.a.createElement("form",{className:"integrations-setup-modal-form",onSubmit:function(e){e.preventDefault(),C(!0),S||("oauth2"===c.type?(m(o,i,s.name.toLowerCase()),window.location.href=_):c.type)}},r.a.createElement("p",{className:"integrations-setup-modal-form__info"},p?"Input your information below to complete your integration":"Click below to connect your account"),p&&r.a.createElement(El,{integration:s,integrationData:i,jsonSchema:c.data.jsonSchema,uiSchema:c.data.uiSchema,errorMap:f,_setFormDirty:function(){return C(!0)},_formDirty:O,_handleTextChange:function(e){var t=e.target,a=t.name,n=t.value;u(a,n),function(e,t){e&&(""===t.trim()?v(Object(d.a)(Object(d.a)({},f),{},Object(b.a)({},e,!0))):v(Object(d.a)(Object(d.a)({},f),{},Object(b.a)({},e,!1))))}(a,n)}}),S&&O&&r.a.createElement("div",{className:"integrations-setup-modal-form__inputs__input-group-error"},"Please complete all required fields"),r.a.createElement(il,{buttonType:c.type,oAuthUrl:_})));return"oauth2"===c.type&&gl()?I:R},bl=Object(l.b)((function(e){return{userId:e.auth.userId,authRequirements:e.integrations.setupModal.authRequirements,selectedIntegration:e.integrations.setupModal.selectedIntegration,integrationData:e.integrations.setupModal.integrationData,getProcessing:e.integrations.setupModal.getProcessing,setOAuthProcessing:e.integrations.setupModal.setOAuthProcessing}}),(function(e){return{_connectIntegration:function(){},_updateValue:function(t,a){e(function(e,t){return{type:"INTEGRATIONS_SETUP_MODAL_UPDATE_FRIGG_CONTROLLED_INTEGRATION_VALUE",key:e,value:t}}(t,a))},_setFriggOAuthData:function(t,a,n){e(function(e,t,a){return function(n){n({type:"INTEGRATIONS_SET_FRIGG_OAUTH_DATA_PROCESSING"}),n(Oe({type:"INTEGRATIONS_SET_FRIGG_OAUTH_DATA_REQ",payload:{userId:e,data:t,name:a}}))}}(t,a,n))}}}))(fl),vl=function(e){var t=e.isFriggIntegration,a=e.isModalOpen,n=e.submitSuccess,o=e._closeModal,c=e._resetModal,l=null;return l=t?bl:pl,r.a.createElement(ut.m,{active:a,className:"integrations-setup-modal",closeModal:o,processing:!1},n?r.a.createElement(ut.n,{className:"integrations-setup-modal__success-animation",onSuccess:c,text:"Integration connected!"}):r.a.createElement(l,null))},yl=Object(l.b)((function(e){return{isFriggIntegration:e.integrations.setupModal.selectedIntegration.friggIntegration,isModalOpen:e.integrations.setupModal.modalOpen,submitSuccess:e.integrations.setupModal.submitSuccess}}),(function(e){return{_closeModal:function(){e({type:"INTEGRATIONS_SETUP_MODAL_CLOSE"})},_resetModal:function(){e({type:"INTEGRATIONS_SETUP_MODAL_RESET"})}}}))(vl),Nl=function(e){var t=e.integrationName,a=e._closeModal,n=e._reloadIntegrationsTab;return r.a.createElement("div",{className:"integrations-oauth-redirect-modal-enabled"},r.a.createElement(ut.n,{text:"".concat(t," successfully connected!"),onSuccess:function(){a(),n()}}))},Ol=function(e){var t=e._closeModal,a=e.error,n=e.integration.display,o=n.name,c=n.icon;return r.a.createElement("div",{className:"integrations-oauth-redirect-modal-error"},r.a.createElement(ll,{logo:c,name:o}),r.a.createElement("p",null,a),r.a.createElement(ut.a,{onClick:function(){t()}},"Close"))},Cl=function(e){var t=e.modalOpen,a=e.getProcessing,n=e.integration,o=e._closeModal,c=e._reloadIntegrationsTab,l=gt()("integrations-oauth-redirect-modal",Object(b.a)({"integrations-oauth-redirect-modal--loading":a},"integrations-oauth-redirect-modal--".concat(n.status),!!n.status));return r.a.createElement(ut.m,{active:t,className:l,closeModal:o,processing:!1},a?r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}):function(){if(!t)return null;switch(n.status){case"ENABLED":return r.a.createElement(Nl,{integrationName:n.display.name,_closeModal:o,_reloadIntegrationsTab:c});case"ERROR":return r.a.createElement(Ol,{integration:n,error:n.error,_closeModal:o});default:return null}}())},Sl=Object(l.b)((function(e){return Object(d.a)({userId:e.auth.userId},e.integrations.oAuthData)}),(function(e){return{_closeModal:function(){e({type:"INTEGRATIONS_O_AUTH_REDIRECT_MODAL_CLOSE"})},_reloadIntegrationsTab:function(t){e(Ac(t))}}}))(Cl),Il=function(e){switch(e){case"ENABLED":return["Remove Integration"];case"DISABLED":return[];case"NEEDS_CONFIG":return["Remove Integration"];default:return[]}},Rl=Object(l.b)((function(e){return{userId:e.auth.userId}}),(function(e){return Object(i.b)({_updateIntegration:Fc,_deleteFriggIntegration:Mc},e)}))((function(e){var t=Object(n.useState)(!1),a=Object(an.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),s=Object(an.a)(l,2),i=s[0],m=s[1],d=e.integration,u=e.status,p=function(e){c(!0),m(e.name)};return r.a.createElement("div",{className:"integration-menu"},Il(u).map((function(e){return r.a.createElement("a",{className:"integration-menu__option",key:e,onClick:function(){return function(e,t){"Remove Integration"===t&&p(e)}(d,e)}},e)})),d.links.map((function(e){return r.a.createElement("a",{className:"integration-menu__option",href:e.url,key:e.title,rel:"noopener noreferrer",target:"_blank"},e.title)})),o?r.a.createElement(ut.m,{active:o,className:"remove-integration-modal",closeModal:function(){return c(!1)}},r.a.createElement("h2",{className:"remove-integration-header"},"Warning:"),r.a.createElement("p",null,"Are you sure you want to remove this integration? To re-enable you will have to set up the integration again."),r.a.createElement("button",{className:"integrations-setup-modal__buttons__link",onClick:function(){return function(t){switch(t){case"Affirm":e._updateIntegration("affirm",{affirmPublicKey:""});break;case"Klaviyo":e._updateIntegration("klaviyo",{klaviyoPublicKey:""});break;default:e._deleteFriggIntegration(e.userId,d.integrationOptions.id,t)}c(!1)}(i)}},"Continue and Remove")):null)})),Pl={ENABLED:"Connected",DISABLED:"Connect Account",NEEDS_CONFIG:"Needs Configuration",PROCESSING:"Processing",ERROR:"Integration Error",LINK_ONLY:"Connect"},Tl=function(e){if("alloy"===e.id)return{text:Pl.LINK_ONLY,value:"LINK_ONLY",link:"https://docs.joinclyde.com/docs/alloy"};if(e.friggIntegration){if(e.integrationOptions){var t=e.integrationOptions.status;return{text:Pl[t],value:t}}return{text:Pl.DISABLED,value:"DISABLED"}}if("affirm"===e.id)return e.clydeOptions.showAffirm?{text:Pl.ENABLED,value:"ENABLED"}:{text:Pl.DISABLED,value:"DISABLED"};if("klaviyo"===e.id){if(e.clydeOptions.klaviyoIntegration&&e.clydeOptions.sendKlaviyoEvents)return{text:Pl.ENABLED,value:"ENABLED"};if(!e.clydeOptions.klaviyoIntegration||!e.clydeOptions.sendKlaviyoEvents)return{text:Pl.DISABLED,value:"DISABLED"}}return{text:Pl.DISABLED,value:"Disabled"}},wl=function(e){var t=e.integration,a=e.userId,o=e._getFriggAuthRequirements,c=e._openSetupModal,l=Object(n.useState)(!1),s=Object(an.a)(l,2),i=s[0],m=s[1],d=Tl(t);Object(n.useEffect)((function(){m(!1)}),[t]);var u=t.friggIntegration?t.entityOptions.display.icon:t.logo,p=gt()("button-no-style integration-tile__header__menu-button",{"integration-tile__header__menu-button--open":i});return r.a.createElement("div",{className:"integration-tile"},r.a.createElement("div",{className:"integration-tile__header"},r.a.createElement("button",{className:p,onClick:function(){m(!i)},onMouseUp:function(e){e.currentTarget.blur()}},r.a.createElement("div",{className:"integration-tile__header__menu-button__ellipse"}),r.a.createElement("div",{className:"integration-tile__header__menu-button__ellipse"}),r.a.createElement("div",{className:"integration-tile__header__menu-button__ellipse"})),i&&r.a.createElement(Rl,{integration:t,closeIntegrationMenu:function(){m(!1)},status:d.value})),r.a.createElement("div",{className:"integration-tile__body"},r.a.createElement("div",{className:"integration-tile__body__logo"},r.a.createElement(Mo.a,{alt:"".concat(t.name," logo"),className:"integration-outside-logo",src:[u,"/images/warranty-shield.svg"]})),r.a.createElement("h3",{className:"integration-tile__body__header"},t.name),r.a.createElement("div",{className:"integration-tile__body__text"},r.a.createElement("p",null,t.description||t.entityOptions.display.description)),r.a.createElement("button",{className:"integration-tile__body__button integration-tile__body__button--".concat(d.value),onClick:function(){"ENABLED"!==d.value&&("LINK_ONLY"!==d.value?(c(t),t.friggIntegration&&o(a,t.entityOptions.type)):window.open(d.link,"_blank","noopener,noreferrer"))},onMouseUp:function(e){e.currentTarget.blur()},tabIndex:"ENABLED"===d.value?-1:0},d.text)))},jl=["svgRef","title"];function kl(){return(kl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Al(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Dl,Ll,xl=function(e){var t=e.svgRef,a=e.title,n=Al(e,jl);return r.a.createElement("svg",kl({width:101,height:100,viewBox:"0 0 101 100",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,nl||(nl=r.a.createElement("circle",{cx:50.5,cy:50,r:50,fill:"#F3F3F3"})),rl||(rl=r.a.createElement("path",{d:"M64.1043 56.1847L71.9984 62.9992C73.1693 64.0093 73.3377 65.8253 72.3762 67.0545C71.4147 68.2838 69.6864 68.4625 68.5164 67.4523L60.6223 60.6369M59.0492 62.6488L65.6774 54.1733M62.3636 58.411L59.1268 55.617M54.5029 56.3727V70.1337C54.5029 71.1649 53.7081 72 52.7265 72H28.7763C27.7948 72 27 71.1649 27 70.1337V29.8672C27 28.836 27.7948 28 28.7763 28H52.7265C53.7081 28 54.5029 28.836 54.5029 29.8672V31.8399M41.2779 39.6404H50.0191M38.72 44.1946H52.2572M38.1866 48.7488H52.2569M40.5323 53.303H49.2727M55.8737 38.3983C60.3957 42.3024 61.0501 49.3186 57.3342 54.0697C53.6184 58.8217 46.9405 59.5082 42.4185 55.6051C37.8965 51.701 37.2421 44.6848 40.9571 39.9337C44.6729 35.1817 51.3508 34.4952 55.8737 38.3983Z",stroke:"#000000",strokeWidth:2})))},Fl=r.a.forwardRef((function(e,t){return r.a.createElement(xl,kl({svgRef:t},e))})),Ml=(a.p,["svgRef","title"]);function Ul(){return(Ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Gl(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Bl,Hl,Wl=function(e){var t=e.svgRef,a=e.title,n=Gl(e,Ml);return r.a.createElement("svg",Ul({width:101,height:100,viewBox:"0 0 101 100",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,Dl||(Dl=r.a.createElement("circle",{cx:50.5,cy:50,r:50,fill:"#F3F3F3"})),Ll||(Ll=r.a.createElement("path",{d:"M52.7 41.3149L61.7797 49.9999L48.7325 62.4807M47.3256 58.7098L38.2199 50L51.3222 37.4674M49.5957 38.3495L46.7125 35.5917C44.8963 33.8552 44.8963 31.039 46.7125 29.3024C48.528 27.5659 51.4714 27.5659 53.2877 29.3024C55.1032 31.039 55.1032 33.8552 53.2877 35.5917L50.4046 38.3495C50.181 38.5626 49.8185 38.5626 49.5957 38.3495ZM50.4043 61.6503L53.2874 64.4081C55.1036 66.1454 55.1036 68.9608 53.2874 70.6981C51.4719 72.434 48.5285 72.434 46.7122 70.6981C44.8967 68.9608 44.8967 66.1454 46.7122 64.4081L49.5953 61.6503C49.8189 61.4372 50.1814 61.4372 50.4043 61.6503ZM62.1799 49.6132L65.063 46.8554C66.8793 45.1189 69.8227 45.1189 71.6382 46.8554H71.639C73.4537 48.592 73.4537 51.4074 71.639 53.1447H71.6382C69.8227 54.8813 66.8793 54.8813 65.063 53.1447L62.1799 50.387C61.9571 50.1731 61.9571 49.8264 62.1799 49.6132ZM37.8201 50.3866L34.937 53.1444C33.1207 54.8817 30.1773 54.8817 28.3618 53.1444H28.361C26.5463 51.4078 26.5463 48.5924 28.361 46.8551H28.3618C30.1773 45.1185 33.1207 45.1185 34.937 46.8551L37.8201 49.6129C38.0429 49.8267 38.0429 50.1735 37.8201 50.3866Z",stroke:"#000000",strokeWidth:2})))},Vl=r.a.forwardRef((function(e,t){return r.a.createElement(Wl,Ul({svgRef:t},e))})),Kl=(a.p,function(e){var t=e.availableIntegrations,a=e.filterValue,n=e.userId,o=e._getFriggAuthRequirements,c=e._openSetupModal,l=e.platform;return t.length?r.a.createElement("div",{className:"integration-settings-body__result"},t.map((function(e){return"Shopify"===l&&"affirm"===e.id?null:r.a.createElement(wl,{integration:e,key:e.id,userId:n,_getFriggAuthRequirements:o,_openSetupModal:c})}))):"connected"===a?r.a.createElement("div",{className:"integration-settings-body__no-result"},r.a.createElement("div",null,r.a.createElement(Vl,null)),r.a.createElement("h3",null,"No connected integrations"),r.a.createElement("p",null,"Browse our integrations to get started.")):r.a.createElement("div",{className:"integration-settings-body__no-result"},r.a.createElement("div",null,r.a.createElement(Fl,null)),r.a.createElement("h3",null,"No results found"),r.a.createElement("p",null,"We couldn't find any results. Try using our filters to find your integration."))}),zl=Object(l.b)((function(e){return{userId:e.auth.userId,platform:e.auth.platform}}),(function(e){return{_getFriggAuthRequirements:function(t,a){e(function(e,t){return function(a){a({type:"INTEGRATIONS_SETUP_MODAL_PROCESSING",payload:{}}),a(Oe({type:"INTEGRATIONS_GET_FRIGG_AUTH_REQUIREMENTS_REQ",payload:{userId:e,integrationType:t}}))}}(t,a))},_openSetupModal:function(t){e(function(e){return{type:"INTEGRATIONS_SETUP_MODAL_OPEN",selectedIntegration:e}}(t))}}}))(Kl),Yl=function(e){if(e.friggIntegration){var t=e.integrationOptions;return!(!t||"ENABLED"!==t.status)}return!("affirm"!==e.id||!e.clydeOptions.showAffirm)||!("klaviyo"!==e.id||!e.clydeOptions.klaviyoIntegration)},Ql=function(e){var t=e.allIntegrations,a=e.filterValue,o=e.searchString,c=e.userId,l=e._filterIntegrations,s=e._getShopInfo,i=e._resetIntegrationsTab,m=e._searchIntegrations;Object(n.useEffect)((function(){return s(c),function(){i()}}),[]);var d=t.filter((function(e){var t,n=e.categories,r=e.id;t="all"===a||("connected"===a?Yl(e):n.includes(a));var c=0===r.indexOf(o);return t&&c}));return r.a.createElement("div",{className:"settings-tab settings-tab--integrations"},r.a.createElement("div",{className:"integration-settings__header-section"},r.a.createElement("div",{className:"integration-settings__header-section-description"},r.a.createElement("h3",null,"Set up integrations and connected apps"),r.a.createElement("p",null,"Connect all your favorite apps below and optimize your workflow")),r.a.createElement("div",{className:"integration-settings__search"},r.a.createElement(ut.i,{className:"integration-settings__search-input",name:"integrationsSearchValue",onChange:function(e){return m(e.target.value)},onSubmit:function(e){return m(e.target.value)},placeholder:"Search",search:!0,value:o}))),r.a.createElement("div",{className:"integration-settings-body"},r.a.createElement("div",{className:"integration-settings-body__filter-option-section"},_c.map((function(e,t){var n=gt()("integration-settings-body__filter-option",{"integration-settings-body__filter-option-selected":a===e.value});return r.a.createElement("button",{className:n,key:"option-".concat(t),onClick:function(){return l(e.value,e.integrations)}},e.name)}))),r.a.createElement("div",{className:"integration-settings-body__tile-section"},e.getProcessing?r.a.createElement("div",{className:"tile-loading-container"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"})):r.a.createElement(zl,{availableIntegrations:d,filterValue:a}))),r.a.createElement(yl,null),r.a.createElement(Sl,null))},ql=Object(l.b)((function(e){return Object(d.a)({userId:e.auth.userId},e.integrations)}),(function(e){return Object(i.b)({_getShopInfo:Ac,_filterIntegrations:Dc,_resetIntegrationsTab:xc,_searchIntegrations:Lc},e)}))(Ql),$l=function(){return function(e){e(Oe({type:"GET_ALL_SHOP_USERS_REQ",payload:{}}))}},Xl=function(e,t){return function(a){a(Oe({type:"UPDATE_USER_ACCOUNT_TYPE_REQ",payload:{userId:e,newType:t}}))}},Zl=function(e,t){return function(a){a(Oe({type:"TOGGLE_USER_DISABLED_REQ",payload:{userId:e,toggle:t}}))}},Jl=function(e){return Oe({type:"RESET_USER_PASSWORD_REQ",payload:{userId:e}})},es=function(){return{type:"CLEAR_USER_FEEDBACK",payload:{}}},ts=function(){return{type:"CLEAR_USER_SUCCESS",payload:{}}},as=function(e){return function(t){t({type:"CREATE_USER",payload:{}}),t(Oe({type:"CREATE_USER_REQ",payload:e}))}},ns=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={accountType:"basic",email:"",errors:[]},e.handleCreateUser=function(t){if(t.preventDefault(),!e.props.isProcessing){var a=[];Da.a.isEmail(e.state.email)||a.push("Email is not valid."),a.length>0?(e.props._clearSuccess(),e.setState({errors:a})):(e.setState({errors:[]}),e.props._createUser({shopId:e.props.shopId,accountType:e.state.accountType,email:e.state.email}))}},e.handleChange=function(t){t.preventDefault();var a=t.target.value,n=t.target.name;e.setState(Object(b.a)({},n,a))},e.buildFeedback=function(){return e.props.isSuccess?r.a.createElement("span",{className:"create-user__feedback-success"},"Successfully created new user!"):r.a.createElement("ul",{className:"create-user__feedback-errors-list"},e.state.errors.map((function(e,t){return r.a.createElement("li",{key:t},e)})))},e}return Object(ke.a)(a,[{key:"componentWillUnmount",value:function(){this.props._clearFeedback()}},{key:"render",value:function(){return r.a.createElement("div",{className:"info-tile create-user__tile"},r.a.createElement("form",{className:"create-user__form",onSubmit:this.handleCreateUser},r.a.createElement("div",{className:"create-user__input row"},r.a.createElement("div",{className:"col-12 col-md-8 col-lg-9"},r.a.createElement("label",{htmlFor:"create-user-email-input"},"Email:"),r.a.createElement(ut.i,{id:"create-user-email-input",name:"email",onChange:this.handleChange,value:this.state.email})),r.a.createElement("div",{className:"col-12 col-md-4 col-lg-3"},r.a.createElement("label",{htmlFor:"create-user-account-type"},"Account Type:"),r.a.createElement("select",{id:"create-user-account-type",type:"text",name:"accountType",onChange:this.handleChange,value:this.state.accountType},r.a.createElement("option",{value:"admin"},"Admin"),r.a.createElement("option",{value:"basic"},"User")))),r.a.createElement("div",{className:"row create-user__feedback"},r.a.createElement("div",{className:"col-12 col-md-4 col-lg-3 d-flex justify-content-start"},r.a.createElement("button",{className:"button",type:"submit"},"Create User")),this.state.errors.length>0||this.props.isSuccess?r.a.createElement("div",{className:"col-12 col-md-8 col-lg-9 d-flex align-items-center justify-content-center justify-content-md-start"},this.buildFeedback()):null)))}}]),a}(n.Component),rs=ns,os=Object(l.b)((function(e){return{isProcessing:e.userManagement.isProcessing,isSuccess:e.userManagement.isSuccess,newUser:e.userManagement.newUser}}),(function(e){return Object(i.b)({_createUser:as,_clearFeedback:es,_clearSuccess:ts},e)}))(rs),cs=function(e){var t={transition:"left 200ms ease-in-out"},a={exiting:{left:"64px"},exited:{left:"64px"},entering:{left:"4px"},entered:{left:"4px"}},n=gt()("user-type-switch",{"user-type-switch--true":e.truthValue,"user-type-switch--false":!e.truthValue,"user-type-switch--disabled":e.disabled});return r.a.createElement(Ht.a,{in:e.truthValue,timeout:200},(function(o){return r.a.createElement("div",{className:n,onClick:function(){return e.toggleFunc(e.truthValue)}},r.a.createElement("div",{className:"user-type-switch__dot",style:Object(d.a)(Object(d.a)({},t),a[o])},r.a.createElement("span",{className:"user-type-switch__dot__text user-type-switch__dot__text--true"},e.trueLabel),r.a.createElement("span",{className:"user-type-switch__dot__text user-type-switch__dot__text--false"},e.falseLabel)))}))},ls=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={passwordReset:!1},e.handlePasswordReset=function(){e.state.passwordReset||(e.setState({passwordReset:!0}),e.props._resetUserPassword(e.props.user.id),setTimeout((function(){return e.setState({passwordReset:!1})}),3e3))},e.handleToggleUserDisabled=function(t,a,n){n||e.props._toggleUserDisabled(t,a)},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=this.props.user,a=t.accountType,n=t.disabled,o=t.email,c=t.id,l=t.lastLogin,s=t.password,i=t.link,m=t.isOAuth,d=l?qn(l):"Never",u=gt()("button",{"user-management__reset_pw_button--reset":this.state.passwordReset,"user-management__reset_pw_button--normal":!this.state.passwordReset,"user-management__reset_pw_button--disabled":m});return this.props.userId===c?null:r.a.createElement("div",{className:"user-management__user-item row"},r.a.createElement("div",{className:"col-12 col-lg-3 user-management__user-item-content user-management__user-item-content--with-pw"},r.a.createElement("h5",{className:"user-management__user-item-label"},"Email"),r.a.createElement("span",{className:"user-management__email"},o),Boolean(s)&&r.a.createElement("p",{className:"user-management__password"},"Temp password: ",s,"(sent in email)",r.a.createElement("br",null),r.a.createElement("a",{href:i},i))),r.a.createElement("div",{className:"col-12 col-lg-2 user-management__user-item-content"},r.a.createElement("h5",{className:"user-management__user-item-label"},"Last Login"),r.a.createElement("span",{className:"user-management__last-login-time"},d)),r.a.createElement("div",{className:"col-12 col-md-6 col-lg-2 user-management__user-item-content"},r.a.createElement("h5",{className:"user-management__user-item-label"},"Type"),r.a.createElement("select",{type:"text",name:"accountType",className:"user-management__account-type-select",onChange:function(t){return e.props._updateUserAccountType(c,t.target.value)},value:a},r.a.createElement("option",{value:"admin"},"Admin"),r.a.createElement("option",{value:"basic"},"User"))),r.a.createElement("div",{className:"col-12 col-lg-1 user-management__user-item-content"},r.a.createElement("h5",{className:"user-management__user-item-label"},"Login"),r.a.createElement("span",{className:"user-management__last-login-time"},m?"OAuth":"Password")),r.a.createElement("div",{className:"col-12 col-lg-2 user-management__user-item-content"},r.a.createElement("h5",{className:"user-management__user-item-label"},"Status"),r.a.createElement(cs,{disabled:m,toggleFunc:function(){return e.handleToggleUserDisabled(c,!n,m)},truthValue:n,trueLabel:"Disabled",falseLabel:"Enabled"})),r.a.createElement("div",{className:"col-10 col-lg-2 user-management__reset-pw-section"},r.a.createElement(ut.j,{label:r.a.createElement("div",{className:"tooltip-text"},"We'll send this user an email with a new password. They will be able to update their password."),hideIndicator:!0},r.a.createElement("button",{"data-tip":!0,"data-for":"user-reset-password-button",className:u,onClick:this.handlePasswordReset,disabled:m},this.state.passwordReset?"Success!":"Reset Password"))))}}]),a}(n.Component),ss=Object(l.b)((function(e){return{userId:e.auth.userId}}),(function(e){return Object(i.b)({_resetUserPassword:Jl,_toggleUserDisabled:Zl,_updateUserAccountType:Xl},e)}))(ls),is=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={showLiveKeys:!0,showSecret:!1},e.buildUsersList=function(){var t,a=[],n=Object(ne.a)(e.props.allUsers);try{for(n.s();!(t=n.n()).done;){var o=t.value;a.push(r.a.createElement(ss,{user:o,key:o.email}))}}catch(c){n.e(c)}finally{n.f()}return a},e}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props._getAllShopUsers()}},{key:"render",value:function(){return r.a.createElement("div",{className:"settings-tile settings-tile--user-management"},r.a.createElement("div",{className:"settings-tile__title settings-tile__title--user-management"},"User Management"),this.props.loading?r.a.createElement("div",{className:"settings-tile__content settings-tile__content--user-management"},r.a.createElement("div",{className:"tile-loading-container"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}))):r.a.createElement("div",{className:"settings-tile__content settings-tile__content--user-management"},r.a.createElement("h4",null,"Create a User"),r.a.createElement(os,null),r.a.createElement("h4",null,"All Users"),r.a.createElement("div",{className:"d-none d-lg-flex row user-management__column-labels"},r.a.createElement("h5",{className:"col-12 col-lg-3"},"Email"),r.a.createElement("h5",{className:"col-12 col-lg-2"},"Last Login"),r.a.createElement("h5",{className:"col-12 col-lg-2"},"Type"),r.a.createElement("h5",{className:"col-12 col-lg-1"},"Login"),r.a.createElement("h5",{className:"col-12 col-lg-1"},"Status")),this.buildUsersList()))}}]),a}(n.Component),ms=Object(l.b)((function(e){return Object(d.a)({},e.userManagement)}),(function(e){return Object(i.b)({_getAllShopUsers:$l},e)}))(is),ds=function(e){var t=e.platform;return r.a.createElement("div",{className:"settings-tab settings-tab--user-management"},r.a.createElement("div",{className:"settings-tile-container"},r.a.createElement(ms,{platform:t})))},us=function(){return function(e){e(Oe({type:"GET_SHOP_PREFERENCES_REQ",payload:{}})),e({type:"GET_SHOP_PREFERENCES_PROCESSING",payload:{}})}},ps=function(e){return function(t){t(Oe({type:"SET_SHOP_PREFERENCES_REQ",payload:{preferences:e}}))}},_s=function(e){var t=e.offState,a=e.toggleFunction,n=e.currentValue,o=e.title,c=function(){return a(n,t)},l={transition:"left 200ms ease-in-out"},s={entering:{left:"33px"},entered:{left:"33px"},exiting:{left:"2px"},exited:{left:"2px"}};return r.a.createElement("div",{className:"registrable-product-switch"},r.a.createElement("div",{className:"registrable-product-switch-title"},o),r.a.createElement(Ht.a,{in:e.on,timeout:200},(function(t){return r.a.createElement("div",{onClick:c,className:e.on?"toggle-onlyRegistrable toggle-onlyRegistrable--on":"toggle-onlyRegistrable toggle-onlyRegistrable--off"},r.a.createElement("div",{className:"toggle-onlyRegistrable__dot",style:Object(d.a)(Object(d.a)({},l),s[t])}))})))},hs=function(e){var t=e.pageName,a=e.editRegistrableProducts;return r.a.createElement("div",{className:"waw-settings__header-section"},r.a.createElement("div",{className:"waw-settings__header-section-description"},r.a.createElement("h2",null,"".concat(t," Settings")),r.a.createElement("p",null,"Configure your ".concat(t.toLowerCase()," form for your shop below"))),"Registration"===t&&r.a.createElement("div",null,r.a.createElement(Mt.a,{to:"/products",className:"waw-settings__header-section-registrable-products-button",onClick:a},"Edit Registrable Products")))},Es=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;return Object(je.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.props._getShopPreferences(),e.props._getProductRegistrationsExport(e.props.shopId)},e.editRegistrableProducts=function(){e.props._toggleViewRegistrableProducts(!0)},e.handleRegistrationCsvExport=function(){e.csvLinkRef.current.link.click()},e._toggleCollectSerialNumber=function(t,a){var n="hidden";"hidden"===a&&"hidden"===t?n="optional":"optional"===a&&(n="optional"===t?"required":"optional"),e.props._setShopPreferences({collectSerialNumber:n})},e.csvLinkRef=Object(n.createRef)(),e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this.props,t=e.page,a=e.collectSerialNumber,n=e.productRegistrationsExport,o=e.loading,c=(new Date).toLocaleDateString().replace(/\//g,"_"),l="".concat(c,"_product_registrations.csv"),s="registrations"===t?"Registration":"Warranty Anywhere";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"settings-tab settings-tab--waw"},o||!t?r.a.createElement(ut.l,{className:"waw-settings__loading",dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{pageName:s,editRegistrableProducts:this.editRegistrableProducts}),"registrations"===t&&r.a.createElement("div",{className:"waw-settings__body"},r.a.createElement("div",{className:"waw-settings__body_serial-number-section"},r.a.createElement("div",{className:"waw-settings__body_serial-number-toggle"},r.a.createElement("h3",null,"Collect Serial Number"),r.a.createElement(_s,{toggleFunction:this._toggleCollectSerialNumber,offState:"hidden",currentValue:a,on:"hidden"!==a})),"hidden"!==a&&r.a.createElement("div",{className:"waw-settings__body_serial-number-toggle"},r.a.createElement("div",{className:"waw-settings__body_serial-number-toggle-optional"},r.a.createElement("p",null,"Is this a required field?")),r.a.createElement(_s,{toggleFunction:this._toggleCollectSerialNumber,offState:"optional",on:"optional"!==a,currentValue:a})))))),n.length>0&&"registrations"===t&&r.a.createElement("div",{className:"actions-container waw-settings"},r.a.createElement(ut.j,{id:"registrations-export",position:"right",label:r.a.createElement("div",{className:"actions-container__tooltip__text"},"Export Product Registrations"),hideIndicator:!0},r.a.createElement("div",{onClick:this.handleRegistrationCsvExport,className:"actions-container__button","data-tip":!0,"data-for":"registrations-export"},r.a.createElement("img",{className:"actions-container__button__image",alt:"Export product registrations",src:"/images/download.svg"})))),r.a.createElement(Do.CSVLink,{ref:this.csvLinkRef,className:"hidden-link",filename:l,data:n}))}}]),a}(n.Component),gs=Object(l.b)((function(e){return{usesCheckoutWidget:e.customize.usesCheckoutWidget,showRegistrationPage:e.customize.showRegistrationPage,collectSerialNumber:e.preferences.collectSerialNumber,shopId:e.auth.shopId,loading:e.preferences.loading,productRegistrationsExport:e.productRegistrations.productRegistrationsExport}}),(function(e){return Object(i.b)({_getShopPreferences:us,_setShopPreferences:ps,_getProductRegistrationsExport:po,_toggleViewRegistrableProducts:_o},e)}))(Es),fs=function(e){var t=e.accountType,a=e.location,o=e.platform,c=e._getCTAInfo,l=e.waw.showRegistrationPage;Object(n.useEffect)((function(){c()}),[]);var s=[];switch(t){case"admin":s=mc;break;case"basic":default:s=dc}var i="";l&&(i="registrations");var m=a.pathname.split("/"),d=m[m.length-1];return r.a.createElement("div",{className:"page-layout"},r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"settings__title"},r.a.createElement("h1",null,"Settings"),r.a.createElement("br",null)),r.a.createElement("div",{className:"settings__header"},s.map((function(e){return r.a.createElement(hc,{isActive:uc[e]===d,key:e,tabType:e})})),"admin"===t&&i&&r.a.createElement(hc,{isActive:uc[i]===d,key:i,tabType:i})),r.a.createElement(Le.a,null,r.a.createElement(xe.a,{exact:!0,path:"/settings",render:function(){return r.a.createElement(ic.a,{to:"/settings/account"})}}),r.a.createElement(xe.a,{path:"/settings/account",render:function(){return r.a.createElement(kc,{accountType:t,platform:o})}}),r.a.createElement(xe.a,{path:"/settings/user-management",render:function(){return"admin"===t?r.a.createElement(ds,{platform:o}):r.a.createElement(ic.a,{to:"/settings/account"})}}),r.a.createElement(xe.a,{path:"/settings/integrations",render:function(){return"admin"===t?r.a.createElement(ql,{platform:o}):r.a.createElement(ic.a,{to:"/settings/account"})}}),r.a.createElement(xe.a,{path:"/settings/registrations",render:function(){return"admin"===t?r.a.createElement(gs,{page:i}):r.a.createElement(ic.a,{to:"/settings/account"})}}))))},bs=Object(Fe.a)(Object(l.b)((function(e){return{accountType:e.auth.accountType,platform:e.auth.platform,waw:{showRegistrationPage:e.customize.showRegistrationPage}}}),(function(e){return Object(i.b)({_getCTAInfo:_a},e)}))(fs)),vs=function(){return{type:"BACK_TO_CUSTOMER_SEARCH",payload:{}}},ys=function(){return{type:"BACK_TO_ORDER_SEARCH",payload:{}}},Ns=function(e,t,a){return function(n){n({type:"CUSTOMERS_PROCESSING",payload:{}}),n(Oe({type:"SEARCH_CUSTOMERS_REQ",payload:{shopId:e,searchString:t,searchType:a}}))}},Os=function(e){return{type:"SET_SEARCH_TYPE",payload:e}},Cs=function(e){return{type:"SELECT_CUSTOMER",payload:e}},Ss=function(e){var t=e.shopId,a=e.contact,n=e.contactType,r=e.customerId;return function(e){e({type:"CUSTOMERS_PROCESSING",payload:{}}),e(Oe({type:"GET_CUSTOMER_ORDERS_REQ",payload:{shopId:t,contact:a,contactType:n,customerId:r}}))}},Is=function(e){return{type:"SELECT_ORDER",payload:e}},Rs=function(e){return{type:"SELECT_REGISTRATION",payload:e}},Ps=function(e,t){return function(a){a({type:"CUSTOMERS_PROCESSING",payload:{}}),a(Oe({type:"GET_ORDER_DETAILS_REQ",payload:{orderId:e,shopId:t}}))}},Ts=function(e,t){return function(a){a(Oe({type:"SAVE_LINE_ITEM_SERIAL_NUMBER_REQ",payload:{lineItemId:e,serialNumber:t}}))}},ws=function(e,t){return function(a){a({type:"SAVE_CONTRACT_SALE_SERIAL_NUMBER",payload:{}}),a(Oe({type:"SAVE_CONTRACT_SALE_SERIAL_NUMBER_REQ",payload:{contractSaleId:e,serialNumber:t}}))}},js=function(e,t,a,n){return function(r){r({type:"PRODUCT_DELIVERY_DATE_PROCESSING",payload:{}}),r(Oe({type:"UPDATE_PRODUCT_DELIVERY_DATE_REQ",payload:{orderId:e,lineItemId:t,newDate:a,quantity:n}}))}},ks=function(){return{type:"SHOW_RESEND_SALE_EMAIL",payload:{}}},As=function(){return{type:"CANCEL_RESEND_SALE_EMAIL",payload:{}}},Ds=function(e,t,a){return{type:"UPDATE_CONTACT_RESEND_SALE_EMAIL",payload:{contact:e,isValid:t,contactType:a}}},Ls=function(e,t,a,n){return function(r){r({type:"RESEND_SALE_EMAIL_SUBMIT_PROCESSING",payload:{}}),r(Oe({type:"RESEND_SALE_EMAIL_SUBMIT_REQ",payload:{shopId:e,saleId:t,contact:a,contactType:n}}))}},xs=function(){return{type:"SHOW_RESEND_PP_EMAIL",payload:{}}},Fs=function(){return{type:"CANCEL_RESEND_PP_EMAIL",payload:{}}},Ms=function(e,t,a){return function(n){n({type:"RESEND_PP_EMAIL_SUBMIT_PROCESSING",payload:{}}),n(Oe({type:"RESEND_PP_EMAIL_SUBMIT_REQ",payload:{orderId:e,lineItemIds:t,contact:a}}))}},Us=function(e,t){return{type:"SHOW_DISPLAY_CLAIM_HISTORY",payload:{warrantyType:e,data:t}}},Gs=function(){return{type:"CANCEL_DISPLAY_CLAIM_HISTORY",payload:{}}},Bs=function(e,t){return function(a){a({type:"GET_ALL_CLAIMS_ON_SALE_PROCESSING",payload:{}}),a(Oe({type:"GET_ALL_CLAIMS_ON_SALE_REQ",payload:{data:e,warrantyType:t}}))}},Hs=function(e,t){return{type:"SHOW_FILE_COP_CLAIM",payload:{info:t,type:e}}},Ws=function(){return{type:"CANCEL_FILE_COP_CLAIM",payload:{}}},Vs=function(e,t,a){return function(n){n({type:"GET_COP_SALE_INFO_FOR_CLAIM_PROCESSING",payload:{}}),n(Oe({type:"GET_COP_SALE_INFO_FOR_CLAIM_REQ",payload:{dataForDetailsQuery:e,claimType:t,shopId:a}}))}},Ks=function(e,t){return{type:"UPDATE_FILE_COP_CLAIM_INPUT",payload:{name:e,value:t}}},zs=function(e){return{type:"SHOW_FILE_COP_CLAIM_RESOLUTION_FORM",payload:{claimId:e}}},Ys=function(e,t,a,n){return function(r){r({type:"FILE_COP_CLAIM_SUBMIT_PROCESSING",payload:{}}),r(Oe({type:"FILE_COP_CLAIM_SUBMIT_REQ",payload:{claimData:e,shopClaimSettings:a,supportingInfo:t,contractSaleInfo:n}}))}},Qs=function(){return{type:"SHOW_BULK_COP_CONTRACT_SALE",payload:{}}},qs=function(){return{type:"CANCEL_BULK_COP_CONTRACT_SALE",payload:{}}},$s=function(e,t){return function(a){a({type:"BULK_COP_CONTRACT_SALE_PROCESSING",payload:{}}),a(Oe({type:"GET_BULK_COP_CONTRACT_SALE_REQ",payload:{clydeOrderId:e,lineItemIds:t}}))}},Xs=function(e,t,a){return{type:"SELECT_BULK_COP_CONTRACT_SALE_CONTRACT",payload:{lineItemId:e,idx:t,selectedContract:a}}},Zs=function(e){return{type:"SELECT_ALL_BULK_COP_CONTRACT_SALE_CONTRACTS",payload:e}},Js=function(e,t){return function(a){a({type:"BULK_COP_CONTRACT_SALE_SUBMIT_PROCESSING",payload:{}}),a(Oe({type:"BULK_COP_CONTRACT_SALE_SUBMIT_REQ",payload:{clydeOrderId:e,sales:t}}))}},ei=function(e,t){return{type:"SHOW_CANCEL_CONTRACT",payload:{saleId:e,purchaseSource:t}}},ti=function(){return{type:"CANCEL_CANCEL_CONTRACT",payload:{}}},ai=function(e,t,a,n){return function(r){r({type:"CANCEL_CONTRACT_SUBMIT_PROCESSING",payload:{}}),r(Oe({type:"CANCEL_CONTRACT_SUBMIT_REQ",payload:{saleId:e,orderId:t,shopId:a,issueShopifyRefund:n}}))}},ni=function(e,t,a,n){return function(r){r({type:"CANCEL_CONTRACT_SUBMIT_PROCESSING",payload:{}}),r(Oe({type:"CANCEL_PP_CONTRACT_SUBMIT_REQ",payload:{saleId:e,orderId:t,shopId:a,issueShopifyRefund:n}}))}},ri=function(e,t){return{type:"POPULATE_CUSTOMERS_STATE_WITH_NEW_ORDER_INFO",payload:{orderId:e,customerInfo:t}}},oi=function(){return{type:"SHOW_CHANGE_ORDER_CUSTOMER",payload:{}}},ci=function(e,t){return{type:"SHOW_UPDATE_OEM",payload:{saleId:e,oemWarrantyLength:t}}},li=function(e){return function(t){t({type:"SEND_HI_CLYDE_REFERRAL_PROCESSING",payload:{}}),t(Oe({type:"SEND_HI_CLYDE_REFERRAL_REQ",payload:{saleId:e}}))}},si=function(e){return function(t){t({type:"RECEIPT_PROCESSING",payload:{}}),t(Oe({type:"GET_RECEIPT_FILE_REQ",payload:{contractSaleId:e}}))}},ii=function(){return{type:"RESET_RECEIPT_FILE",payload:{}}},mi=function(){return{type:"SHOW_NEW_ORDER_MODAL",payload:{}}},di=function(){return{type:"HIDE_NEW_ORDER_MODAL",payload:{}}},ui=function(){return{type:"HIDE_CATALOGUE_MODAL",payload:{}}},pi=function(e,t){return{type:"UPDATE_NEW_ORDER_CART_PRICE",payload:{itemIdx:e,newPrice:t}}},_i=function(e,t){return{type:"UPDATE_NEW_ORDER_CART_QUANTITY",payload:{itemIdx:e,newQuantity:t}}},hi=function(e,t){return{type:"UPDATE_NEW_ORDER_INPUT",payload:{name:e,value:t}}},Ei=function(){return{type:"MOVE_TO_NEW_ORDER_CART_STEP",payload:{}}},gi=function(){return{type:"MOVE_TO_NEW_ORDER_CUSTOMER_STEP",payload:{}}},fi=function(e,t){return{type:"UPDATE_NEW_ORDER_CUSTOMER_INPUT",payload:{name:e,value:t}}},bi=function(e){return function(t){t({type:"NEW_ORDER_PRODUCT_COUNT_PROCESSING",payload:{}}),t(Oe({type:"NEW_ORDER_PRODUCT_COUNT_REQ",payload:{shopId:e}}))}},vi=function(e,t){return function(a){a({type:"NEW_ORDER_PRODUCT_SEARCH_PROCESSING",payload:{}}),a(Oe({type:"NEW_ORDER_PRODUCT_SEARCH_REQ",payload:{searchString:e,pageNumber:t||1}}))}},yi=function(e){return{type:"UPDATE_NEW_ORDER_CART",payload:e}},Ni=function(e,t,a){return function(n){n({type:"NEW_ORDER_SUBMIT_PROCESSING",payload:{}}),n(Oe({type:"NEW_ORDER_SUBMIT_REQ",payload:{cart:e,customerInfo:t,sendPpEmail:a}}))}},Oi=function(){return{type:"FINISH_NEW_ORDER",payload:{}}},Ci=function(e){var t=e.customers,a=e.isProcessing,n=e.selectCustomerClick,o=e.selectCustomerKey,c=e.search,l=e.searchType,s=e.searchSubmitted,i=e.platform;return s&&t.length?r.a.createElement("section",{className:"customers__list"},r.a.createElement("div",{className:"customers__list__table-header"},r.a.createElement("div",{className:"customers__list__table-header__row",key:"clt-header"},r.a.createElement("div",{className:"customers__list__table-header__row__cell-left"},"Contact"),r.a.createElement("div",{className:"customers__list__table-header__row__cell-center"},"lineItemSerialNumber"===l?"Line Item Serial Number":"Date Of Last Purchase"),"Shopify"===i&&r.a.createElement("div",{className:"customers__list__table-header__row__cell-right"},"Order Names"))),a?r.a.createElement("div",{className:"customers__list__table-body customers__list__table-body--loading"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"})):r.a.createElement("div",{className:"customers__list__table-body"},t.map((function(e,t){return r.a.createElement("div",{"data-test":"customerRow-".concat(t),className:"customers__list__table-body__row",tabIndex:"0",onClick:function(t){return n(t,e)},onKeyDown:function(t){return o(t,e)},key:"clt-".concat(t)},r.a.createElement("div",{className:(a=e.contact,gt()("customers__list__table-body__row__cell-left",{"alert-text":!a}))},e.contact||"Missing Customer Information"),r.a.createElement("div",{className:"customers__list__table-body__row__cell-center"},"lineItemSerialNumber"===l?e.searchedSerialNumber:$n(e.lastPurchase)),"Shopify"===i&&r.a.createElement("div",{className:"customers__list__table-body__row__cell-right"},e.merchantOrderIds.slice(0,3).map((function(t,a){return r.a.createElement("span",{key:a,style:t===c&&"merchantOrderId"===l?{fontWeight:"bold"}:{}},2===a?t:"".concat(t,", "),e.merchantOrderIds.length>3&&2===a&&"...")}))));var a})))):r.a.createElement("section",{className:"customers__list"},r.a.createElement("div",{className:"customers__list__table-body customers__list__search-results-none"},s&&!a?r.a.createElement("div",{className:"customers__list__search-results"},r.a.createElement("svg",{width:"76",height:"75",viewBox:"0 0 76 75",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{x:"0.5",width:"75",height:"75",rx:"37.5",fill:"#EEEEEE"}),r.a.createElement("path",{d:"M38 40V29.1667",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("circle",{cx:"38",cy:"45.8333",r:"1.66667",fill:"black"}),r.a.createElement("path",{d:"M38 54.1667C47.2048 54.1667 54.6667 46.7047 54.6667 37.5C54.6667 28.2952 47.2048 20.8333 38 20.8333C28.7953 20.8333 21.3334 28.2952 21.3334 37.5C21.3334 46.7047 28.7953 54.1667 38 54.1667Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),r.a.createElement("h1",null,"No Customers Found"),r.a.createElement("p",null,"We couldn't locate your customer, try searching something different")):r.a.createElement("div",{className:"customers__list__search-results"},r.a.createElement("svg",{width:"76",height:"75",viewBox:"0 0 76 75",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{x:"0.5",width:"75",height:"75",rx:"37.5",fill:"#EEEEEE"}),r.a.createElement("path",{d:"M36.3333 49.1667C43.6971 49.1667 49.6667 43.1971 49.6667 35.8333C49.6667 28.4695 43.6971 22.5 36.3333 22.5C28.9695 22.5 23 28.4695 23 35.8333C23 43.1971 28.9695 49.1667 36.3333 49.1667Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("path",{d:"M53 52.5L45.75 45.25",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),r.a.createElement("h1",null,"Search Customers"),r.a.createElement("p",null,"Use search above to locate your customer"))))},Si=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={search:"",searchKey:new Date,searchTypeName:"",searchSubmitted:!1},e.handleValueChange=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.handleSearchTypeChange=function(t){e.setSearchTypeName(t.target.value),e.setState({searchKey:new Date}),e.props._setSearchType(t.target.value)},e.setSearchTypeName=function(t){var a;switch(t||"email"){case"email":a="email address";break;case"phone":a="phone number";break;case"externalId":a="unique ID";break;case"merchantOrderId":a="your order ID";break;case"lineItemSerialNumber":a="a line item's serial number";break;case"orderId":a="an order ID";break;default:a="email"}e.setState({searchTypeName:a})},e.runSearch=function(t){if(t.preventDefault(),e.state.search){var a=e.state.search,n=e.props,r=n.customers.searchType,o=n.shopId;(0,n._searchCustomers)(o,a,r),e.setState({searchSubmitted:!0})}},e.handleSelectCustomerClick=function(t,a){e.props._selectCustomer(a)},e.handleSelectCustomerKey=function(t,a){" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),e.props._selectCustomer(a))},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.props.customers.searchType;this.setSearchTypeName(e)}},{key:"render",value:function(){var e=this.props,t=e.customers,a=e.platform,n=e.handleRegistrationCsvExport,o=e._showNewOrderModal,c=[{value:"email",text:"Email Address"},{value:"phone",text:"Phone Number"},{value:"externalId",text:"Unique Identifier"},{value:"merchantOrderId",text:"Merchant Order ID",applicable:"Shopify"===a},{value:"lineItemSerialNumber",text:"Serial Number",applicable:t.canSerialNumberSearch},{value:"orderId",text:"Order ID"}].filter((function(e){return void 0===e.applicable||e.applicable}));return r.a.createElement("div",{className:"customers"},r.a.createElement("div",{className:"customers__header__section"},r.a.createElement("div",{className:"customers__header"},r.a.createElement("h1",null,"Customers"),r.a.createElement("p",null,"View all customers who\u2019ve purchased a contract or registered their product(s).")),r.a.createElement("div",{className:"customers__header__buttons"},r.a.createElement(ut.a,{id:"customers__header__button-registrations",className:"customers__header__button-registrations",onClick:function(){n()}},"Export Registrations"),r.a.createElement(ut.a,{className:"customers__header__button-create-order",onClick:function(){o()}},"New order"))),r.a.createElement("div",{className:"customers__input"},r.a.createElement("h2",null,"Search by:"),r.a.createElement("form",{className:"customers__input__form",onSubmit:this.runSearch},r.a.createElement(ut.g,{options:c,defaultValue:t.searchType,name:"searchType",className:"customers__input__form__search-type",defaultLabel:"Search By...",onChange:this.handleSearchTypeChange}),r.a.createElement(ut.i,{type:"text",search:!0,id:"customers__input__form__search",className:"customers__input__form__search",name:"search",key:this.state.searchKey,onChange:this.handleValueChange,placeholder:"Search by ".concat(this.state.searchTypeName)}))),r.a.createElement(Ci,{selectCustomerClick:this.handleSelectCustomerClick,selectCustomerKey:this.handleSelectCustomerKey,customers:t.customers,isProcessing:t.isProcessing,platform:a,search:this.state.search,searchType:t.searchType,searchSubmitted:this.state.searchSubmitted}))}}]),a}(n.Component),Ii=Object(l.b)((function(e){return{customers:e.customers,shopId:e.auth.shopId}}),(function(e){return Object(i.b)({_searchCustomers:Ns,_setSearchType:Os,_selectCustomer:Cs,_showNewOrderModal:mi},e)}))(Si),Ri=function(e){var t=e.claimsOverView,a=e.isProcessing,n=e.ordersOverview,o=e.selectedCustomer,c=1===n.totalEligibleProductCount?"eligible product":"eligible products",l=1===n.totalActiveContractCount?"active contract":"active contracts",s=1===n.totalFulfilledContractCount?"fulfilled contract":"fulfilled contracts",i=1===n.totalCancelledContractCount?"cancelled contract":"cancelled contracts",m=1===n.totalExpiredContractCount?"expired contract":"expired contracts",d=1===t.claimsOpen?"Claim open":"Claims open",u=1===t.claimsResolved?"Claim resolved":"Claims resolved",p=1===t.claimsDenied?"Claim denied":"Claims denied",_="No account";o.hasHiClydeAccount&&o.emailVerified?_="Account verified":o.hasHiClydeAccount&&(_="Account unverified");var h=gt()({"alert-text":!o.contact});return r.a.createElement("section",{className:"orders__info"},r.a.createElement("div",{"data-test":"customerContactCard",className:"orders__info__content orders__info__content--contact"},r.a.createElement("h6",null,"Customer Info"),r.a.createElement("ul",null,r.a.createElement("li",{className:h},o.contact||"Missing Customer Information Update via Shopify Admin"),o.phone&&o.phone!==o.contact&&r.a.createElement("li",null,o.phone))),r.a.createElement("div",{className:"orders__info__content orders__info__content--contracts"},r.a.createElement("h6",null,"Contracts Overview"),a?r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement("ul",null,r.a.createElement("li",null,"".concat(n.totalEligibleProductCount," ").concat(c)),r.a.createElement("li",null,"".concat(n.totalActiveContractCount," ").concat(l)),r.a.createElement("li",null,"".concat(n.totalFulfilledContractCount," ").concat(s)),r.a.createElement("li",null,"".concat(n.totalCancelledContractCount," ").concat(i)),r.a.createElement("li",null,"".concat(n.totalExpiredContractCount," ").concat(m)))),r.a.createElement("div",{className:"orders__info__content orders__info__content--claims"},r.a.createElement("h6",null,"Claims Overview"),a?r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement("ul",null,r.a.createElement("li",null,"".concat(t.claimsOpen," ").concat(d)),r.a.createElement("li",null,"".concat(t.claimsResolved," ").concat(u)),r.a.createElement("li",null,"".concat(t.claimsDenied," ").concat(p)))),r.a.createElement("div",{className:"orders__info__content orders__info__content--hiclyde"},r.a.createElement("h6",null,"hiclyde.com"),a?r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement("ul",null,r.a.createElement("li",null,_))))},Pi=function(e){var t=e.order,a=e.highlightRow,n=e.idx,o=e.selectOrderClick,c=e.selectOrderKey,l=e.platform,s=$n(t.orderDate),i=t.productNames.join(", "),m=t.merchantOrderId&&"Shopify"===l?"".concat(t.merchantOrderId," / ").concat(t.orderId):t.orderId,d=gt()("orders__list__table-body__row",{"orders__list__table-body__row--test":t.isTest,"orders__list__table-body__row--highlighted":a});return r.a.createElement("div",{key:"clt-".concat(n),"data-test":"orderRow-".concat(n),className:d,tabIndex:"0",onClick:function(e){return o(e,t)},onKeyDown:function(e){return c(e,t)}},r.a.createElement("div",{className:"orders__list__table-body__row__cell-id"},t.isTest&&r.a.createElement("sup",{className:"test-order-flag"},"Test"),m),r.a.createElement("div",{className:"orders__list__table-body__row__cell-date"},s),r.a.createElement("div",{"data-tip":!0,"data-for":"product-names-tip-".concat(n),className:"orders__list__table-body__row__cell-products"},r.a.createElement(ut.j,{id:"product-names-tip-".concat(n),label:r.a.createElement("div",{className:"tooltip-text"},i),hideIndicator:!0},r.a.createElement("div",{className:"order__list__table-body__row__tooltip__child"},i))),r.a.createElement("div",{className:"orders__list__table-body__row__cell-eligible"},t.eligibleProductCount),r.a.createElement("div",{className:"orders__list__table-body__row__cell-contracts"},t.activeContractCount),r.a.createElement("div",{className:"orders__list__table-body__row__cell-claims"},t.openClaims||0))},Ti=function(e){var t,a=e.orderIdsToHightlight,n=e.orders,o=e.isProcessing,c=e.selectOrderClick,l=e.selectOrderKey,s=e.platform;switch(s){case"Shopify":t="Order Name / ID";break;default:t="Order ID"}return r.a.createElement("section",{className:"orders__list"},r.a.createElement("div",{className:"orders__list__table-header"},r.a.createElement("h3",null,"Orders:"),r.a.createElement("div",{className:"orders__list__table-header__row",key:"olt-header"},r.a.createElement("div",{className:"orders__list__table-header__row__cell-id"},t),r.a.createElement("div",{className:"orders__list__table-header__row__cell-date"},"Order Date"),r.a.createElement("div",{className:"orders__list__table-header__row__cell-products"},"Products"),r.a.createElement("div",{className:"orders__list__table-header__row__cell-eligible"},"Eligible Products"),r.a.createElement("div",{className:"orders__list__table-header__row__cell-contracts"},"Active Contracts"),r.a.createElement("div",{className:"orders__list__table-header__row__cell-claims"},"Open Claims"))),o?r.a.createElement("div",{className:"orders__list__table-body orders__list__table-body--loading"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"})):r.a.createElement("div",{className:"orders__list__table-body"},n.map((function(e,t){var n=a.includes(e.orderId);return r.a.createElement(Pi,{order:e,highlightRow:n,idx:t,key:e.clydeOrderId,selectOrderClick:c,selectOrderKey:l,platform:s})}))))},wi=function(e){return e?O()(e).utc().format("MM/DD/YYYY"):"Unknown"},ji=function(e){var t=e.productRegistration,a=e.selectRegistrationClick,n=e.selectRegistrationKey,o=t.productName,c=t.placeOfPurchase,l=t.purchasedContractsCount,s=t.openClaimsCount,i=t.productPurchaseDate,m=t.serialNumber,d=wi(i),u=gt()("product-registrations__list__table-body__row",{"product-registrations__list__table-body__row__clickable":l>0});return r.a.createElement("div",{className:u,tabIndex:"0",onClick:function(){l>0&&a(t)},onKeyDown:function(e){l>0&&n(e,t)}},r.a.createElement("div",{className:"product-registrations__list__table-body__row__cell-product"},o),r.a.createElement("div",{className:"product-registrations__list__table-body__row__cell-date"},d),r.a.createElement("div",{className:"product-registrations__list__table-body__row__cell-pop"},c),r.a.createElement("div",{className:"product-registrations__list__table-body__row__cell-serial-number"},m||"--"),r.a.createElement("div",{className:"product-registrations__list__table-body__row__cell-contracts"},l),r.a.createElement("div",{className:"product-registrations__list__table-body__row__cell-claims"},s))},ki=function(e){var t=e.productRegistrations,a=e.isProcessing,n=e.selectRegistrationClick,o=e.selectRegistrationKey;return r.a.createElement("section",{className:"product-registrations__list"},r.a.createElement("div",{className:"product-registrations__list__table-header"},r.a.createElement("h3",null,"Products Registered:"),r.a.createElement("div",{className:"product-registrations__list__table-header__row"},r.a.createElement("div",{className:"product-registrations__list__table-header__row__cell-product"},"Product"),r.a.createElement("div",{className:"product-registrations__list__table-header__row__cell-date"},"Date of Purchase"),r.a.createElement("div",{className:"product-registrations__list__table-header__row__cell-pop"},"Place of Purchase"),r.a.createElement("div",{className:"product-registrations__list__table-header__row__cell-serial-number"},"Serial Number"),r.a.createElement("div",{className:"product-registrations__list__table-header__row__cell-contracts"},"Purchased Contracts"),r.a.createElement("div",{className:"product-registrations__list__table-header__row__cell-claims"},"Open Claims"))),a?r.a.createElement("div",{className:"orders__list__table-body orders__list__table-body--loading"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"})):r.a.createElement("div",{className:"product-registrations__list__table-body"},t.map((function(e,t){return r.a.createElement(ji,{key:t,productRegistration:e,selectRegistrationClick:n,selectRegistrationKey:o})}))))},Ai=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSelectOrderClick=function(t,a){e.props._selectOrder(a)},e.handleSelectOrderKey=function(t,a){" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),e.props._selectOrder(a))},e.handleSelectRegistrationClick=function(t){e.props._selectRegistration(t)},e.handleSelectRegistrationKey=function(t,a){" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),e.props._selectRegistration(a))},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.props,t=e.customers.selectedCustomer,a=e.shopId;(0,e._getCustomerOrders)({shopId:a,contact:t.contact,contactType:t.dbContactType,customerId:t.customerId})}},{key:"render",value:function(){var e=this.props.customers,t=e.claimsOverView,a=e.isProcessing,n=e.orders,o=e.ordersOverview,c=e.productRegistrations,l=e.selectedCustomer,s=this.props.platform;return r.a.createElement("div",{className:"orders"},r.a.createElement("div",{className:"orders__back"},r.a.createElement("button",{"data-test":"backToCustomers",className:"button-nostyle orders__back__button",onClick:this.props._backToCustomerSearch},r.a.createElement("div",{className:"orders__back__button__image"},r.a.createElement("div",{className:"orders__back__button__image__arrow"})),r.a.createElement("span",{className:"orders__back__button__text"},"Back to customers"))),r.a.createElement("div",{className:"orders__header"},r.a.createElement("div",{className:"orders__header__title"},r.a.createElement("span",null,"All orders for"),r.a.createElement("h1",null,o.customerName))),r.a.createElement(Ri,{claimsOverView:t,isProcessing:a,ordersOverview:o,selectedCustomer:l}),r.a.createElement(Ti,{orderIdsToHightlight:l.orderIdsToHightlight,orders:n,isProcessing:a,selectOrderClick:this.handleSelectOrderClick,selectOrderKey:this.handleSelectOrderKey,platform:s}),(null===c||void 0===c?void 0:c.length)>0&&r.a.createElement(ki,{productRegistrations:c,isProcessing:a,selectRegistrationClick:this.handleSelectRegistrationClick,selectRegistrationKey:this.handleSelectRegistrationKey}))}}]),a}(n.Component),Di=Object(l.b)((function(e){return{customers:e.customers}}),(function(e){return Object(i.b)({_getCustomerOrders:Ss,_backToCustomerSearch:vs,_selectOrder:Is,_selectRegistration:Rs},e)}))(Ai),Li=a(320),xi=a.n(Li),Fi=function(e){var t=e.selectedOrder,a=t.address,o=t.orderClaims,c=t.cartLink,l=t.transferHistory,s=e.isProcessing,i=e.selectedCustomer,m=e.selectedOrder,d=e.receiptUrl,u=e.receiptProcessing,p=e._getReceiptFile,_=e._resetReceiptFile,h=Object(n.useRef)(!1);Object(n.useEffect)((function(){h.current&&d&&(window.open(d,"_blank","noopener,noreferrer"),h.current=!1,_())}),[d]);var g=1===m.eligibleProductCount?"eligible product":"eligible products",f=1===m.activeContractCount?"active contract":"active contracts",b=1===m.expiredContractCount?"expired contract":"expired contracts",v=1===m.cancelledContractCount?"cancelled contract":"cancelled contracts",y=1===m.fulfilledContractCount?"fulfilled contract":"fulfilled contracts",N=1===o.claimsOpen?"Claim open":"Claims open",C=1===o.claimsResolved?"Claim resolved":"Claims resolved",S=1===o.claimsDenied?"Claim denied":"Claims denied",I="Missing Customer Information Update via Shopify Admin",R=function(e){return gt()({"alert-text":e===I})};return r.a.createElement("div",{className:"products-view__info"},r.a.createElement("div",{className:"products-view__info__content products-view__info__content--contact"},r.a.createElement("h6",null,"Contact on Order"),r.a.createElement("ul",null,[m.fullName,i.contact].reduce((function(e,t){return t?[].concat(Object(E.a)(e),[t]):e.includes(I)?e:[].concat(Object(E.a)(e),[I])}),[]).map((function(e){return r.a.createElement("li",{key:e,className:R(e)},e)})))),r.a.createElement("div",{className:"products-view__info__content products-view__info__content--address"},r.a.createElement("h6",null,"Address on Order"),s?r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement("ul",null,r.a.createElement("li",null,"".concat(a.address1)),a.address2?r.a.createElement("li",null,"".concat(a.address2)):null,r.a.createElement("li",null,a.city,", ",a.province," ",a.country))),r.a.createElement("div",{className:"products-view__info__content products-view__info__content--contracts"},r.a.createElement("h6",null,"Contracts on Order"),r.a.createElement("ul",null,r.a.createElement("li",null,"".concat(m.eligibleProductCount," ").concat(g)),r.a.createElement("li",null,"".concat(m.activeContractCount," ").concat(f)),r.a.createElement("li",null,"".concat(m.fulfilledContractCount," ").concat(y)),r.a.createElement("li",null,"".concat(m.cancelledContractCount," ").concat(v)),r.a.createElement("li",null,"".concat(m.expiredContractCount," ").concat(b))),l.length>0&&r.a.createElement("div",{className:"products-view__info__content--transfer"},r.a.createElement("span",null,r.a.createElement("strong",null,"Transferred on:")," ",O()(l[0].transferDate).format("MMMM DD, YYYY")," "),r.a.createElement("span",null,"By: ",l[0].customerEmail))),r.a.createElement("div",{className:"products-view__info__content products-view__info__content--claims"},r.a.createElement("h6",null,"Claims on Order"),s?r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement("ul",null,r.a.createElement("li",null,"".concat(o.claimsOpen," ").concat(N)),r.a.createElement("li",null,"".concat(o.claimsResolved," ").concat(C)),r.a.createElement("li",null,"".concat(o.claimsDenied," ").concat(S)))),r.a.createElement("div",{className:"products-view__info__content products-view__info__content--hiclyde"},r.a.createElement("h6",null,"hiclyde.com"),r.a.createElement("ul",null,r.a.createElement("li",null,i.hasHiClydeAccount?"Active account":"No account")),m.eligibleProductCount>0&&c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:"products-view__info__content--hiclyde__pp-header"},"Post Purchase Link"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:c,rel:"noopener noreferrer",target:"_blank"},c)))),!!m.receiptFile&&r.a.createElement(ut.a,{className:"products-view__download-button",processing:u,onClick:function(){var e=m.receiptSaleId,t=m.saleId;p(e||t),h.current=!0}},"Download Receipt")))},Mi=a(695),Ui={value:"inProcess",label:"Submitted"},Gi={value:"underClydeReview",label:"Under Review"},Bi={value:"underAdminReview",label:"Under Review"},Hi={value:"hiClydeHandoff",label:"Partner Managing Claim"},Wi={value:"needMoreInfo",label:"More Info Requested"},Vi={value:"customerWithdrawn",label:"Customer Withdrawn"},Ki={value:"approved",label:"Approved"},zi={value:"denied",label:"Not Covered"},Yi={value:"resolutionInitiated",label:"Resolution Initiated"},Qi={value:"resolutionInProgress",label:"Resolution In Progress"},qi={value:"resolutionOrdered",label:"Resolution Ordered"},$i={value:"resolutionDelayed",label:"Resolution Delayed"},Xi={value:"resolutionFulfilled",label:"Resolution Fulfilled"},Zi=[Ui,Gi,Wi],Ji=[Ui,Gi,Bi,Hi,Wi,Vi,Ki,zi,Yi,Qi,qi,$i,Xi,{value:"resolutionPending",label:"Resolution Pending"},{value:"repairInitiated",label:"Repair Initiated"}],em=function(e,t){return e.find((function(e){return e.value===t}))},tm=function(e){var t=em(Ji,e);return t?t.label:"None"},am=function(e){return e===Ki.value},nm=function(e){return e===zi.value},rm=[{value:"arrivedDamaged",label:"Filed within limited warranty period",explanation:"The claim is not covered because it was filed within limited warranty period."},{value:"contractFullyUtilized",label:"Contract fully utilized",explanation:"The claim is not covered because the contract has been fully utilized."},{value:"failedUsageQuestion",label:"Customer failed a usage question",explanation:"The claim is not covered because customer failed a usage question."},{value:"lossOrTheft",label:"Lost and theft are not covered",explanation:"Lost and theft are not covered."},{value:"manualDenial",label:"Not covered after Clyde review",explanation:"The claim is not covered after being reviewed by Clyde."},{value:"nonAdhContract",label:"Accidental damage not covered",explanation:"Accidental damage is not covered."},{value:"withinLimitedWarranty",label:"Filed within limited warranty period",explanation:"The claim is not covered because it was filed within limited warranty period."}],om=function(e,t){var a=rm.find((function(t){return t.value===e}));return a?t?a.explanation:a.label:"None"},cm=function(e){var t=e.customClass,a=e.id,n=e.isOpen,o=e.onClick,c="button-nostyle cop-button-small",l="cop-button-small__arrow";return n?(c+=" cop-button-small--open",l+=" cop-button-small__arrow--open"):(c+=" cop-button-small--closed",l+=" cop-button-small__arrow--closed"),c+=t?" ".concat(t):"",r.a.createElement("button",{type:"button",id:a,className:c,onClick:o,onKeyDown:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:l}))},lm=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={toggleOpen:!1,buttonOpen:!1,saleSerialNumber:""},e.handleToggle=function(t){t.stopPropagation(),"click"!==t.type&&" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),e.state.toggleOpen&&(t.currentTarget.blur(),e.setState({buttonOpen:!1})),e.setState((function(e){return{toggleOpen:!e.toggleOpen}})))},e.handleButtonToggle=function(t){t.stopPropagation(),e.state.buttonOpen&&t.currentTarget.blur(),e.setState((function(e){return{buttonOpen:!e.buttonOpen}})),e.props.setOpenActionButton(e.props.id)},e.handleGoToClaimDetail=function(){var t=e.props,a=t.sale.claimId;t.history.push("/claims/".concat(a)),e.setState({buttonOpen:!1})},e.handleShowClaimHistory=function(){var t=e.props,a=t.sale;(0,t._showDisplayClaimHistory)("extendedWarranty",a),e.setState({buttonOpen:!1})},e.handleFileClaim=function(){var t=e.props,a=t.sale,n=t.index,r=t.manageOEMWarranty,o=t._showFileClaim,c=O()(a.purchaseDate).utc().add(a.oemWarrantyLength,"months").isAfter(O()())&&a.lineItemId&&r;a.warrantyType=c?"limitedWarranty":"extendedWarranty",o(a.warrantyType,Object(d.a)(Object(d.a)({},a),{},{index:n})),e.setState({buttonOpen:!1})},e.handleUpdateOEM=function(){var t=e.props,a=t.sale,n=a.saleId,r=a.oemWarrantyLength;(0,t._showUpdateOEM)(n,r),e.setState({buttonOpen:!1})},e.handleCancelContract=function(t,a){var n=e.props,r=n.sale,o=r.saleId,c=r.source,l=n._showCancelContract;a&&(l(o,c),e.setState({buttonOpen:!1}))},e.handleTextChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.submitNewSerialNumber=function(){var t=e.props,a=t.sale.saleId;(0,t._saveNewContractSaleSerialNumber)(a,e.state.saleSerialNumber)},e}return Object(ke.a)(a,[{key:"componentDidUpdate",value:function(e){e.openActionButtonId&&!this.props.openActionButtonId&&this.setState({buttonOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.sale,o=t.sale.coverageStartType,c=t.seriaNumberProcessing,l=t.manageOEMWarranty,s=this.state,i=s.buttonOpen,m=s.toggleOpen,d=this.props.isActive&&!("ext"===o&&!l),u=n.sku?n.sku:"Unknown",p=n.productName?n.productName:"Unknown",_=n.claimDate?qn(n.claimDate):"None",h=d?"active":"expired",E="".concat(h,"-contract-details__toggle--").concat(m?"open":"closed"),g="".concat(h,"-contract-details-claim claim__font--").concat(n.claimState);g+=m?"".concat(h,"-contract-details-claim--open"):"";var f=O()(n.purchaseDate).utc().add(n.oemWarrantyLength,"months"),b=f.isAfter(O()()),v=b?"Expires ".concat(qn(f.utc().toISOString())):"Expired ".concat(qn(f.utc().toISOString())),y=o&&"dop"===o.toLowerCase()?"Expires on ".concat(qn(n.expiresDate)):"Expires ".concat(n.term," year").concat(n.term>1?"s":""," from end of manufacturer's warranty"),N=b&&n.lineItemId&&l?"limited warranty claim":"claim",C=n.source,S="Cancel this contract",I=!0;switch(n.claimId&&(S="Cannot cancel contracts with claims",I=!1),n.source){case"HI":C="hiclyde.com";break;case"checkoutWidget":C="Warranty Anywhere Widget"}var R,P=n.claimId||d,T=null;n.refunded?(R="Cancelled on ".concat(qn(n.refundedDate)),T=r.a.createElement("li",null,"Refund amount: ",n.purchasePrice)):R="Expired on ".concat(qn(n.expiresDate));var w=gt()("button-nostyle active-contract-details__menu__button",{"active-contract-details__menu__button--disabled":n.fullyReplaced});return r.a.createElement("div",{className:"".concat(h,"-contract-details"),id:a},r.a.createElement("div",{className:"".concat(h,"-contract-details__toggle ").concat(E),onClick:this.handleToggle,onKeyDown:this.handleToggle,tabIndex:"0",role:"button","aria-expanded":m},r.a.createElement("div",{className:"".concat(h,"-contract-details__toggle__left")},r.a.createElement("h6",null,p),r.a.createElement("span",null,"| ",n.term," Year")),r.a.createElement("div",{className:"".concat(h,"-contract-details__toggle__right")},r.a.createElement("div",null,r.a.createElement("span",null,"Most Recent Claim Status: "),r.a.createElement("span",{className:g},tm(n.claimState))),P&&r.a.createElement(cm,{id:"".concat(a,"_action_button"),customClass:"".concat(h,m?"-contract-details-button--open":"-contract-details-button"),onClick:this.handleButtonToggle,isOpen:i}))),i&&r.a.createElement("div",{className:"".concat(h,"-contract-details__menu")},r.a.createElement("ul",null,n.claimId&&r.a.createElement("li",null,r.a.createElement("button",{className:"button-nostyle ".concat(h,"-contract-details__menu__button"),onClick:this.handleShowClaimHistory},"See claim history for this contract")),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("button",{className:w,onClick:this.handleFileClaim},n.fullyReplaced?"Cannot submit a ".concat(N," \u2014 Contract fully replaced"):"Submit a ".concat(N," on this contract"))),r.a.createElement("li",null,r.a.createElement("button",{className:gt()("button-nostyle active-contract-details__menu__button",{"active-contract-details__menu__button--disabled":!I}),onClick:function(t){return e.handleCancelContract(t,I)}},S))),r.a.createElement("li",null,r.a.createElement("button",{className:"button-nostyle active-contract-details__menu__button",onClick:this.handleUpdateOEM},"Update this contract's OEM")))),r.a.createElement(Mi.a,{className:"".concat(h,"-contract-details__collapse"),isOpen:m},r.a.createElement("div",{className:"collapse-padding-wrapper"},r.a.createElement("div",{className:"".concat(h,"-contract-details__collapse__content")},r.a.createElement("div",{className:"".concat(h,"-contract-details__collapse__content__expires")},r.a.createElement("h6",null,d?y:R),r.a.createElement("ul",null,!d&&T,r.a.createElement("li",null,"Source: ",d?C:n.source)),r.a.createElement("div",null,"Manuf. Warranty:"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u2013 ",n.oemWarrantyLength," month(s)"),r.a.createElement("li",null,"\u2013 ",v))),r.a.createElement("div",{className:"".concat(h,"-contract-details__collapse__content__info")},r.a.createElement("h6",null,"Contract Info"),r.a.createElement("ul",null,r.a.createElement("li",null,"ID: ",n.hashedSaleId),r.a.createElement("li",null,"SKU: ",u))),r.a.createElement("div",{className:"".concat(h,"-contract-details__collapse__content__sale")},r.a.createElement("h6",null,"Contract Sale"),r.a.createElement("ul",null,r.a.createElement("li",null,"DOP: ",qn(n.purchaseDate)),r.a.createElement("li",null,"Price: $",n.purchasePrice),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,"Serial Number: ",c?r.a.createElement(ut.l,{dotColor:"clydeBlack",size:"small"}):n.serialNumber||"N/A"),r.a.createElement("li",null,r.a.createElement(ut.i,{className:"".concat(h,"-contract-details__collapse__content__sale__serial-number"),name:"saleSerialNumber",onChange:this.handleTextChange,onSubmit:this.submitNewSerialNumber,placeholder:"Update serial number",maxLength:40}))))),r.a.createElement("div",{className:"".concat(h,"-contract-details__collapse__content__claim")},r.a.createElement("h6",null,"Claim Status"),r.a.createElement("ul",null,r.a.createElement("li",null,"hiClydeHandoff"===n.claimState?"Updated:":"Submitted:"," ",_),r.a.createElement("li",{className:"".concat(h,"-contract-details-claim")},"Status: ",tm(n.claimState))))))))}}]),a}(n.Component),sm=Object(l.b)((function(e){return{seriaNumberProcessing:e.customers.actionsProcessing.saveNewContractSaleSerialNumber}}),(function(e){return Object(i.b)({_saveNewContractSaleSerialNumber:ws,_showDisplayClaimHistory:Us,_showFileClaim:Hs,_showCancelContract:ei,_showUpdateOEM:ci},e)}))(lm),im=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={openActionButtonId:"",toggleOpen:!1},e.handleToggle=function(t){t.stopPropagation(),"click"!==t.type&&" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),e.state.toggleOpen&&t.currentTarget.blur(),e.setState((function(e){return{openActionButtonId:"",toggleOpen:!e.toggleOpen}})))},e.setOpenActionButton=function(t){e.setState({openActionButtonId:t})},e.getRefundReasonCopy=function(e,t){switch(e){case"location":return"State/Country not serviceable.";case"license":return"".concat(t," licensing needs updating to purchase contract.");case"quantity":return"Multiple contracts attached in error to product.";case"missingProduct":return"Contract does not match product(s) in order.";default:return""}},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.contract,n=t.contract,o=n.oemWarrantyLength,c=n.oemWarrantyExpirationDate,l=t.history,s=t.isActive,i=t.manageOEMWarranty,m=t.isCanceled,d=t.province,u=this.state,p=u.openActionButtonId,_=u.toggleOpen,h=a.variantName?"".concat(a.productName,": ").concat(a.variantName):a.productName||"Unknown",E=a.productSku||"Unknown",g=a.productPurchasePrice?"$".concat(a.productPurchasePrice.toFixed(2)):"Unknown",f=a.categoryName||"Clyde Contract Terms & Conditions",b=s?"active":"expired",v=O.a.utc(),y=O.a.utc(c).diff(v,"days")>0,N=o>0&&y;return r.a.createElement("div",{className:"".concat(b,"-contracts")},r.a.createElement("div",{className:"".concat(b,"-contracts__toggle"),onClick:this.handleToggle,onKeyDown:this.handleToggle,tabIndex:"0",role:"button","aria-expanded":_},r.a.createElement("div",{className:"".concat(b,"-contracts__toggle__left ").concat(N?"oem":"")},r.a.createElement(Mo.a,{alt:h,src:[a.productImage,"/images/default-image.svg"]}),r.a.createElement("div",{className:"".concat(b,"-contracts__toggle__left__content")},r.a.createElement("span",{className:"".concat(b,"-contracts__toggle__left__name")},h," (",a.contractSales.length,")"),a.manufacturer&&r.a.createElement("span",{className:"cop-item-copy cop-item-copy--grey"},a.manufacturer),r.a.createElement("span",{className:"".concat(b,"-contracts__toggle__left__link")},r.a.createElement("a",{onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},href:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?pid=").concat(a.productId,"&cid=").concat(a.contractId),target:"_blank",rel:"noopener noreferrer"},f)))),r.a.createElement("div",{className:"".concat(b,"-contracts__toggle__right ").concat(N?"oem":"")},r.a.createElement("div",{className:"".concat(b,"-contracts__toggle__right__content ").concat(N?"oem":"")},r.a.createElement("span",null,"SKU: ",E),r.a.createElement("span",null,"Product Price: ",g),a.contractSales[0].refunded&&r.a.createElement("span",null,"Auto Refund: ",a.contractSales[0].refundReason?"true":"false"),a.contractSales[0].refundReason&&r.a.createElement("span",null,"Refund Reason: ",this.getRefundReasonCopy(a.contractSales[0].refundReason,d))),r.a.createElement("div",{className:"".concat(b,"-contracts__toggle__right__content ").concat(N?"oem":"")},r.a.createElement("span",null,"Purchase Date: ",$n(a.productPurchaseDate)),a.productShipDate&&r.a.createElement("span",null,"Ship Date: ",qn(a.productShipDate)),r.a.createElement("span",null,"Delivery Date: ",a.productDeliveryDate?qn(a.productDeliveryDate):"Pending")),N&&!m&&r.a.createElement("div",{className:"".concat(b,"-contracts__toggle__right__content badge-container ").concat(N?"oem":"")},r.a.createElement("span",{className:"limited-warranty-badge-contract"},"Under Limited Warranty"),i&&r.a.createElement("span",{className:"limited-warranty-expiration-contract"},"Coverage Expires: ",qn(c))))),r.a.createElement(Mi.a,{className:"".concat(b,"-contracts__collapse"),isOpen:_},r.a.createElement("div",{className:"collapse-padding-wrapper"},r.a.createElement("div",{className:"".concat(b,"-contracts__collapse__content")},a.contractSales.map((function(t,a){var n="".concat(t.saleId,"_acsi_").concat(a);return r.a.createElement(sm,{key:n,history:l,id:n,index:a,sale:t,openActionButtonId:n===p,setOpenActionButton:e.setOpenActionButton,isActive:s,manageOEMWarranty:i})}))))))}}]),a}(n.Component),mm=a(321),dm=a.n(mm),um=function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}},t),r.a.createElement("div",null,e))},pm=function(e){var t=e.onChange,a=e.value,n=e.addTag,o=e.disabled,c=gt()("cop-item-serial__input",{"cop-item-serial__input--disabled":o});return r.a.createElement(ut.i,{className:c,disabled:o,onChange:t,onSubmit:function(e){n(e.target.value)},placeholder:o?"Serial numbers full":"Add a serial number",value:a})},_m=function(e){var t=e.classNameRemove,a=e.disabled,n=e.getTagDisplayValue,o=e.idx,c=e.item,l=e.onRemove,s=e.tag;return r.a.createElement("div",{className:"cop-item-serial__tag cop-item-serial__tag--".concat(c),key:o,onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}},r.a.createElement("span",{className:"cop-item-serial__tag__value",key:o},n(s)),!a&&r.a.createElement("button",{className:"button-no-style cop-item-serial__tag__remove-button ".concat(t),onClick:function(){l(o)}},"\u2715"))},hm=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={toggleOpen:!1,buttonOpen:!1},e.handleButtonToggle=function(t){t.stopPropagation();var a=e.props,n=a.id,r=a._setOpenActionButton;e.state.buttonOpen&&t.currentTarget.blur(),e.setState((function(e){return{buttonOpen:!e.buttonOpen}})),r(n)},e.handleFileClaim=function(){var t=e.props,a=t.product,n=t.index,r=t.isEligible,o=t._showFileClaim;a.index=n.toString(),a.isEligible=r,o("limitedWarranty",a),e.setState({buttonOpen:!1})},e.handleShowClaimHistory=function(){var t=e.props,a=t.product,n=t._showDisplayClaimHistory,r=t.index;a.index=r.toString(),n("limitedWarranty",a),e.setState({buttonOpen:!1})},e.getEligibilityCopy=function(e){var t=e.name,a=e.daysLeft,n=e.daysLeftText,o=e.oemWarrantyLengthText,c=e.isEligible,l=e.dateStillNeeded;return c?r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,t),r.a.createElement("span",null," | Eligible for ",a," ",l?"".concat(n," from ").concat(l):"more ".concat(n))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,t),r.a.createElement("span",null," | ",o," Limited Warranty "))},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this.props,t=e.product,a=t.daysLeft,n=t.dateStillNeeded,o=t.name,c=t.oemWarrantyLength,l=e.id,s=e.selectedClaim,i=e.warrantyStatus,m=e.isEligible,d=e.manageOEMWarranty,u=this.state,p=u.toggleOpen,_=u.buttonOpen,h=d,E=s&&Object.keys(s).length>0,g=h?"active":"expired",f=1===a?"day":"days",b=1===c?"1 month":"".concat(c," months"),v=gt()("contract-item-details-claim claim__font--".concat(s.claimState),{"contract-item-details-claim--open":p}),y=gt()("button-no-style active-contract-details__menu__button",{"cop-section-actions__menu__button--disabled":s.fullyReplaced});return r.a.createElement("div",{className:"product-oem-warranty"},r.a.createElement("div",{className:"product-oem-warranty__left"},this.getEligibilityCopy({name:o,daysLeft:a,daysLeftText:f,oemWarrantyLengthText:b,isEligible:m,dateStillNeeded:n})),r.a.createElement("div",{className:"product-oem-warranty__right"},d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",null,"Claim Status: "),r.a.createElement("span",{className:v},tm(s.claimState))),(h||E)&&r.a.createElement(cm,{id:"".concat(l,"_action_button"),customClass:p?"".concat(i,"-contract-details-button--open"):"active-contract-details-button",onClick:this.handleButtonToggle,isOpen:_}))),_&&r.a.createElement("div",{className:"".concat(g,"-contract-details__menu")},r.a.createElement("ul",null,E&&r.a.createElement("li",null,r.a.createElement("button",{className:"button-nostyle ".concat(g,"-contract-details__menu__button"),onClick:this.handleShowClaimHistory},"See claim history for this contract")),h&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("button",{className:y,onClick:this.handleFileClaim},s.fullyReplaced?"Cannot file claim \u2014 Warranty fully replaced":"File a claim on this product"))))))}}]),a}(n.Component),Em=Object(l.b)((function(e){return{seriaNumberProcessing:e.customers.actionsProcessing.saveNewContractSaleSerialNumber}}),(function(e){return Object(i.b)({_saveNewContractSaleSerialNumber:ws,_showDisplayClaimHistory:Us,_showFileClaim:Hs,_showCancelContract:ei,_showUpdateOEM:ci},e)}))(hm),gm=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(e){var n;return Object(je.a)(this,a),(n=t.call(this,e)).handleToggle=function(e){e.stopPropagation(),"click"!==e.type&&" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),n.state.toggleOpen&&e.currentTarget.blur(),n.setState((function(e){return{toggleOpen:!e.toggleOpen}})))},n.setOpenActionButtonId=function(e){n.setState({openActionButtonId:e})},n.handleDateSelect=function(e){var t=n.props,a=t.clydeOrderId,r=t.deliveryDateProcessing,o=t.product,c=t.updateDeliveryDate;r||c(a,o.lineItemId,e,n.state.quantityDelivered)},n.handleValueChange=function(e){"quantityDelivered"===e.target.name&&e.target.value>n.props.product.quantity||n.setState(Object(b.a)({},e.target.name,e.target.value))},n.toggleCalendarOpen=function(e){e.stopPropagation(),n.state.calendarOpen&&e.currentTarget.blur(),n.setState((function(e){return{calendarOpen:!e.calendarOpen}}))},n.buildProductRows=function(e){for(var t=n.props,a=t.product,o=t.product,c=o.lineItemId,l=o.claims,s=t.isEligible,i=t.manageOEMWarranty,m=[],d=function(e){var t=l.find((function(t){return t.lineItemIndex===(e+1).toString()}))||{},o="".concat(c,"_epi_").concat(e);m.push(r.a.createElement(Em,{id:o,index:e+1,product:a,selectedClaim:t,warrantyStatus:!0,isEligible:s,manageOEMWarranty:i,_setOpenActionButton:n.setOpenActionButtonId}))},u=0;u<e;u++)d(u);return m},n.handleSerialNumberChange=function(e){var t=n.props,a=t.product,r=a.lineItemId,o=a.lineItemSerialNumber,c=a.quantity,l=t._saveLineItemSerialNumber,s=o||[];if(e.length>s.length&&c-s.length<1)return;l(r,e)},n.state={toggleOpen:!1,calendarOpen:!1,quantityDelivered:1,serialNumbers:[],openActionButtonId:""},n}return Object(ke.a)(a,[{key:"render",value:function(){var e=this.props,t=e.product,a=e.product,n=a.oemWarrantyLength,o=a.oemWarrantyExpirationDate,c=e.isEligible,l=e.manageOEMWarranty,s=this.state,i=s.calendarOpen,m=s.toggleOpen,d=t.quantity?t.quantity:0,u=t.sku||"Unknown",p=t.purchasePrice?"$".concat(t.purchasePrice.toFixed(2)):"Unknown",_=O.a.utc(),h=O.a.utc(o).diff(_,"days")>0,E=n>0&&h,g=E?"oem":"",f=1===t.oemWarrantyLength?"1 month":"".concat(t.oemWarrantyLength," months"),b=1===t.daysLeft?"day":"days",v=c?"eligible":"ineligible",y=c?"epi":"ipi",N=t.contractCategoryName?t.contractCategoryName:"Clyde Contract Terms & Conditions",C="".concat(v,i?"-products__calendar--open":"-products__calendar--closed");return r.a.createElement("div",{className:"".concat(v,"-products"),id:"".concat(t.lineItemId,"_").concat(y)},r.a.createElement("div",{className:"".concat(v,"-products__content"),onClick:this.handleToggle,onKeyDown:this.handleToggle,tabIndex:"0",role:"button","aria-expanded":m},r.a.createElement("div",{className:"".concat(v,"-products__content__left ").concat(g)},r.a.createElement(Mo.a,{alt:t.name,src:[t.image,"/images/default-image.svg"]}),r.a.createElement("div",{className:"".concat(v,"-products__content__left__body")},r.a.createElement("span",{className:"".concat(v,"-products__content__left__name")},t.variantName?"".concat(t.name,": ").concat(t.variantName):t.name," (",t.quantity,")"),t.manufacturer&&r.a.createElement("span",{className:"cop-item-copy cop-item-copy--grey"},t.manufacturer),c&&r.a.createElement("span",null,r.a.createElement("a",{onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()},href:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?cid=").concat(t.contracts[0]&&t.contracts[0].contractId),target:"_blank",rel:"noopener noreferrer"},N)),t.asurionIneligibleMessage&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{className:"cop-item-copy cop-item-copy--purple"},t.asurionIneligibleMessage)),t.guardsmanIneligibleMessage&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{className:"cop-item-copy cop-item-copy--purple"},t.guardsmanIneligibleMessage)))),r.a.createElement("div",{className:"".concat(v,"-products__content__right ").concat(g)},r.a.createElement("div",{className:"".concat(v,"-products__content__right__body ").concat(g)},r.a.createElement("span",null,"SKU: ",u),r.a.createElement("span",null,"Purchase Price: ",p),r.a.createElement("span",null,"Manuf. warranty: ",f),r.a.createElement(dm.a,{value:t.lineItemSerialNumber||[],onChange:this.handleSerialNumberChange,renderLayout:um,renderInput:function(e){return r.a.createElement(pm,Object.assign({},e,{disabled:t.lineItemSerialNumber&&t.quantity-t.lineItemSerialNumber.length<1}))},renderTag:function(e){return r.a.createElement(_m,Object.assign({},e,{idx:e.key,item:"product"}))}})),r.a.createElement("div",{className:"".concat(v,"-products__content__right__body ").concat(g)},r.a.createElement("span",null,"Purchase Date: ",qn(t.purchaseDate)),t.shipDate&&r.a.createElement("span",null,"Ship Date: ",qn(t.shipDate)),r.a.createElement("span",{className:gt()("all-products__delivery-date",{"all-products__delivery-date--active":i})},"Delivery Date: ",t.deliveryDate?qn(t.deliveryDate):"Pending",r.a.createElement(cm,{onClick:this.toggleCalendarOpen,isOpen:i,customClass:"delivery-date"})),r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"".concat(v,"-products__calendar ").concat(C)},r.a.createElement(Mn.Calendar,{onChange:this.handleDateSelect,minDate:O()(t.purchaseDate).utc(),maxDate:O()().utc()})),r.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},r.a.createElement("span",null,"Quantity Delivered:"),r.a.createElement(ut.i,{className:"all-products__quantity-delivered",name:"quantityDelivered",value:this.state.quantityDelivered,onChange:this.handleValueChange,typeNumber:!0}))),E&&r.a.createElement("div",{className:"".concat(v,"-products__content__right__body badge-container ").concat(g)},r.a.createElement("span",{className:"limited-warranty-badge"},"Under Limited Warranty"),l&&r.a.createElement("span",{className:"limited-warranty-expiration"},"Coverage Expires: ",qn(o))))),r.a.createElement(Mi.a,{className:"eligible-products__collapse",isOpen:m},r.a.createElement("div",{className:"collapse-padding-wrapper"},r.a.createElement("div",{className:"eligible-products__collapse__content"},this.buildProductRows(d,b,f)))))}}]),a}(n.Component),fm=function(e){var t=e.options,a=e.customClasses,o=e.modalOpen,c=Object(n.useState)(!1),l=Object(an.a)(c,2),s=l[0],i=l[1];Object(n.useEffect)((function(){i(!1)}),[o]);var m=function(e){e.stopPropagation(),s&&(e.preventDefault(),e.currentTarget.blur()),i(!s)};return t.length>0&&r.a.createElement("div",{className:"clyde-dropdown-button"},r.a.createElement("button",{className:"".concat(a," button-nostyle clyde-dropdown-button__button"),onClick:function(e){return m(e)}},"Actions ",r.a.createElement("div",{className:"clyde-dropdown-button__arrow".concat(s?" clyde-dropdown-button__arrow--open":"")})),s&&r.a.createElement("ul",{className:"clyde-dropdown-button__menu"},t.map((function(e){return r.a.createElement("li",{key:e.text},r.a.createElement("button",{className:"button-nostyle clyde-dropdown-button__menu__button",onClick:function(t){return function(e,t){m(e),t.clickHandler(e)}(t,e)}},e.text))}))))},bm=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).buildOrderActions=function(){var t=e.props,a=t.customers.selectedOrder,n=a.saleIds,r=a.openClaims,o=t._showResendSaleEmail,c=t._showChangeOrderCustomer,l=[];return n.length&&l.push({text:"Resend contract confirmation email",clickHandler:function(){o()}}),r||l.push({text:"Transfer order to new customer",clickHandler:c}),l},e.buildEligibleBulkActions=function(){var t=e.props,a=t.customers.selectedCustomer,n=t._showBulkContractSale,r=[];return"email"===a.dbContactType&&r.push({text:"Choose eligible products to add contracts to",clickHandler:function(){n()}}),r},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.props,t=e.customers.selectedOrder,a=e._getOrderDetails,n=e._getShopSettings;a(t.clydeOrderId),n()}},{key:"render",value:function(){var e=this.props,t=e.customers,a=t.actionsProcessing,n=t.isProcessing,o=t.ordersOverview,c=t.selectedCustomer,l=t.selectedOrder,s=t.modal,i=t.receipt,m=i.url,d=i.processing,u=e.shopSettings.manageOEMWarranty,p=e.history,_=e.step,h=e._saveLineItemSerialNumber,E=e._backToOrderSearch,g=e._updateDeliveryDate,f=e._getReceiptFile,b=e._resetReceiptFile,v="products"===_&&this.buildOrderActions(),y="products"===_&&this.buildEligibleBulkActions(),N=l.merchantOrderId?"".concat(l.merchantOrderId," / ").concat(l.orderId):l.orderId;return r.a.createElement("section",{className:"products-view"},r.a.createElement("div",{className:"products-view__back"},r.a.createElement("button",{className:"button-nostyle products-view__back__button",onClick:E},r.a.createElement("div",{className:"products-view__back__button__image","data-test":"backButton"},r.a.createElement("div",{className:"products-view__back__button__image__arrow"})),r.a.createElement("span",{className:"products-view__back__button__text"},"Back to ",o.customerName,"'s orders"))),r.a.createElement("div",{className:"products-view__header"},r.a.createElement("div",{className:"products-view__header__title"},r.a.createElement("h1",null,"Order ",N),r.a.createElement("span",null,"Purchase Date:",$n(l.orderDate||l.contractEffectiveDate))),v.length>0?r.a.createElement(fm,{customClasses:"cop-button-big",options:v,modalOpen:!!s}):null),r.a.createElement(Fi,{isProcessing:n,selectedCustomer:c,selectedOrder:l,step:_,receiptUrl:m,receiptProcessing:d,_getReceiptFile:f,_resetReceiptFile:b}),r.a.createElement("section",{className:"products-view__active-contracts"},r.a.createElement("div",{className:"products-view__active-contracts__header"},r.a.createElement("h2",null,"ACTIVE CONTRACTS (",l.activeContractCount,")")),l.activeContracts.map((function(e,t){return r.a.createElement(im,{key:"ac-".concat(t),contract:e,history:p,manageOEMWarranty:u,isActive:!0,province:l.address.province})}))),r.a.createElement("section",{className:"products-view__eligible-products"},r.a.createElement("div",{className:"products-view__eligible-products__header"},r.a.createElement("h2",null,"ELIGIBLE PRODUCTS (",l.eligibleProductCount,")"),l.eligibleProductCount>0&&y.length>0&&r.a.createElement(fm,{customClasses:"cop-button-big",options:y,modalOpen:!!s})),l.eligibleProducts.map((function(e,t){return r.a.createElement(gm,{key:"ep-".concat(t),product:e,clydeOrderId:l.clydeOrderId,updateDeliveryDate:g,deliveryDateProcessing:a.updateDeliveryDate,isEligible:!0,_saveLineItemSerialNumber:h,manageOEMWarranty:u})}))),r.a.createElement("section",{className:"products-view__expired-contracts"},r.a.createElement("div",{className:"products-view__expired-contracts__header"},r.a.createElement("h2",null,"FULFILLED CONTRACTS (",l.fulfilledContractCount,")")),l.fulfilledContracts.map((function(e,t){return r.a.createElement(im,{key:"cc-".concat(t),contract:e,history:p,isActive:!1,manageOEMWarranty:u,province:l.address.province})}))),r.a.createElement("section",{className:"products-view__expired-contracts"},r.a.createElement("div",{className:"products-view__expired-contracts__header"},r.a.createElement("h2",null,"CANCELLED CONTRACTS (",l.cancelledContractCount,")")),l.cancelledContracts.map((function(e,t){return r.a.createElement(im,{key:"cc-".concat(t),contract:e,history:p,isActive:!1,isCanceled:!0,manageOEMWarranty:u,province:l.address.province})}))),r.a.createElement("section",{className:"products-view__expired-contracts"},r.a.createElement("div",{className:"products-view__expired-contracts__header"},r.a.createElement("h2",null,"EXPIRED CONTRACTS (",l.expiredContractCount,")")),l.expiredContracts.map((function(e,t){return r.a.createElement(im,{key:"ec-".concat(t),contract:e,history:p,isActive:!1,manageOEMWarranty:u,province:l.address.province})}))),r.a.createElement("section",{className:"products-view__ineligible-products"},r.a.createElement("div",{className:"products-view__ineligible-products__header"},r.a.createElement("h2",null,"INELIGIBLE PRODUCTS (",l.ineligibleProductCount,")")),l.ineligibleProducts.map((function(e,t){return r.a.createElement(gm,{key:"ip-".concat(t),product:e,clydeOrderId:l.clydeOrderId,updateDeliveryDate:g,deliveryDateProcessing:a.updateDeliveryDate,isEligible:!1,_saveLineItemSerialNumber:h,manageOEMWarranty:u})}))),l.meta&&r.a.createElement("section",{className:"products-view__meta"},r.a.createElement("div",{className:"products-view__meta__header"},r.a.createElement("h2",null,"ORDER METADATA")),r.a.createElement(xi.a,{data:l.meta})))}}]),a}(n.Component),vm=Object(l.b)((function(e){return{customers:e.customers,shopSettings:e.autopilot}}),(function(e){return Object(i.b)({_getOrderDetails:Ps,_getReceiptFile:si,_resetReceiptFile:ii,_saveLineItemSerialNumber:Ts,_backToOrderSearch:ys,_updateDeliveryDate:js,_showResendSaleEmail:ks,_showResendPpEmail:xs,_showBulkContractSale:Qs,_showChangeOrderCustomer:oi,_getShopSettings:io},e)}))(bm),ym=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleConfirmResend=function(){var t=e.props,a=t.order,n=t.resendSaleEmail,r=t._confirmResendSaleEmail;if(n.validContact){var o=a.saleIds[0],c=n.contact;"phone"===n.contactType&&(c=c.replace(/-/g,"")),r(a.shopId,o,c,n.contactType)}},e.handleChangeContact=function(t){var a=e.props._updateContactResendSaleEmail,n=t.target.value,r=e.validateContact(n);a(n,r.isValid,r.contactType)},e.validateContact=function(e){var t,a=!1;return/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i.test(e)&&(a=!0,t="email"),/^\d{10}$/.test(e.replace(/-/g,""))&&(a=!0,t="phone"),{isValid:a,contactType:t}},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.resendSaleEmail.contact,a=e._updateContactResendSaleEmail,n=this.validateContact(t);a(t,n.isValid,n.contactType)}},{key:"render",value:function(){var e=this.props,t=e.resendSaleEmail,a=e._cancelResendSaleEmail;return r.a.createElement("div",{className:"cop-modal-background",onClick:a},r.a.createElement("div",{className:"cop-modal-foreground cop-resend-modal",onClick:function(e){return e.stopPropagation()}},"finish"!==t.step?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-modal-header"},r.a.createElement("button",{className:"button-nostyle cop-modal-header__cancel",onClick:a},"\u2715"),r.a.createElement("p",{className:"cop-modal-header__explanation"},"This will send a copy of the contract information from this order to the customer"),r.a.createElement("h1",null,"Re-send contract info")),r.a.createElement("div",{className:"cop-modal-content cop-resend-modal"},r.a.createElement("div",{className:"cop-resend-modal__contact"},r.a.createElement("label",{htmlFor:"resend-contact-input",className:gt()("cop-resend-modal__label",{"cop-resend-modal__label--invalid":!t.validContact})},"Send to (email/phone):"),r.a.createElement(ut.i,{id:"resend-contact-input",className:"cop-resend-modal__input",onChange:this.handleChangeContact,value:t.contact}))),r.a.createElement("div",{className:"cop-modal-actions"},r.a.createElement(ut.a,{id:"confirm-resend-button",className:"cop-modal-actions__confirm",onClick:this.handleConfirmResend,processing:t.processing,disabled:!t.validContact,visible:!0,successText:"Sent"},"Confirm and send"))):r.a.createElement("div",{className:"cop-modal-foreground__action-complete"},r.a.createElement(ut.n,{text:"Sent!",onSuccess:a}))))}}]),a}(n.Component),Nm=Object(l.b)((function(e){return{order:e.customers.selectedOrder,resendSaleEmail:e.customers.resendSaleEmail}}),(function(e){return Object(i.b)({_cancelResendSaleEmail:As,_confirmResendSaleEmail:Ls,_updateContactResendSaleEmail:Ds},e)}))(ym),Om=function(e){var t=e.order,a=e.resendPpEmail,n=e._cancelResendPpEmail;return r.a.createElement("div",{className:"cop-modal-background",onClick:n},r.a.createElement("div",{className:"cop-modal-foreground cop-resend-modal",onClick:function(e){return e.stopPropagation()}},"finish"!==a.step?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-modal-header"},r.a.createElement("button",{className:"button-nostyle cop-modal-header__cancel",onClick:n},"\u2715"),r.a.createElement("p",{className:"cop-modal-header__explanation"},"This will send an email to the customer with a link to purchase coverage on hiclyde.com"),r.a.createElement("h1",{className:"cop-modal-header__header"},"Send Post Purchase Email")),r.a.createElement("div",{className:"cop-modal-content cop-resend-modal"},r.a.createElement("div",{className:"cop-resend-modal__contact"},r.a.createElement("label",{htmlFor:"resend-contact-input",className:"cop-resend-modal__label"},"Send to (email taken from order):"),r.a.createElement(ut.i,{id:"resend-contact-input",className:"cop-resend-modal__input",disabled:!0,value:a.contact}))),r.a.createElement("div",{className:"cop-modal-actions"},r.a.createElement(ut.a,{id:"confirm-resend-button",className:"cop-modal-actions__confirm",onClick:function(){var n=t.eligibleProducts.map((function(e){return e.lineItemId}));e._confirmResendPpEmail(t.clydeOrderId,n,a.contact)},processing:a.processing,successText:"Sent"},"Confirm and send"))):r.a.createElement("div",{className:"cop-modal-foreground__action-complete"},r.a.createElement(ut.n,{text:"Sent!",onSuccess:n}))))},Cm=Object(l.b)((function(e){return{order:e.customers.selectedOrder,resendPpEmail:e.customers.resendPpEmail}}),(function(e){return Object(i.b)({_cancelResendPpEmail:Fs,_confirmResendPpEmail:Ms},e)}))(Om),Sm=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).goToClaimDetailPage=function(t){e.props.history.push("/claims/".concat(t))},e.buildClaimHistory=function(){return e.props.displayClaimHistory.claimHistory.map((function(t,a){return r.a.createElement("div",{className:"cop-claim-history__history-list__event",key:a},r.a.createElement("div",{className:"cop-claim-history__history-list__event__group"},r.a.createElement("span",null,"hiClydeHandoff"===t.claimState?"Claim last updated on":"Claim submitted on"),r.a.createElement("span",null,qn(t.submitDate))),r.a.createElement("div",{className:"cop-claim-history__history-list__event__group"},r.a.createElement("span",null,"Failure date"),r.a.createElement("span",null,qn(t.submitDate))),r.a.createElement("div",{className:"cop-claim-history__history-list__event__group"},r.a.createElement("span",null,"Current status"),r.a.createElement("span",{className:"claim__font--".concat(t.claimState)},tm(t.claimState))),r.a.createElement("div",{className:"cop-claim-history__history-list__event__group"},r.a.createElement("span",null,"Resolution cost"),r.a.createElement("span",null,t.resolutionCost?Qn(t.resolutionCost):"$0.00")),r.a.createElement("button",{className:"button-nostyle button-fakelink claims-detail-card__group__info",onClick:function(){e.goToClaimDetailPage(t.claimId)}},"Go to ",t.claimState.includes("resolve")?"Resolution":"Claim"," Details"))}))},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.displayClaimHistory,a=t.data,n=t.warrantyType;(0,e._getAllClaimsOnSale)("extendedWarranty"===n?a.saleId:a,n)}},{key:"render",value:function(){var e=this.props,t=e.customerName,a=e.displayClaimHistory,n=a.data,o=a.processing,c=e._cancelDisplayClaimHistory,l=this.buildClaimHistory();return r.a.createElement("div",{className:"cop-modal-background",onClick:c},r.a.createElement("div",{className:"cop-modal-foreground cop-modal-foreground--update-claim",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"cop-modal-header"},r.a.createElement("button",{className:"button-nostyle cop-modal-header__cancel",onClick:c},"\u2715"),r.a.createElement("p",{className:"cop-modal-header__explanation"},"Keep your customer in the loop"),r.a.createElement("h1",{className:"cop-modal-header__header"},"View claim history")),o?r.a.createElement("div",{className:"cop-claim-history cop-claim-history--loading"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"})):r.a.createElement("div",{className:"cop-modal-content cop-claim-history"},r.a.createElement("div",{className:"cop-claim__claim-info"},r.a.createElement("div",{className:"cop-claim__claim-info__left"},r.a.createElement("span",null,"Customer: ",t),n.hashedSaleId&&r.a.createElement("span",null,"Contract ID: ",n.hashedSaleId)),r.a.createElement("div",{className:"cop-claim__claim-info__right"},r.a.createElement("span",null,r.a.createElement("a",{onClick:function(e){return e.stopPropagation()},href:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?pid=").concat(n.productId,"&cid=").concat(n.contractId),target:"_blank",rel:"noopener noreferrer"},n.sku)),r.a.createElement("span",null,"Expires: ",qn(n.expiresDate)))),r.a.createElement("div",{className:"cop-claim-history__history-list"},l.length>0?l:r.a.createElement("div",{className:"cop-claim-history__history-list__event cop-claim-history__history-list__event--no-history"},r.a.createElement("span",null,"No claim history on this contract"))))))}}]),a}(n.Component),Im=Object(l.b)((function(e){return{customerName:e.customers.selectedOrder.fullName,displayClaimHistory:e.customers.displayClaimHistory}}),(function(e){return Object(i.b)({_getAllClaimsOnSale:Bs,_cancelDisplayClaimHistory:Gs},e)}))(Sm),Rm=["svgRef","title"];function Pm(){return(Pm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Tm(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var wm=function(e){var t=e.svgRef,a=e.title,n=Tm(e,Rm);return r.a.createElement("svg",Pm({width:25,height:24,viewBox:"0 0 25 24",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,Bl||(Bl=r.a.createElement("g",{clipPath:"url(#clip0_5956_2907)"},r.a.createElement("path",{d:"M16.5 16L12.5 12L8.5 16",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("path",{d:"M12.5 12V21",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("path",{d:"M20.89 18.3905C21.8653 17.8587 22.6358 17.0174 23.0798 15.9991C23.5239 14.9808 23.6162 13.8437 23.3422 12.7672C23.0682 11.6906 22.4434 10.736 21.5666 10.0539C20.6898 9.37185 19.6108 9.00121 18.5 9.00047H17.24C16.9373 7.82971 16.3731 6.74281 15.5899 5.82147C14.8067 4.90012 13.8248 4.16832 12.7181 3.68108C11.6113 3.19384 10.4085 2.96383 9.20008 3.00835C7.99164 3.05288 6.80903 3.37077 5.74114 3.93814C4.67325 4.5055 3.74787 5.30758 3.03458 6.28405C2.32129 7.26053 1.83865 8.38601 1.62294 9.57587C1.40723 10.7657 1.46407 11.989 1.78917 13.1537C2.11428 14.3185 2.6992 15.3943 3.49996 16.3005",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("path",{d:"M16.5 16L12.5 12L8.5 16",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),Hl||(Hl=r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"clip0_5956_2907"},r.a.createElement("rect",{width:24,height:24,fill:"white",transform:"translate(0.5)"})))))},jm=r.a.forwardRef((function(e,t){return r.a.createElement(wm,Pm({svgRef:t},e))})),km=(a.p,function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={fileErrors:"",formErrors:[],inputKey:new Date,supportingInfo:[]},e.handleInputChange=function(t){var a=e.props._updateFileClaimInput,n=t.target;a(n.name,n.value)},e.handleSelectChange=function(t){e.handleInputChange({target:{value:t.map((function(e){return e.value})),name:"claimIssueTypes"}})},e.handleUsageQuestionChange=function(t){var a,n=e.props._updateFileClaimInput,r=t.target,o=r.name;switch(r.value){case"yes":a=!0;break;case"no":a=!1;break;default:a=void 0}n(o,a)},e.handleFilesChange=function(t){e.setState({fileErrors:"",supportingInfo:[]});var a=t.target.files,n=[];a.length>5&&n.push("A maximum of 5 files can be added.");for(var r,o=["png","jpg","jpeg","gif","pdf"],c=0;c<a.length;c++){var l=a[c].name;if(!(r=a[c].type?null:a[c].type.split("/")[1])){var s=l.split(".");r=s[s.length-1]}-1===o.indexOf(r.toLowerCase())&&n.push("Unsupported format. Files must be in the .png, .jpg, .pdf, or .gif format."),a[c].size>5e6&&n.push("File is too large. Please use a file smaller than 5mb.")}if(n.length>0)return t.target.value=null,e.setState({fileErrors:n[0]}),!1;var i,m=Object(ne.a)(a);try{var d=function(){var t=i.value;e.toBase64(t).then((function(a){e.setState((function(e){return{supportingInfo:[].concat(Object(E.a)(e.supportingInfo),[{name:t.name,type:r,data:a}])}}))}))};for(m.s();!(i=m.n()).done;)d()}catch(u){m.e(u)}finally{m.f()}return!0},e.toBase64=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},e.handleSubmit=function(t,a){t.preventDefault();var n=e.props,r=n.fileClaim,o=r.claimData,c=o.claimType,l=o.claimIssueTypes,s=o.customerEmail,i=o.failureDate,m=o.narrative,u=o.stillFunctional,p=o.supportEmail,_=o.usedAsIntended,h=r.sale,E=r.claimType,g=r.lineItem,f=n.shopClaimSettings,b=n.orderId,v=n._confirmFileClaim,y="limitedWarranty"===E,N=[];if(!Da.a.isEmpty(s)&&Da.a.isEmail(s)||N.push("customerEmail"),!Da.a.isEmpty(p)&&Da.a.isEmail(p)||N.push("supportEmail"),l&&l.length||N.push("issueType"),y||"accidentalDamage"!==c&&"stoppedWorking"!==c||("boolean"!==typeof u&&N.push("stillFunctional"),"boolean"!==typeof _&&N.push("usedAsIntended")),(Da.a.isEmpty(i)||Da.a.isBefore(i,"2018-06-01")||Da.a.isAfter(i,a))&&N.push("failureDate"),(Da.a.isEmpty(m)||m.length>1e3)&&N.push("narrative"),N.length>0)e.setState({formErrors:N});else{var O={contractSaleId:h.saleId,claimType:c,customerEmail:s,failureDate:i,narrative:m,stillFunctional:u,supportEmail:p,usedAsIntended:_,warrantyType:E,claimIssueTypes:l},C={contractADH:h.contractADH,contractDOP:h.purchaseDate,contractSaleId:h.saleId,expiresDate:h.expiresDate};y&&(O.lineItem=Object(d.a)(Object(d.a)({},g),{},{cartId:b})),v(O,e.state.supportingInfo,f,C)}},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.fileClaim,n=a.claimData,o=a.processing,c=a.sale,l=a.submitProcessing,s=a.claimType,i=t.customerName,m=t.issueTypes,d=this.state,u=d.fileErrors,p=d.formErrors,_=d.inputKey,h=d.supportingInfo,E=new Date,g=E.getMonth()+1<10?"0".concat(E.getMonth()+1):"".concat(E.getMonth()+1),f=E.getDate()<10?"0".concat(E.getDate()):"".concat(E.getDate()),b="".concat(E.getFullYear(),"-").concat(g,"-").concat(f),v="limitedWarranty"===s,y="cop-file-claim__label",N="cop-file-claim__label cop-file-claim__label--invalid",O="cop-file-claim__narrative-char-count";O+=n.narrative.length>=1e3?" cop-file-claim__narrative-char-count--max":"";var C,S=[],I=Object(ne.a)(h);try{for(I.s();!(C=I.n()).done;){var R=C.value;S.push(R.name)}}catch(T){I.e(T)}finally{I.f()}var P=m.map((function(e){return{label:e.label,value:e}}));return o?r.a.createElement("div",{className:"cop-modal--loading"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-modal-content cop-file-claim__content"},r.a.createElement("div",{className:"cop-claim"},r.a.createElement("div",{className:"cop-claim__claim-info"},r.a.createElement("div",{className:"cop-claim__claim-info__left"},r.a.createElement("span",null,"Customer: ",i),!v&&r.a.createElement("span",null,"Contract ID: ",c.hashedSaleId)),r.a.createElement("div",{className:"cop-claim__claim-info__right"},r.a.createElement("span",null,r.a.createElement("a",{onClick:function(e){return e.stopPropagation()},href:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?pid=").concat(c.productId,"&cid=").concat(c.contractId),target:"_blank",rel:"noopener noreferrer"},c.sku)),!v&&r.a.createElement("span",null,"Expires: ",wi(c.expiresDate))))),r.a.createElement("form",{className:"cop-file-claim__form",onSubmit:function(t){return e.handleSubmit(t,b)}},r.a.createElement("div",{className:"cop-file-claim__input"},r.a.createElement("label",{htmlFor:"cop-file-claim-email",className:p.indexOf("customerEmail")>-1?N:y},"Customer Email"),r.a.createElement(ut.i,{id:"cop-file-claim-customer-email",className:"cop-file-claim-text",onChange:this.handleInputChange,name:"customerEmail",value:n.customerEmail})),r.a.createElement("div",{className:"cop-file-claim__input"},r.a.createElement("label",{htmlFor:"cop-file-claim-email",className:p.indexOf("supportEmail")>-1?N:y},"Retailer Support Email"),r.a.createElement(ut.i,{id:"cop-file-claim-support-email",className:"cop-file-claim-text",onChange:this.handleInputChange,name:"supportEmail",value:n.supportEmail})),r.a.createElement("div",{className:"cop-file-claim__input"},r.a.createElement("label",{htmlFor:"cop-file-claim-type",className:p.indexOf("issueType")>-1?N:y},"Issue Type"),r.a.createElement(ut.e,{placeholder:"Select issue types",className:"cop-file-claim__dropdown",id:"cop-file-claim-type",name:"claimType",direction:"row",onChange:this.handleSelectChange,options:P,multiple:!0})),!v&&r.a.createElement(r.a.Fragment,null,("accidentalDamage"===n.claimType||"stoppedWorking"===n.claimType)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-file-claim__input"},r.a.createElement("span",{className:p.indexOf("usedAsIntended")>-1?N:y},"Was the customer using this product as intended?"),r.a.createElement("div",{className:"cop-file-claim__input__inline"},r.a.createElement(ut.f,{checked:!0===n.usedAsIntended,id:"usedAsIntended_true",name:"usedAsIntended",value:"yes",onChange:this.handleUsageQuestionChange}),r.a.createElement("label",{htmlFor:"usedAsIntended_true",className:"cop-file-claim__radio-label"},"Yes")),r.a.createElement("div",{className:"cop-file-claim__input__inline"},r.a.createElement(ut.f,{checked:!1===n.usedAsIntended,id:"usedAsIntended_false",name:"usedAsIntended",value:"no",onChange:this.handleUsageQuestionChange}),r.a.createElement("label",{htmlFor:"usedAsIntended_false",className:"cop-file-claim__radio-label"},"No"))),r.a.createElement("div",{className:"cop-file-claim__input"},r.a.createElement("span",{className:p.indexOf("stillFunctional")>-1?N:y},"Is the product still fully functional?"),r.a.createElement("div",{className:"cop-file-claim__input__inline"},r.a.createElement(ut.f,{checked:!0===n.stillFunctional,id:"stillFunctional_true",name:"stillFunctional",value:"yes",onChange:this.handleUsageQuestionChange}),r.a.createElement("label",{htmlFor:"stillFunctional_true",className:"cop-file-claim__radio-label"},"Yes")),r.a.createElement("div",{className:"cop-file-claim__input__inline"},r.a.createElement(ut.f,{checked:!1===n.stillFunctional,id:"stillFunctional_false",name:"stillFunctional",value:"no",onChange:this.handleUsageQuestionChange}),r.a.createElement("label",{htmlFor:"stillFunctional_false",className:"cop-file-claim__radio-label"},"No"))))),r.a.createElement("div",{className:"cop-file-claim__input"},r.a.createElement("label",{htmlFor:"cop-file-claim-dof",className:p.indexOf("failureDate")>-1?N:y},"Failure Date:"),r.a.createElement("input",{type:"date",id:"cop-file-claim-dof",className:"cop-file-claim-date",onChange:this.handleInputChange,placeholder:"MM/DD/YYYY",max:b,min:"2018-06-01",name:"failureDate",value:n.failureDate})),r.a.createElement("div",{className:"cop-file-claim__input"},r.a.createElement("label",{htmlFor:"cop-file-claim-narrative",className:"cop-file-claim__input__label-narrative"},r.a.createElement("span",{className:p.indexOf("narrative")>-1?N:y},"Describe the problem:"),r.a.createElement("span",{className:O},n.narrative.length," / 1000")),r.a.createElement("textarea",{type:"textarea",id:"cop-file-claim-narrative",className:"cop-file-claim-textarea",onChange:this.handleInputChange,placeholder:"What went wrong?",maxLength:"1000",name:"narrative",value:n.narrative})),r.a.createElement("div",{className:"cop-file-claim__input"},r.a.createElement("div",{className:"cop-file-claim__input__upload"},r.a.createElement("div",{className:"cop-file-claim-upload"},r.a.createElement("input",{type:"file",multiple:!0,key:_,id:"supportingInfo",className:"cop-file-claim-upload__input",name:"supportingInfo",disabled:l,onChange:this.handleFilesChange}),r.a.createElement(jm,{className:"cop-file-claim-upload__img"}),S.length>0?r.a.createElement("ul",{className:"cop-file-claim-upload__content cop-file-claim-upload__content--files"},S.map((function(e,t){return r.a.createElement("li",{key:t},e)}))):r.a.createElement("span",{className:"cop-file-claim-upload__content cop-file-claim-upload__content--label"},"Upload Supporting Info"))),u&&r.a.createElement("span",{className:"cop-file-claim__input__upload-errors"},u)),r.a.createElement(ut.a,{id:"confirm-resend-button",className:"cop-modal-actions__confirm cop-file-claim-submit",onClick:this.handleSubmit,processing:l,successText:"Filed!"},"File a claim"))))}}]),a}(n.Component)),Am=function(e){return function(t){t({type:"FETCH_CLAIM_DETAILS",payload:{}}),t(Oe({type:"FETCH_CLAIM_DETAILS_REQ",payload:{claimId:e}}))}},Dm=function(e){var t=e.readOnlyView,a=e.value,n=e.name,o=e.label,c=e.closedLabel,l=e._onChange;return r.a.createElement("div",{className:"claim-detail-resolution__group"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"claims-detail-card__group__title"},c||o),r.a.createElement("span",null,a||"N/A")):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:n},o),r.a.createElement(ut.i,{className:"claim-detail-resolution-input",id:n,name:n,onChange:l,value:a||""})))},Lm=function(e){var t=e.infoProcessing,a=e.uploadedProofFiles,n=e.openFileModal;return t?r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"small"}):a.length>0?r.a.createElement(r.a.Fragment,null,a.map((function(e,t){return r.a.createElement("button",{className:"button-no-style claims-file-button claims-file-button--small",key:t,onClick:function(){n(e)}},"File ",t+1)}))):r.a.createElement("span",null,"No proof of work files previously uploaded")},xm=function(e){var t=e.closed,a=e.processing,n=e.proofFiles,o=e.retailerTicketId,c=e.settings.proofOfWork,l=e.uploadedProofFiles,s=e.openFileModal,i=e._handleResolutionDataChange;switch(c){case"ticketNumber":return r.a.createElement(Dm,{label:"Ticket Number",readOnlyView:t,name:"retailerTicketId",value:o,_onChange:function(e){i(e.target.name,e.target.value)}});case"fileUpload":default:return r.a.createElement("div",{className:"claim-detail-resolution__group claim-detail-resolution__group--proof-files"},t?l.length>0&&r.a.createElement("span",{className:"claims-detail-card__group__title"},"Uploaded Files"):r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.c,{buttonText:"Upload Proof of Work Files",className:"claim-detail-resolution-upload",id:"proofFiles",uploadedFiles:n,setUploadedFiles:function(e){i("proofFiles",e)}}),r.a.createElement("span",{className:"claim-detail-resolution__group__detail"},"Invoice, repair report, shipping info")),r.a.createElement("div",{className:"claim-resolution-upload-uploaded-files"},r.a.createElement(Lm,{infoProcessing:a.files,uploadedProofFiles:l,openFileModal:s})))}},Fm=function(e){return r.a.createElement("div",{className:"depot-resolution-summary"},r.a.createElement("div",{className:"depot-resolution-summary--header"},"Shipping Details Submitted:"),r.a.createElement("div",{className:"depot-resolution-summary--info"},r.a.createElement("span",null," ",function(e){var t=e.depotRepairStep,a=e.depotRepairShippingHistory,n=e.depotRepairSelectedParts,r=e.cost,o=e.depotRepairDescription,c=e.depotReplaceDescription,l=e.productRetailPrice,s=e.resolutionPartsCost,i=e.resolutionLaborCost,m=e.fromCustomerShippingCost,d=e.replaceRequested,u=a[0],p=u.carrier,_=u.trackingNumber,h=u.shippingCost,E=n?n.map((function(e){return"".concat(e.name,": $").concat(e.cost)})):[];return 2===t?"Shipping Number: ".concat(_,"  |  Shipping Carrier: ").concat(p,"  |  Shipping Cost: $").concat(h):3===t&&d?"Cost of Shipping: $".concat(h,"  |  \n      Cost of Replacement Product: $").concat(l,"  |  \n      Total Cost of Resolution: $").concat(r,"  |  \n      Replacement Description: ").concat(c||"Description not provided.","."):3===t&&"\n      ".concat(E.length?"Parts: ".concat(E.join(", ")):"Parts Estimate: $".concat(s)," |\n      Labor Cost: $").concat(i||0,"  |  \n      Current Shipping Cost: $").concat(m||0,"  |  \n      Total Cost of Repair: $").concat(r,"  |  \n      Repair Description: ").concat(o,".")}(e)," ")))},Mm=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={displayedFile:{fileString:"",fileType:""},isFileModalActive:!1,isSuccessModalActive:!1,carrierName:"",trackingNumber:"",repairDescription:"",replaceDescription:"",shippingCost:"",laborCost:"",partsCostEstimate:"",claimNeedsReview:!1},e.openFileModal=function(t){e.setState({displayedFile:{fileString:"data:".concat(t.type,";base64,").concat(t.content),fileType:t.type},isFileModalActive:!0})},e.closeFileModal=function(){e.setState({displayedFile:{fileString:"",fileType:""},isFileModalActive:!1})},e.closeSuccessModal=function(){e.setState({isSuccessModalActive:!1})},e.successModalTimeout=function(){var t=e.props,a=t.claimId,n=t.onDetailPage,r=t._fetchClaimData,o=t.shopId,c=t._getClaimsForResolution;n&&(r(a),e.closeSuccessModal(),window.scrollTo(0,0),document.body.classList.remove("overflow-off"),c(o))},e.handleResolutionProductPartToggle=function(t){e.props._handleResolutionDataChange("resolutionProductPartIds",t.target.values);var a=e.props.openCosts;e.updateCostFields(t.target.values,a)},e.handleResolutionOpenCostsChange=function(t){var a=t.target,n=a.name,r=a.value,o=e.props.resolutionProductPartIds;e.setState(Object(b.a)({},n,r),(function(){e.updateCostFields(o,r)}))},e.updateCostFields=function(t){var a,n=e.props,r=n.productParts,o=n.depotRepaircost,c=n.shopClaimSettings.depotRepairEnabled,l=e.state,s=l.shippingCost,i=l.laborCost,m=l.partsCostEstimate,d=0,u=Object(ne.a)(r);try{for(u.s();!(a=u.n()).done;){var p=a.value;-1!==t.indexOf(p.id)&&(d+=parseFloat(p.cost))}}catch(b){u.e(b)}finally{u.f()}var _,h=!s||Number.isNaN(s)?0:parseFloat(s),E=!i||Number.isNaN(i)?0:parseFloat(i),g=(h+E+(_=!d||Number.isNaN(d)?!m||Number.isNaN(m)?0:parseFloat(m):!d||Number.isNaN(d)?0:parseFloat(d))).toFixed(2);if(c){var f=(!o||Number.isNaN(o)?0:parseFloat(o))+E+_;e.props._handleResolutionDataChange("cost",f.toFixed(2))}else e.props._handleResolutionDataChange("cost",g)},e.handleSubmit=function(t){var a,n=e.props,r=n.claimId,o=n.cost,c=n.resolutionProductPartIds,l=n.id,s=n.programType,i=n.serviceType,m=n.promoCode,u=n.proofFiles,p=n.receiptFiles,_=n.retailerTicketId,h=n.shippingCarrier,g=n.shippingNumber,f=n.productParts,b=n.depotRepairStep,v=n._submitResolution,y=n._closeResolution,N=n.fromCustomerShippingCost,O=n.laborCost,C=n.partsCost,S=n.remainingLimitOfLiability,I=n._submitClaimNeedsReviewUpdate,R=n._submitDataForReview,P=n.claim.reviewApproved,T=n.replaceRequested,w=n.productInformation.productRetailPrice,j=e.state,k=j.shippingCost,A=j.laborCost,D=j.partsCostEstimate,L=j.replaceDescription,x=e.determineFullReplacement(),F=f.filter((function(e){return-1!==c.indexOf(e.id)}));a=D?!D||Number.isNaN(D)?0:parseFloat(D):F.reduce((function(e,t){return e+(!t.cost||Number.isNaN(t.cost)?0:parseFloat(t.cost))}),0);var M=!o||Number.isNaN(o)?0:parseFloat(o),U=!k||Number.isNaN(k)?0:parseFloat(k),G=!A||Number.isNaN(A)?0:parseFloat(A),B=.6*parseFloat(S);if(!P&&("repair"===s||"replacement"===s)&&(parseFloat(o)>350||parseFloat(o)>B)){var H={cost:M.toFixed(2),type:s};return"repair"===s&&(H=Object(d.a)(Object(d.a)({},H),{},{shippingCost:U.toFixed(2),laborCost:G.toFixed(2),repairParts:Object(E.a)(F),partsCost:a.toFixed(2)})),"replacement"===s&&(H=Object(d.a)(Object(d.a)({},H),{},{shippingCarrier:h,shippingNumber:g})),I(r),R(r,H),void e.setState({claimNeedsReview:!0})}var W={closed:t,selectedParts:F,cost:M,fullReplacement:x,id:l,programType:s,serviceType:i,promoCode:m,proofFiles:u,receiptFiles:p,retailerTicketId:_,shippingCarrier:h,shippingNumber:g,source:"dashboard",totalPartsCost:a,partsCost:a.toFixed(2),shippingCost:U.toFixed(2),laborCost:G.toFixed(2)};if("depot"===i&&3===b){var V=e.state,K=V.carrierName,z=V.trackingNumber;T?(W.programType="replacement",W.fullReplacement=!0):(W.programType="repair",W.serviceType="depot"),W.partsCost=T?0:C,W.laborCost=T?0:O,W.shippingCost=(parseFloat(N)+U).toFixed(2),W.shippingCarrier=K,W.shippingNumber=z,W.cost=U+M}if("replaceFromRepair"===s){var Y=!w||Number.isNaN(w)?0:parseFloat(w);W.cost=U+Y,W.programType="replacement",W.serviceType="clydeReplace",W.fullReplacement=!0,W.productCost=Y,W.replaceDescription=L}t?y(r,W):v(r,W)},e.determineFullReplacement=function(){var t=e.props,a=t.fullReplacement;switch(t.serviceType){case"payout":case"clydeReplace":return!0;case"repair":case"depot":return null;case"promoCode":default:return a}},e.handleMethodChange=function(t){t.preventDefault();var a=e.props,n=a.serviceType,r=a._handleResolutionDataChange,o=t.target.name;switch(o){case"repair":"inHome"===n&&"customerInstall"===n||r("serviceType","inHome"),r("programType","repair");break;case"depot":r("serviceType","depot"),r("programType","repair");break;case"clydeReplace":case"promoCode":r("serviceType",o),r("programType","replacement")}r("fullReplacement",!1),e.props.id||(r("resolutionProductPartIds",[]),r("openCosts",""),r("cost",""))},e.handleDepotReplacementRequest=function(){var t=e.props,a=t.depotRepairShippingHistory,n=t.productInformation.productRetailPrice,r=t._handleResolutionDataChange,o=a[0].shippingCost,c=(!o||Number.isNaN(o)?0:parseFloat(o))+(!n||Number.isNaN(n)?0:parseFloat(n));r("programType","replaceFromRepair"),r("replaceCost",c),r("isReplaceRequested",!0)},e.handleSelfInstallReplacementRequest=function(){var t=e.props,a=t.productInformation.productRetailPrice,n=t._handleResolutionDataChange,r=e.state.shippingCost,o=(!r||Number.isNaN(r)?0:parseFloat(r))+(!a||Number.isNaN(a)?0:parseFloat(a));n("programType","replaceFromRepair"),n("replaceCost",o),n("isReplaceRequested",!0)},e.disableCloseButton=function(){var t=e.props,a=t.closed,n=t.cost,r=t.serviceType,o=t.promoCode,c=t.remainingLimitOfLiability;return!!a||("promoCode"===r&&!o||n>c)},e.handleDepotRepairSubmit=function(){var t,a=e.props,n=a.cost,r=a.claimId,o=a.productParts,c=a.resolutionProductPartIds,l=a.depotRepairStep,s=a.depotRepairShippingHistory,i=a.depotRepairSelectedParts,m=a.depotRepaircost,d=a.depotRepairDescription,u=a.depotReplaceDescription,p=a.programType,_=a.serviceType,h=a.replaceCost,g=a._submitDepotRepairUpdate,f=a._fetchResolution,b=a.fromCustomerShippingCost,v=a.laborCost,y=a.partsCost,N=a.remainingLimitOfLiability,O=a._submitClaimNeedsReviewUpdate,C=a.isReplaceRequested,S=a.productInformation.productRetailPrice,I=a.replaceRequested,R=e.state,P=R.carrierName,T=R.trackingNumber,w=R.repairDescription,j=R.replaceDescription,k=R.shippingCost,A=R.laborCost,D=R.partsCostEstimate,L=1===l?"fromCustomer":"toCustomer",x=!A||Number.isNaN(A)?0:parseFloat(A),F=!D||Number.isNaN(D)?0:parseFloat(D),M=!k||Number.isNaN(k)?0:parseFloat(k);if(1===l)t={programType:p,serviceType:_,cost:0,repairDescription:w,fromCustomerShippingCost:M.toFixed(2),repairParts:[],shippingHistory:[{shippingCost:M.toFixed(2),type:L,carrier:P,trackingNumber:T,createdAt:new Date}]};else if(2===l&&"replaceFromRepair"===p)t={programType:p,serviceType:_,cost:h.toFixed(2),fromCustomerShippingCost:b,productRetailPrice:parseFloat(S).toFixed(2),replaceDescription:j,shippingHistory:Object(E.a)(s),replaceRequested:!0};else if(2===l){var U,G=o.filter((function(e){return-1!==c.indexOf(e.id)}));U=0===F?G.reduce((function(e,t){return e+(!t.cost||Number.isNaN(t.cost)?0:parseFloat(t.cost))}),0):F,t={programType:p,serviceType:_,cost:parseFloat(n).toFixed(2),laborCost:x.toFixed(2),partsCost:U.toFixed(2),fromCustomerShippingCost:b,repairDescription:w,repairParts:Object(E.a)(G),shippingHistory:Object(E.a)(s)}}else if(3===l){var B=((!m||Number.isNaN(m)?0:parseFloat(m))+M).toFixed(2);t=I?{programType:p,serviceType:_,cost:B,productRetailPrice:parseFloat(S).toFixed(2),fromCustomerShippingCost:b,toCustomerShippingCost:M.toFixed(2),replaceRequested:!0,shippingHistory:[].concat(Object(E.a)(s),[{shippingCost:M.toFixed(2),type:L,carrier:P,trackingNumber:T,createdAt:new Date}])}:{programType:p,serviceType:_,cost:B,laborCost:v,partsCost:y,fromCustomerShippingCost:b,toCustomerShippingCost:M.toFixed(2),repairParts:i&&i.length?Object(E.a)(i):[],shippingHistory:[].concat(Object(E.a)(s),[{shippingCost:M.toFixed(2),type:L,carrier:P,trackingNumber:T,createdAt:new Date}])},d?t.repairDescription=d:u&&(t.replaceDescription=u)}var H=.6*parseFloat(N),W=C?h:n;2===l&&(parseFloat(W)>350||parseFloat(W)>H)?(O(r),g(r,t),e.setState({claimNeedsReview:!0})):(g(r,t),3===l&&e.handleSubmit(!0),f(r))},e.handleDepotRepairTextField=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.getTextForDepotButton=function(e){return{1:"Submit shipping details",2:"Submit quote",3:"Submit shipping details"}[e]||""},e.closeNeedsReviewModal=function(){var t=e.props,a=t.claimId,n=t.onDetailPage,r=t._fetchClaimData;n&&(window.scrollTo(0,0),r(a),document.body.classList.remove("overflow-off"))},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.claimId,a=e._fetchResolution,n=this.props,r=n.shopClaimSettings,o=r.repairEnabled,c=r.replaceEnabled,l=r.promoCodeEnabled,s=r.retailerResolutions,i=r.depotRepairEnabled,m=n._handleResolutionDataChange;s&&(o?(m("programType","repair"),m("serviceType","inHome")):i?(m("programType","repair"),m("serviceType","depot")):c?(m("programType","replacement"),m("serviceType","clydeReplace")):l&&(m("programType","replacement"),m("serviceType","promoCode"))),a(t)}},{key:"componentWillUnmount",value:function(){(0,this.props._clearResolutionDetail)()}},{key:"componentDidUpdate",value:function(e){!0===e.processing.close&&!1===this.props.processing.close&&this.setState({isSuccessModalActive:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.closed,o=t.cost,c=t.fullReplacement,l=t.serviceType,s=t.programType,i=t.payoutType,m=t.payoutDate,d=t.onDetailPage,u=t.processing,p=t.productParts,_=t.promoCode,h=t.proofFiles,E=t.remainingLimitOfLiability,g=t.resolutionProductPartIds,f=t.retailerTicketId,b=t.settings,v=t.shippingCarrier,y=t.shippingNumber,N=t.uploadedProofFiles,O=t.shopClaimSettings,C=O.repairEnabled,S=O.replaceEnabled,I=O.promoCodeEnabled,R=O.retailerResolutions,P=O.depotRepairEnabled,T=t._handleResolutionDataChange,w=t._cancelFileClaim,j=t.depotRepairStep,k=t.depotRepairShippingHistory,A=t.depotRepairSelectedParts,D=t.depotRepairDescription,L=t.depotReplaceDescription,x=t.productInformation.productRetailPrice,F=t.replaceCost,M=t.partsCost,U=t.shippingCost,G=t.laborCost,B=t.fromCustomerShippingCost,H=t.claim,W=t.isReplaceRequested,V=t.replaceRequested,K=this.state,z=K.displayedFile,Y=z.fileString,Q=z.fileType,q=K.isFileModalActive,$=K.isSuccessModalActive,X=K.repairDescription,Z=K.laborCost,J=K.partsCostEstimate,ee=K.claimNeedsReview,te=gt()("claim-detail-resolution",{"claim-detail-resolution--modal":!d}),ae=gt()("claim-detail-resolution-submit",{"claim-detail-resolution-submit--modal":!d}),ne=gt()("claim-detail-depot-resolution",{"claim-detail-resolution-submit--modal":!d}),re=gt()("button-nostyle claim-detail-selector",{"claim-detail-selector--selected":"promoCode"===l}),oe=gt()("button-nostyle claim-detail-selector",{"claim-detail-selector--selected":"repair"===s&&"depot"!==l}),ce=gt()("button-nostyle claim-detail-selector",{"claim-detail-selector--selected":"depot"===l}),le=gt()("button-nostyle claim-detail-selector",{"claim-detail-selector--selected":"replacement"===s&&"promoCode"!==l}),se=this.disableCloseButton(),ie=p.map((function(e){return{value:e.id,text:r.a.createElement("div",{className:"resolution-parts-input__option"},r.a.createElement("div",{className:"part-name"},e.name),r.a.createElement("div",{className:"part-name"},e.modelNumber),r.a.createElement("div",{className:"part-cost"},"$",e.cost))}})),me=p.map((function(e){return{value:e.id,text:r.a.createElement("div",{className:"resolution-parts-input__option"},r.a.createElement("div",{className:"part-name"},e.name," ",e.modelNumber,": $",e.cost))}})),de=C+S+I+P,ue=n||!R||0===de,pe=j&&(2===j||3===j),_e="depot"===l&&2===j&&(!X||X.length<100)||o>=E&&!ue,he=this.getTextForDepotButton(j),Ee=L&&void 0!==L,ge={depotRepairStep:j,depotRepairShippingHistory:k,depotRepairSelectedParts:A,cost:o,depotRepairDescription:D,depotReplaceDescription:L,productRetailPrice:x,resolutionPartsCost:M,resolutionLaborCost:G,fromCustomerShippingCost:B,replaceRequested:V};return a||R&&0!==de?"resolutionPending"===H.claimState?r.a.createElement("div",{className:te},r.a.createElement("div",{className:"depot-repair-main-heading"},r.a.createElement("h3",null,"Resolution: ",Ee?"Replace":"Repair"),r.a.createElement("span",{className:"depot-repair-badge"},n?"Fulfilled":"In-progress")),r.a.createElement("div",{className:"resolution-pending-container"},r.a.createElement("img",{className:"resolution-pending-img",alt:"alert circle",src:"/images/alert-circle--purple.svg"}),r.a.createElement("span",null,"Your claim is awaiting approval from Clyde, we will be reaching out soon."))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.k,{active:q,className:"claim-detail-supporting-file-modal",closeModal:this.closeFileModal,headerText:"Supporting Info File"},"application/pdf"===Q?r.a.createElement("a",{download:"supporting_info.pdf",href:Y},"Download PDF"):r.a.createElement("img",{alt:"supporting info file",src:Y})),d&&$&&r.a.createElement(ut.m,{active:$,className:"claim-resolution-success-modal",closeModal:this.closeSuccessModal},r.a.createElement(ut.n,{className:"claim-resolution-success-modal__animation",color:"clydeGreen",onSuccess:this.successModalTimeout,text:"Resolution Closed!"})),d&&ee&&r.a.createElement(ut.m,{active:ee,className:"claim-resolution-success-modal",closeModal:this.closeNeedsReviewModal},r.a.createElement("div",{className:"claim-review-container"},r.a.createElement("img",{alt:"alert circle",src:"/images/alert-circle--purple.svg"}),r.a.createElement("p",{className:"claim-review-container__header"},"Claim Needs To Be Reviewed."),r.a.createElement("p",{className:"claim-review-container__text"},"The claim needs to be reviewed by the Clyde team before a resolution can be provided to the customer."),r.a.createElement(ut.a,{className:"claim-review-container__button",onClick:this.closeNeedsReviewModal},"Return to claim"))),r.a.createElement("div",{className:te},d&&!P?r.a.createElement("h3",null,"Resolution",n&&" \u2014 Closed"):r.a.createElement("div",{className:"depot-repair-main-heading"},!n&&j>1?r.a.createElement("h3",null,"Resolution: ",Ee?"Replace":"Repair"):r.a.createElement("h3",null,"Resolution",n&&" \u2014 Closed"),r.a.createElement("span",{className:"depot-repair-badge"},n?"Fulfilled":"In-progress")),u.fetch?r.a.createElement(ut.l,{className:"claim-detail-resolution-loading",dotColor:"clydeBlack",dotSize:"large"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__group"},ue||1===de?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"claims-detail-card__group__title"},"Resolution Method"),r.a.createElement("span",null,function(e){switch(e){case"inHome":return"In-home";case"carryIn":return"Carry-in";case"customerInstall":return"Customer Install";case"depot":return"Repair - depot";case"promoCode":return"Promo Code";case"payout":return"Payout / Cash Settlement";case"clydeReplace":return"Clyde Replace";case"retailerReplace":return"Retailer Replace";default:return"None"}}(l))):r.a.createElement(r.a.Fragment,null,pe||W?"":r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"fake-label fake-label--black",id:"resolution_method"},"Select a Resolution Method"),r.a.createElement("div",{className:"claim-detail-resolution__group__selector"},C&&r.a.createElement("button",{"aria-labelledby":"resolution_method",className:oe,name:"repair",onClick:this.handleMethodChange,onMouseUp:function(e){e.currentTarget.blur()}},"Repair"),P&&r.a.createElement("button",{"aria-labelledby":"resolution_method",className:ce,name:"depot",onClick:this.handleMethodChange,onMouseUp:function(e){e.currentTarget.blur()}},"Repair"),S&&r.a.createElement("button",{"aria-labelledby":"resolution_method",className:le,name:"clydeReplace",onClick:this.handleMethodChange,onMouseUp:function(e){e.currentTarget.blur()}},"Replacement"),I&&r.a.createElement("button",{"aria-labelledby":"resolution_method",className:re,name:"promoCode",onClick:this.handleMethodChange,onMouseUp:function(e){e.currentTarget.blur()}},"Promo Code"))))),"payout"===l&&r.a.createElement(r.a.Fragment,null,i&&r.a.createElement("div",{className:"claim-detail-resolution__group--row m-bottom-16"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Payout method"),r.a.createElement("span",null,{venmo:"Venmo",paypal:"PayPal",ach:"ACH - Bank Transfer"}[i])),m&&r.a.createElement("div",{className:"claim-detail-resolution__group m-bottom-16"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Payout date"),r.a.createElement("span",null,qn(m)))),P&&"depot"===l&&1===j&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__group m-bottom-16"},r.a.createElement("span",{className:"claims-detail-card__depot__title--bold"},"Fill out shipping information below so the customer can send you the product.")),r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"shipping-number-from-customer"},"Shipping Number"),r.a.createElement(ut.i,{id:"shipping-number-from-customer",name:"trackingNumber",onChange:this.handleDepotRepairTextField})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"shipping-carrier-from-customer"},"Shipping Carrier"),r.a.createElement(ut.i,{id:"shipping-carrier-from-customer",name:"carrierName",onChange:this.handleDepotRepairTextField}))),r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",{className:"depot-repair-cost-field"},r.a.createElement("label",{htmlFor:"shipping-cost-from-customer"},"Shipping Cost"),r.a.createElement("span",{className:"depot-repair-cost-field--sign"},"$"),r.a.createElement(ut.i,{id:"shipping-cost-from-customer",name:"shippingCost",min:0,step:.01,typeNumber:!0,onChange:this.handleDepotRepairTextField})))),P&&"depot"===l&&2===j&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__group--row m-bottom-36"},r.a.createElement(Fm,ge)),r.a.createElement("div",{className:"claim-detail-resolution__group--row m-bottom-36"},r.a.createElement("img",{alt:"check",className:"claim-detail-resolution-check",src:"/images/checkmark-circle.svg"}),r.a.createElement("span",{className:"claims-detail-card__depot__title"},"Your shipping details have been submitted, fill out the form below upon receiving the product.")),p.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",{className:"claim-detail-resolution__group"},r.a.createElement("label",null,"Select parts:"),r.a.createElement(ut.g,{id:"resolution-product-parts",disabled:n,onChange:this.handleResolutionProductPartToggle,defaultValue:g,name:"resolutionProductPartIds",options:me,multiple:!0})))),(!p||0===p.length)&&r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",{className:"depot-repair-cost-field"},r.a.createElement("label",{htmlFor:"parts-costs"},"Parts Cost:"),r.a.createElement("span",{className:"depot-repair-cost-field--sign"},"$"),r.a.createElement(ut.i,{disabled:n,id:"parts-costs",min:0,name:"partsCostEstimate",onChange:this.handleResolutionOpenCostsChange,step:.01,typeNumber:!0,value:J}))),r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",{className:"depot-repair-cost-field"},r.a.createElement("label",{htmlFor:"labor-costs"},"Labor Cost:"),r.a.createElement("span",{className:"depot-repair-cost-field--sign"},"$"),r.a.createElement(ut.i,{disabled:n,id:"labor-costs",min:0,name:"laborCost",onChange:this.handleResolutionOpenCostsChange,step:.01,typeNumber:!0,value:Z}))),r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",{className:"depot-repair-cost-field"},r.a.createElement("label",{htmlFor:"cost"},"Total Cost of Repair:"),r.a.createElement("span",{className:"depot-repair-cost-field--sign__cost"},"$"),r.a.createElement("span",{className:"depot-repair-sublabel"},"Cost of shipping, parts & labor"),r.a.createElement(ut.i,{disabled:!0,id:"cost",min:0,name:"cost",typeNumber:!0,value:o}))),r.a.createElement("div",{className:"claim-detail-resolution__group"},r.a.createElement("label",{htmlFor:"shipping-carrier-repair-description"},"Repair description:"),r.a.createElement(ut.h,{id:"shipping-carrier-repair-description",name:"repairDescription",rows:"4",onChange:this.handleDepotRepairTextField})),r.a.createElement("div",{className:"depot-repair-description-count"},r.a.createElement("span",null,X.length," Character(Minimum 100 Characters)"))),"replaceFromRepair"===s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__group--row m-bottom-16"},r.a.createElement("span",{className:"claims-detail-card__depot__title--bold"},"Replacement request from Repair")),r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",{className:"depot-repair-cost-field"},r.a.createElement("label",{htmlFor:"product-price"},"Cost of Replacement Product:"),r.a.createElement("span",{className:"depot-repair-cost-field--sign"},"$"),r.a.createElement(ut.i,{disabled:!0,id:"product-price",min:0,name:"productPrice",step:.01,typeNumber:!0,value:x.toFixed(2)}))),r.a.createElement("div",{className:"claim-detail-resolution__line"}),r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",{className:"depot-repair-cost-field"},r.a.createElement("label",{htmlFor:"replacementCost"},"Total Cost of Resolution:"),r.a.createElement("span",{className:"depot-repair-cost-field--sign__cost"},"$"),r.a.createElement("span",{className:"depot-repair-sublabel"},"Cost of shipping & replacement product"),r.a.createElement(ut.i,{id:"replacementCost",min:0,name:"replacementCost",disabled:!0,step:.01,typeNumber:!0,value:F.toFixed(2),onChange:function(e){T(e.target.name,e.target.value)}}))),r.a.createElement("div",{className:"claim-detail-resolution__group"},r.a.createElement("label",{htmlFor:"shipping-carrier-repair-description"},"Replacement description:"),r.a.createElement(ut.h,{id:"shipping-carrier-repair-description",name:"replaceDescription",rows:"4",onChange:this.handleDepotRepairTextField}))),P&&"depot"===l&&3===j&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__group--row m-bottom-36"},r.a.createElement(Fm,ge)),r.a.createElement("div",{className:"claim-detail-resolution__group--row m-bottom-36"},r.a.createElement("img",{alt:"check",className:"claim-detail-resolution-check",src:"/images/checkmark-circle.svg"}),r.a.createElement("span",{className:"claims-detail-card__depot__title"},"Your resolution has been approved by Clyde.")),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__group--row m-bottom-16"},r.a.createElement("span",{className:"claims-detail-card__depot__title--bold"},"Fill out shipping information below to ship back product to the customer.")),r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"shipping-number-to-customer"},"Shipping Number:"),r.a.createElement(ut.i,{id:"shipping-number-to-customer",name:"trackingNumber",onChange:this.handleDepotRepairTextField})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"shipping-carrier-to-customer"},"Shipping Carrier:"),r.a.createElement(ut.i,{id:"shipping-carrier-to-customer",name:"carrierName",onChange:this.handleDepotRepairTextField}))),r.a.createElement("div",{className:"claim-detail-resolution__depot-shipping"},r.a.createElement("div",{className:"depot-repair-cost-field"},r.a.createElement("label",{htmlFor:"shipping-cost-from-customer"},"Shipping Cost"),r.a.createElement("span",{className:"depot-repair-cost-field--sign"},"$"),r.a.createElement(ut.i,{id:"shipping-cost-from-customer",name:"shippingCost",min:0,step:.01,typeNumber:!0,onChange:this.handleDepotRepairTextField})),!Ee&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"depot-repair-files"},"Upload Invoice"),r.a.createElement(ut.c,{className:"depot-repair-files-input",id:"depot-repair-files",buttonText:"Upload Document",uploadedFiles:h,setUploadedFiles:function(e){T("proofFiles",e)}})))))),P&&ue&&"repair"===s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Product Parts costs:"),r.a.createElement("span",null,"$",M)),r.a.createElement("div",{className:"claim-detail-resolution__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Shipping costs:"),r.a.createElement("span",null,"$",U)),r.a.createElement("div",{className:"claim-detail-resolution__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Labor costs:"),r.a.createElement("span",null,"$",G))),!P&&"repair"===s&&p.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__group"},r.a.createElement("label",null,"Select parts:"),r.a.createElement(ut.g,{className:"resolution-parts-input",id:"resolution-product-parts",disabled:n,onChange:this.handleResolutionProductPartToggle,defaultValue:g,name:"resolutionProductPartIds",options:ie,multiple:!0}))),!P&&"repair"===s&&(!p||0===p.length)&&r.a.createElement("div",{className:"claim-detail-resolution__group"},ue?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"claims-detail-card__group__title"},"Product Parts Costs:"),r.a.createElement("span",null,"$",M)):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"parts-costs"},"Parts costs:"),r.a.createElement("div",{className:"claim-detail-resolution-input--cost"},r.a.createElement("span",{className:"claim-detail-resolution-input-prefix"},"$"),r.a.createElement(ut.i,{className:"claim-detail-resolution-input",id:"parts-costs",disabled:n,min:0,name:"partsCostEstimate",onChange:this.handleResolutionOpenCostsChange,step:.01,typeNumber:!0})))),!P&&"repair"===s&&r.a.createElement("div",{className:"claim-detail-resolution__group"},ue?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"claims-detail-card__group__title"},"Shipping costs:"),r.a.createElement("span",null,"$",U)):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"labor-costs"},"Shipping costs:"),r.a.createElement("div",{className:"claim-detail-resolution-input--cost"},r.a.createElement("span",{className:"claim-detail-resolution-input-prefix"},"$"),r.a.createElement(ut.i,{className:"claim-detail-resolution-input",id:"shipping-costs",disabled:n,min:0,name:"shippingCost",onChange:this.handleResolutionOpenCostsChange,step:.01,typeNumber:!0})),r.a.createElement("div",{className:"claim-detail-resolution__group claim-detail-resolution__group--row"},r.a.createElement(ut.b,{backgroundColor:"clydeWhite",className:"",disabled:n,id:"customerInstall",name:"customerInstall",onChange:function(e){T("serviceType",e.target.checked?"customerInstall":"inHome")},value:"customerInstall"===l}),r.a.createElement("label",{htmlFor:"fullReplacement"},"Customer Install?")))),!P&&"repair"===s&&r.a.createElement("div",{className:"claim-detail-resolution__group"},ue?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"claims-detail-card__group__title"},"Labor costs:"),r.a.createElement("span",null,"$",G)):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"labor-costs"},"Labor costs:"),r.a.createElement("div",{className:"claim-detail-resolution-input--cost"},r.a.createElement("span",{className:"claim-detail-resolution-input-prefix"},"$"),r.a.createElement(ut.i,{className:"claim-detail-resolution-input",id:"labor-costs",disabled:n,min:0,name:"laborCost",onChange:this.handleResolutionOpenCostsChange,step:.01,typeNumber:!0})))),"depot"!==l&&"replaceFromRepair"!==s&&r.a.createElement("div",{className:"claim-detail-resolution__group"},ue?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"claims-detail-card__group__title"},"Cost of Resolution"),r.a.createElement("span",null,"$",parseFloat(o).toFixed(2))):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"cost"},"Cost of Resolution"),r.a.createElement("span",{className:"claim-detail-resolution__group__detail"},"Maximum limit of $",E.toFixed(2)),r.a.createElement("div",{className:"claim-detail-resolution-input--cost"},r.a.createElement("span",{className:"claim-detail-resolution-input-prefix"},"$"),r.a.createElement(ut.i,{className:"claim-detail-resolution-input",disabled:n||"repair"===s,id:"cost",min:0,name:"cost",onChange:function(e){T(e.target.name,e.target.value)},step:.01,typeNumber:!0,value:o}))),o>E&&!ue&&r.a.createElement("span",{className:"claim-detail-resolution__group__warning"},"Reimbursement will not exceed $",E.toFixed(2))),"promoCode"===l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Dm,{label:"Enter the promo code*",closedLabel:"Promo Code",readOnlyView:ue,name:"promoCode",value:_,_onChange:function(e){T(e.target.name,e.target.value)}}),r.a.createElement("div",{className:gt()("claim-detail-resolution__group",{"claim-detail-resolution__group--row":!n})},ue?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"claims-detail-card__group__title"},"Full Replacement"),r.a.createElement("span",null,c?"Yes":"No")):r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.b,{backgroundColor:"clydeWhite",className:"",disabled:n,id:"fullReplacement",name:"fullReplacement",onChange:function(e){T(e.target.name,!c)},value:c}),r.a.createElement("label",{htmlFor:"fullReplacement"},"Is this a full replacement?")))),"replacement"===s&&"promoCode"!==l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Dm,{label:"Shipping Carrier",readOnlyView:ue,name:"shippingCarrier",value:v,_onChange:function(e){T(e.target.name,e.target.value)}}),r.a.createElement(Dm,{label:"Shipping Number",readOnlyView:ue,name:"shippingNumber",value:y,_onChange:function(e){T(e.target.name,e.target.value)}})),(n||"depot"!==l&&"replaceFromRepair"!==s)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claim-detail-resolution__line"}),r.a.createElement(xm,{closed:ue,processing:u,proofFiles:h,retailerTicketId:f,settings:b,uploadedProofFiles:N,openFileModal:this.openFileModal,_handleResolutionDataChange:T})))),ue||!P||"depot"!==l&&"replaceFromRepair"!==s?r.a.createElement("div",{className:ae},r.a.createElement(ut.a,{className:"claim-detail-resolution-submit__button",disabled:se,onClick:function(){e.handleSubmit(!0)},processing:u.submit,successText:"Submitted!"},"Submit Resolution"),"repair"===s&&!S&&r.a.createElement("button",{className:"claim-detail-replacement",onClick:function(){e.handleSelfInstallReplacementRequest()}},"Request Replacement"),!d&&r.a.createElement(ut.a,{className:"claim-detail-resolution-resolve-later__button",disabled:se,onClick:w,processing:u.submit,successText:"Done"},"Resolve Later")):r.a.createElement("div",{className:ne},r.a.createElement(ut.a,{className:"claim-detail-depot-resolution__button",disabled:_e,onClick:function(){e.handleDepotRepairSubmit()},processing:u.submit,successText:"Submitted!"},he),2===j&&"replaceFromRepair"!==s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"claim-detail-depot-replacement",onClick:function(){e.handleDepotReplacementRequest()}},"Request Replacement")))):r.a.createElement("div",{className:te},d&&r.a.createElement("h3",null,"Resolution \u2014 Pending"),r.a.createElement("p",null,"Please check back later for resolution details."))}}]),a}(n.Component),Um=Object(l.b)((function(e){return Object(d.a)(Object(d.a)({},e.claimResolution),{},{shopId:e.auth.shopId,productInformation:Object(d.a)({},e.claimDetail.product),claim:e.claimDetail.claim,reviewData:e.claimDetail.reviewData})}),(function(e){return{_clearResolutionDetail:function(){e({type:"CLEAR_RESOLUTION_DETAIL",payload:{}})},_closeResolution:function(t,a){e(function(e,t){return function(a){a({type:"CLOSE_CLAIM_RESOLUTION",payload:{}}),a(Oe({type:"CLOSE_CLAIM_RESOLUTION_REQ",payload:{claimId:e,resolution:t}}))}}(t,a))},_fetchClaimData:function(t){e(Am(t))},_fetchResolution:function(t){e(function(e){return function(t){t({type:"FETCH_CLAIM_RESOLUTION",payload:{}}),t(Oe({type:"FETCH_CLAIM_RESOLUTION_REQ",payload:{claimId:e}}))}}(t))},_handleResolutionDataChange:function(t,a){e(function(e,t){return{type:"HANDLE_CLAIM_DETAIL_RESOLUTION_DATA_CHANGE",payload:{name:e,value:t}}}(t,a))},_submitResolution:function(t,a){e(function(e,t){return function(a){a({type:"SUBMIT_CLAIM_RESOLUTION",payload:{}}),a(Oe({type:"SUBMIT_CLAIM_RESOLUTION_REQ",payload:{claimId:e,resolution:t}}))}}(t,a))},_getClaimsForResolution:function(t){e(Rn(t))},_submitDepotRepairUpdate:function(t,a){e(function(e,t){return function(a){a({type:"SUBMIT_DEPOT_REPAIR_UPDATE",payload:{}}),a(Oe({type:"SUBMIT_DEPOT_REPAIR_UPDATE_REQ",payload:{claimId:e,updateInformation:t}}))}}(t,a))},_submitClaimNeedsReviewUpdate:function(t){e(function(e){return function(t){t({type:"SUBMIT_CLAIM_NEEDS_REVIEW_UPDATE",payload:{}}),t(Oe({type:"SUBMIT_CLAIM_NEEDS_REVIEW_UPDATE_REQ",payload:{claimId:e}}))}}(t))},_submitDataForReview:function(t,a){e(function(e,t){return function(a){a({type:"SUBMIT_DATA_FOR_REVIEW",payload:{}}),a(Oe({type:"SUBMIT_DATA_FOR_REVIEW_REQ",payload:{claimId:e,data:t}}))}}(t,a))}}}))(Mm),Gm=function(e){var t,a,o,c,l=e.isReferral,s=e.savedClaimState,i=e.denialReason,m=e.referralEmailProcessing,d=e.contractSaleId,u=e._toCustomerSearch,p=e._closeModal,_=e._refreshCop,h=e._sendHiClydeReferral,E="Copy the link for submission to share directly with customer",g=Object(n.useState)(E),f=Object(an.a)(g,2),b=f[0],v=f[1],y=p,N=l?function(){return h(d)}:u;nm(s)&&(a="Claim Not Covered.",o=om(i,!0),c="x-circle.svg"),em(Zi,s)&&(a="Claim Needs To Be Reviewed.",o="The claim needs to be reviewed by the Clyde team before a resolution can be provided to the customer.",c="alert-circle.svg"),am(s)&&(a="Claim approved!",o="The customer\u2019s claim has been approved, your customer will be notified ASAP. Click below to return to All Customers.",c="checkmark-circle.svg"),function(e){return e.indexOf("resolution")>-1}(s)&&(a="Claim resolved!",o=r.a.createElement(r.a.Fragment,null,"The customer\u2019s claim has been approved and resolved!",r.a.createElement("br",null),"There is no need to take any additional action on this resolution."),c="checkmark-circle.svg",y=_),l&&(a="This customer is covered by Clyde!",o=r.a.createElement(r.a.Fragment,null,"This customer\u2019s issue is eligible for coverage by their Clyde product protection plan.",r.a.createElement("br",null),r.a.createElement("br",null),"Please send the customer a direct link so that they can file a claim.",r.a.createElement("br",null),"Clyde, or one of our administrative partners, will collect all the necessary details to help solve the customer\u2019s issue."),c="warranty-shield.svg");var O=gt()("cop-modal-foreground","cop-modal-foreground--cop-file-claim",{"cop-modal-foreground--hi-clyde-referral":l});return r.a.createElement("div",{className:"cop-modal-background",onClick:y},r.a.createElement("div",{className:O,onClick:function(e){e.stopPropagation()}},r.a.createElement("button",{className:"button-nostyle cop-modal-header__cancel",onClick:y},"\u2715"),r.a.createElement("div",{className:"claims-feedback"},r.a.createElement("img",{alt:a,className:"claims-feedback__img",src:"/images/".concat(c)}),r.a.createElement("h3",{className:"claims-feedback__header"},a),r.a.createElement("p",{className:"claims-feedback__copy"},o),r.a.createElement(ut.a,{className:"claims-feedback__button",onClick:N,successText:"Sent!",processing:m},l?"Email Link to Customer":"Return to All Customers"),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"claims-feedback__copy-button__input",readOnly:!0,ref:function(e){t=e},value:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/products/").concat(d)}),r.a.createElement("button",{className:"button-no-style claims-feedback__copy-button",onClick:function(){t.select(),document.execCommand("copy"),v("Link copied!"),setInterval((function(){v(E)}),1500)}},b)))))},Bm=function(e){var t,a,n=e.isLimitedClaim,o=e.isDop,c=e.step,l=e.clydeCovered,s=e.shopName,i=e.limitedWarrantyExpired;if(!n||o&&"claim"===c)return null;var m="cop-file-claim__limited-notification";if("claim"===c)if(a="alert",l)t="Your customer is still covered by this product's limited warranty.",m="".concat(m," cop-file-claim__limited-notification--purple");else{if(!i)return null;t=r.a.createElement(r.a.Fragment,null,"This product\u2019s limited warranty coverage has expired. ",r.a.createElement("br",null),"You can submit a limited warranty claim at your discretion.")}return"resolution"===c&&(t="A claim was successfully submitted. This issue is still covered by ".concat(s,"\u2019s Limited Warranty program."),a="success"),r.a.createElement(ut.d,{text:t,type:a,className:m})},Hm=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={divertToHiCylde:!1},e.handleSuccessfulFiling=function(){var t=e.props,a=t.claimId,n=t.shopClaimSettings.retailerResolutions,r=t._cancelFileClaim,o=t._showResolutionForm,c=t._getClaimsForResolution,l=t.shopId;if(n)return o(a),void c(l);r()},e.checkAndFile=function(t,a,n,r){var o=e.props.fileClaim,c=o.claimType,l=o.sale.contractADH,s=o.lineItem;t.claimIssueTypes.some((function(e){return"droppedOrDamaged"===e.name}))&&"limitedWarranty"===c&&(l||s.contractADH)?e.setState({divertToHiCylde:!0}):e.props._confirmFileClaim(t,a,n,r)},e.stepSwitcher=function(){var t=e.props,a=t.customerName,n=t.fileClaim,o=t.shopClaimSettings,c=t.orderId,l=t.issueTypes,s=t._updateFileClaimInput,i=t._cancelFileClaim;switch(n.step){case"resolution":return r.a.createElement(Um,{claimId:n.claimId,productParts:n.productParts,remainingLimitOfLiability:n.remainingLimitOfLiability,shopClaimSettings:o,isLimitedClaim:"limitedWarranty"===n.claimType,_cancelFileClaim:i});case"claim":default:return r.a.createElement(km,{customerName:a,fileClaim:n,shopClaimSettings:o,orderId:c,issueTypes:l,_confirmFileClaim:e.checkAndFile,_updateFileClaimInput:s})}},e.refreshCop=function(){var t=e.props,a=t.orderId,n=t._getOrderDetails,r=t._cancelFileClaim,o=t._getClaimsForResolution,c=t.shopId;r(),n(a),o(c)},e.goBackToCustomerSearch=function(){var t=e.props,a=t._backToCustomerSearch;(0,t._cancelFileClaim)(),a()},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fileClaim,a=t.sale,n=t.claimType,r=t.lineItem,o=e.shopId,c=e.issueTypes,l=e._getSaleInfoForClaim,s=e._getIssueTypes;l("extendedWarranty"===n?a.saleId:r,n,o),(null===c||void 0===c?void 0:c.length)||s()}},{key:"render",value:function(){var e=this,t=this.props,a=t.fileClaim,n=a.actionComplete,o=a.savedClaim,c=a.sale,l=c.oemWarrantyLength,s=c.productName,i=c.purchaseDate,m=a.step,d=a.claimType,u=a.lineItem,p=a.referralEmailProcessing,_=t.shopClaimSettings.retailerResolutions,h=t.shopName,E=t._cancelFileClaim,g=t._sendHiClydeReferral;if((null===o||void 0===o?void 0:o.claimState)&&(!am(o.claimState)||_)||this.state.divertToHiCylde)return r.a.createElement(Gm,{savedClaimState:o.claimState,isReferral:this.state.divertToHiCylde,referralEmailProcessing:p,denialReason:o.denialReason,contractSaleId:null===u||void 0===u?void 0:u.saleId,_closeModal:E,_toCustomerSearch:this.goBackToCustomerSearch,_sendHiClydeReferral:g,_refreshCop:this.refreshCop});var f=am(o.claimState)&&_?"Approved!":"Filed!",b="limitedWarranty"===d,v=l||(null===u||void 0===u?void 0:u.oemWarrantyLength)||0,y=O()(i).utc().add(v,"months").isAfter(O()()),N="claim"===m?"Submit a Limited Warranty Claim":"File a ".concat(m.charAt(0).toUpperCase()+m.slice(1));return r.a.createElement("div",{className:"cop-modal-background",onClick:E},r.a.createElement("div",{className:"cop-modal-foreground cop-modal-foreground--cop-file-claim",onClick:function(e){e.stopPropagation()}},n?r.a.createElement("div",{className:"cop-modal-foreground__action-complete"},r.a.createElement(ut.n,{color:"clydeGreen",onSuccess:function(t){e.handleSuccessfulFiling(t)},text:f})):r.a.createElement(r.a.Fragment,null,r.a.createElement(Bm,{isLimitedClaim:b,shopName:h,step:m,clydeCovered:Boolean(null===u||void 0===u?void 0:u.saleId),isDop:Boolean("dop"===(null===u||void 0===u?void 0:u.coverageStartType)),limitedWarrantyExpired:!y}),r.a.createElement("div",{className:"cop-modal-header"},r.a.createElement("button",{className:"button-nostyle cop-modal-header__cancel",onClick:E},"\u2715"),r.a.createElement("p",{className:"cop-modal-header__explanation cop-modal-header__explanation--product-name"},s||(null===u||void 0===u?void 0:u.productName)||(null===u||void 0===u?void 0:u.name)),r.a.createElement("h1",{className:"cop-modal-header__header"},N)),this.stepSwitcher())))}}]),a}(n.Component),Wm=Object(l.b)((function(e){var t=e.customers;return{customerName:t.ordersOverview.customerName,fileClaim:t.fileClaim,orderId:t.selectedOrder.clydeOrderId,shopClaimSettings:t.shopClaimSettings,shopId:e.auth.shopId,shopName:e.contactInfo.shopName,issueTypes:e.claimsList.issueTypes}}),(function(e){return Object(i.b)({_backToCustomerSearch:vs,_cancelFileClaim:Ws,_sendHiClydeReferral:li,_confirmFileClaim:Ys,_getOrderDetails:Ps,_getSaleInfoForClaim:Vs,_updateFileClaimInput:Ks,_showResolutionForm:zs,_getClaimsForResolution:Rn,_getIssueTypes:wn},e)}))(Hm),Vm=function(e){var t=e.selectAll,a=e.termsOnOrder;return r.a.createElement("div",{className:"cop-bulk-sale__content__terms"},r.a.createElement("div",{className:"cop-bulk-sale__terms-header"},r.a.createElement("span",null,"None"),r.a.createElement("button",{value:"none",className:"button-nostyle",onClick:t},"Select all")),a.map((function(e,a){return r.a.createElement("div",{className:"cop-bulk-sale__terms-header",key:"term-".concat(a)},r.a.createElement("span",null,e," Year"),r.a.createElement("button",{value:e,className:"button-nostyle",onClick:t},"Select all"))})))},Km=function(e,t,a){return e[t]&&void 0===e[t][a]},zm=function(e,t,a,n){return e[t]&&!!e[t][a]&&e[t][a].contractId===n},Ym=function(e){var t=e.cart,a=e.clydeLineItemId,n=e.contracts,o=e.pcidx,c=e.lineItemIdx,l=e.productName,s=e.selectContract,i=e.termsOnOrder.map((function(e){return n.find((function(t){return t.term==e}))}));return r.a.createElement("div",{className:"cop-bulk-sale-radio-group"},r.a.createElement("div",{className:"cop-bulk-sale-radio-group__column"},r.a.createElement("input",{type:"radio",id:"radio_".concat(l,"_").concat(c,"_none"),className:"cop-bulk-sale-radio-group__column__radio",name:"".concat(l,"_").concat(c,"_").concat(o),onChange:function(e){return s(e,a,null,o)},checked:Km(t,a,o),value:""})),i.map((function(e,n){return e?r.a.createElement("div",{key:"".concat(l,"-").concat(e.category,"-").concat(n),className:"cop-bulk-sale-radio-group__column"},r.a.createElement("input",{type:"radio",id:"radio_".concat(l,"_").concat(c,"_").concat(e.category,"_").concat(n),className:"cop-bulk-sale-radio-group__column__radio",name:"".concat(l,"_").concat(c,"_").concat(o),onChange:function(t){return s(t,a,e,o)},checked:zm(t,a,o,e.contractId),value:e.term})):r.a.createElement("div",{key:"".concat(l,"-fake_category-").concat(n),className:"cop-bulk-sale-radio-group__column cop-bulk-sale-radio-group__column--fake"},"N/A")})))},Qm=function(e){var t=e.cart,a=e.productContracts,n=e.selectContract,o=e.termsOnOrder;return r.a.createElement("div",{className:"cop-bulk-sale__content__cart"},a.map((function(e,a){return function(e,t,a,n,o){for(var c=[],l=0;l<e.eligibleQuantity;l++){var s=e.contracts,i=e.clydeLineItemId,m=e.productImage,d=e.productName;c.push(r.a.createElement("div",{className:"cop-bulk-sale-cart",key:"".concat(d,"-").concat(l)},r.a.createElement("div",{className:"cop-bulk-sale-cart__left"},r.a.createElement(Mo.a,{alt:d,src:[m,"/images/default-image.svg"]}),r.a.createElement("div",{className:"cop-bulk-sale-cart__left__text"},r.a.createElement("span",{className:"cop-bulk-sale-cart__left__text__top"},"Eligible"),r.a.createElement("span",{className:"cop-bulk-sale-cart__left__text__bottom"},d))),r.a.createElement("div",{className:"cop-bulk-sale-cart__right"},r.a.createElement(Ym,{cart:t,clydeLineItemId:i,contracts:s,selectContract:a,pcidx:l,lineItemIdx:o,productName:d,termsOnOrder:n}))))}return c}(e,t,n,o,a)})))},qm=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={percentError:!1,premiumCollected:!1},e.handleCheck=function(t){e.state.premiumCollected&&t.currentTarget.blur(),e.setState((function(e){return{premiumCollected:!e.premiumCollected}}))},e.isPercentError=function(e){return!/^[0-9]*$/.test(e)},e.calculateCart=function(){for(var t=e.props.cart,a=0,n=0,r=0,o=0,c=0,l=Object.values(t);c<l.length;c++){var s,i=l[c],m=Object(ne.a)(i);try{for(m.s();!(s=m.n()).done;){var d=s.value;d&&(o+=1,a+=d.baseCost+d.backendFee+d.platformFee,n+=d.markup,r=parseFloat((a+n).toFixed(2)))}}catch(u){m.e(u)}finally{m.f()}}return{contractCount:o,totalPremiumCollected:a.toFixed(2),totalMarkup:n.toFixed(2),totalCost:r.toFixed(2)}},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this.props,t=e.submitProcessing,a=e.recordSales,n=this.state,o=n.percentError,c=n.premiumCollected,l=this.calculateCart(),s=l.contractCount,i=l.totalPremiumCollected,m=l.totalMarkup,d=l.totalCost,u=Number.isNaN(+d)?"---":"$".concat(d);return r.a.createElement("div",{className:"cop-modal-actions cop-bulk-sale-checkout"},r.a.createElement("div",{className:"cop-bulk-sale-checkout__info"},r.a.createElement("span",null,"Contract quantity:"),r.a.createElement("span",null,s)),r.a.createElement("div",{className:"cop-bulk-sale-checkout__info"},r.a.createElement("span",null,"Premium cost collected:"),r.a.createElement("span",null,"$",i)),r.a.createElement("div",{className:"cop-bulk-sale-checkout__info"},r.a.createElement("span",null,"Your markup:"),r.a.createElement("span",null,"$",m)),o&&r.a.createElement("div",{className:"cop-bulk-sale-checkout__info cop-bulk-sale-checkout__info--error"},r.a.createElement("span",null,"Percentage must be a positive, whole-number value.")),r.a.createElement("div",{className:"cop-bulk-sale-checkout__line"}),r.a.createElement("div",{className:"cop-bulk-sale-checkout__info"},r.a.createElement("span",null,"Total:"),r.a.createElement("span",null,u)),r.a.createElement("div",{className:"cop-bulk-sale-checkout__check"},r.a.createElement(ut.b,{backgroundColor:"clydeWhite",id:"vow",name:"premiumCollected",className:gt()("cop-bulk-sale-checkout__check__input",{"cop-bulk-sale-checkout__check__input--disabled":0===s||o}),disabled:0===s||o,checked:c,onChange:this.handleCheck}),r.a.createElement("label",{htmlFor:"vow",className:gt()("cop-bulk-sale-checkout__check__label",{"cop-bulk-sale-checkout__check__label--disabled":0===s||o})},"I have collected at least ",u," for this transaction or have decided to buy this contract on behalf of the customer.")),r.a.createElement(ut.a,{id:"confirmUpdateButton",className:"cop-modal-actions__confirm",onClick:a,processing:t,disabled:0===s||!c||o,successText:"Sale".concat(s>1?"s":""," Recorded"),preserveButton:!0},"Record sale".concat(s>1?"s":"")))}}]),a}(n.Component),$m=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleContractSelect=function(t,a,n,r){var o,c=e.props._selectBulkCopSaleContract;if(n){var l=t.target.value;o=Object(d.a)(Object(d.a)({},n),{},{term:parseInt(l,10),clydeLineItemId:a})}c(a,r,o)},e.handleContractSelectAll=function(t){var a,n=e.props,r=n.bulkContractSale.productContracts,o=n._selectAllBulkCopSaleContracts,c=t.target.value,l={},s=Object(ne.a)(r);try{for(s.s();!(a=s.n()).done;){var i=a.value,m=i.contracts.find((function(e){return e.term==c}));l[i.clydeLineItemId]=[];for(var u=0;u<i.eligibleQuantity;u++)m?l[i.clydeLineItemId].push(Object(d.a)(Object(d.a)({},m),{},{clydeLineItemId:i.clydeLineItemId})):l[i.clydeLineItemId].push(void 0)}}catch(p){s.e(p)}finally{s.f()}t.currentTarget.blur(),o(l)},e.handleRecordSales=function(){var t=e.props,a=t.bulkContractSale.cart,n=t.clydeOrderId;(0,t._recordBulkContractSale)(n,Object.values(a).flat().filter((function(e){return e})))},e.finishSale=function(){var t=e.props,a=t.clydeOrderId,n=t._getOrderDetails,r=t._cancelBulkContractSale;n(a),r()},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.bulkContractSale,a=e.clydeOrderId;(0,e._getContractsForBulkSale)(a,Object.keys(t.cart))}},{key:"render",value:function(){var e=this.props,t=e.bulkContractSale,a=t.actionComplete,n=t.cart,o=t.productContracts,c=t.processing,l=t.submitProcessing,s=t.termsOnOrder,i=e._cancelBulkContractSale;return r.a.createElement("div",{className:"cop-modal-background",onClick:i},r.a.createElement("div",{className:"cop-modal-foreground cop-modal-foreground--cop-bulk-sale",onClick:function(e){return e.stopPropagation()}},a?r.a.createElement("div",{className:"cop-modal-foreground__action-complete"},r.a.createElement(ut.n,{text:"Recorded!",onSuccess:this.finishSale})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-modal-header"},r.a.createElement("button",{className:"button-nostyle cop-modal-header__cancel",onClick:i},"\u2715"),r.a.createElement("p",{className:"cop-modal-header__explanation"},"Keep your customer's purchases protected"),r.a.createElement("h1",{className:"cop-modal-header__header"},"Record a contract sale")),c?r.a.createElement("div",{className:"cop-modal--loading"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-modal-content cop-bulk-sale__content"},r.a.createElement(Vm,{termsOnOrder:s,selectAll:this.handleContractSelectAll}),r.a.createElement(Qm,{cart:n,productContracts:o,termsOnOrder:s,selectContract:this.handleContractSelect})),r.a.createElement(qm,{cart:n,submitProcessing:l,recordSales:this.handleRecordSales})))))}}]),a}(n.Component),Xm=Object(l.b)((function(e){return{bulkContractSale:e.customers.bulkContractSale,clydeOrderId:e.customers.selectedOrder.clydeOrderId}}),(function(e){return Object(i.b)({_getOrderDetails:Ps,_cancelBulkContractSale:qs,_recordBulkContractSale:Js,_getContractsForBulkSale:$s,_selectBulkCopSaleContract:Xs,_selectAllBulkCopSaleContracts:Zs},e)}))($m),Zm=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={confirmation:"",buttonDisabled:!0,issueShopifyRefund:!0},e.handleChangeConfirmation=function(t){var a=t.target.value,n="yes"!==a.trim().toLowerCase();e.setState({confirmation:a,buttonDisabled:n})},e.handleConfirmCancel=function(t){var a=e.props,n=a.cancelContract,r=a.orderId,o=a.shopId,c=a._confirmCancelContract,l=a._confirmCancelPpContract;e.state.buttonDisabled||(t?l(n.saleId,r,o,e.state.issueShopifyRefund):c(n.saleId,r,o,e.state.issueShopifyRefund))},e.refreshOrder=function(){var t=e.props,a=t.orderId,n=t._cancelCancelContract,r=t._getOrderDetails;n(),r(a)},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.cancelContract,n=t.platform,o=t._cancelCancelContract,c="HI"===a.purchaseSource,l=c?"Cancel post purchase contract":"Cancel contract";return r.a.createElement("div",{className:"cop-modal-background",onClick:o},r.a.createElement("div",{className:"cop-modal-foreground",onClick:function(e){return e.stopPropagation()}},"finish"!==a.step?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-modal-header"},r.a.createElement("button",{className:"button-nostyle cop-modal-header__cancel",onClick:o},"\u2715"),r.a.createElement("h1",{className:"cop-modal-header__header"},l),r.a.createElement("p",{className:"cop-modal-header__explanation"},"Are you sure you want to cancel this contract?"),c?r.a.createElement("p",{className:"cop-modal-header__explanation"},"Clyde will issue a refund to your customer for this contract."):r.a.createElement("p",{className:"cop-modal-header__explanation"},"Cancelling this contract will issue credits to your shop",r.a.createElement("strong",null,"if this sale has already been billed for by Clyde."))),r.a.createElement("div",{className:"cop-modal-content cop-cancel-modal"},r.a.createElement("div",{className:"cop-cancel-modal__contact"},r.a.createElement("label",{htmlFor:"cancel-contact-input",className:"cop-cancel-modal__label"},"You must type 'yes'"),r.a.createElement(ut.i,{type:"text",id:"cancel-contact-input",className:"cop-cancel-modal__input",onChange:this.handleChangeConfirmation,value:this.state.confirmation}))),"Shopify"===n&&r.a.createElement("div",{className:"claim-detail-resolution__group claim-detail-resolution__group--row"},r.a.createElement(ut.b,{backgroundColor:"clydeWhite",className:"",id:"issueShopifyRefund",name:"issueShopifyRefund",onChange:function(){e.setState({issueShopifyRefund:!e.state.issueShopifyRefund})},value:this.state.issueShopifyRefund,checked:this.state.issueShopifyRefund}),r.a.createElement("label",{htmlFor:"fullReplacement"},"Issue customer refund through Shopify")),r.a.createElement("div",{className:"cop-modal-actions"},r.a.createElement(ut.a,{id:"confirm-cancel-button",className:"cop-modal-actions__confirm",onClick:function(){return e.handleConfirmCancel(c)},processing:a.processing,disabled:this.state.buttonDisabled,successText:"Cancelled"},"Confirm and cancel"))):r.a.createElement("div",{className:"cop-modal-foreground__action-complete"},r.a.createElement(ut.n,{text:"Cancelled!",onSuccess:this.refreshOrder}))))}}]),a}(n.Component),Jm=Object(l.b)((function(e){return{cancelContract:e.customers.cancelContract,orderId:e.customers.selectedOrder.clydeOrderId,shopId:e.customers.selectedOrder.shopId,platform:e.auth.platform}}),(function(e){return Object(i.b)({_getOrderDetails:Ps,_cancelCancelContract:ti,_confirmCancelContract:ai,_confirmCancelPpContract:ni},e)}))(Zm),ed=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={newLength:"0"},e.componentDidMount=function(){var t=e.props.updateOEM.oemWarrantyLength;e.state.newLength!==t&&"undefined"!==typeof t&&e.setState({newLength:t})},e.handleChange=function(t){var a=t.target.value;e.setState({newLength:a})},e.sendUpdate=function(){var t=e.props,a=t.updateOEM,n=t._updateSaleOEM,r=e.state.newLength;n(a.saleId,r)},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this.props,t=e.updateOEM,a=e._closeModal,n=e._refreshOrder,o=e.orderId,c=this.state.newLength,l=this.handleChange,s=this.sendUpdate;return r.a.createElement("div",{className:"cop-modal-background",onClick:a},r.a.createElement("div",{className:"cop-modal-foreground",onClick:function(e){return e.stopPropagation()}},"finish"!==t.step?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-modal-header"},r.a.createElement("button",{className:"button-no-style cop-modal-header__cancel",onClick:a},"\u2715"),r.a.createElement("h1",{className:"cop-modal-header__header"},"Update OEM WarrantyLength"),r.a.createElement("p",null,"This sale's OEM is currently ",t.oemWarrantyLength," months")),r.a.createElement("div",{className:"cop-modal-content cop-cancel-modal"},r.a.createElement("div",{className:"cop-cancel-modal__contact"},r.a.createElement("label",{htmlFor:"cancel-contact-input",className:"cop-cancel-modal__label"},"Enter a new OEM length (in months)"),r.a.createElement(ut.i,{id:"cancel-contact-input",className:"cop-cancel-modal__input",onChange:l,value:c,typeNumber:!0}))),r.a.createElement("div",{className:"cop-modal-actions"},r.a.createElement(ut.a,{id:"confirm-cancel-button",className:"cop-modal-actions__confirm",onClick:s,processing:t.processing,successText:"Updated"},"Update"))):r.a.createElement("div",{className:"cop-modal-foreground__action-complete"},r.a.createElement(ut.n,{text:"Updated!",onSuccess:function(){return n(o)}}))))}}]),a}(n.Component),td=Object(l.b)((function(e){return{updateOEM:e.customers.updateSaleOEM,orderId:e.customers.selectedOrder.clydeOrderId,shopId:e.customers.selectedOrder.shopId}}),(function(e){return{_closeModal:function(){e({type:"CANCEL_OEM_UPDATE",payload:{}})},_updateSaleOEM:function(t,a){e(function(e,t){return function(a){a({type:"UPDATE_CONTRACT_SALE_OEM_PROCESSING",payload:{}}),a(Oe({type:"UPDATE_CONTRACT_SALE_OEM_REQ",payload:{newLength:e,saleId:t}}))}}(t,a))},_refreshOrder:function(t){e({type:"CANCEL_OEM_UPDATE",payload:{}}),e(Ps(t))}}}))(ed),ad=function(e){var t=e.product,a=e.removeItem,n=e.updateQuantity,o=e.updatePrice,c=e.idx,l=r.a.createElement("span",{className:"new-order-cart-item-info__link new-order-cart-item-info__link--uneligible"},"Not eligible");t.contractIds&&t.contractIds[0]&&(l=r.a.createElement("a",{className:"new-order-cart-item-info__link",onClick:function(e){return e.stopPropagation()},href:"".concat(window._env_.REACT_APP_HICLYDE_HOST,"/terms?pid=").concat(t.id,"&cid=").concat(t.contractIds[0]),target:"_blank",rel:"noopener noreferrer"},"View warranty details"));var s=t.price;return parseFloat(s)&&(s=+parseFloat(s).toFixed(2)),r.a.createElement("div",{className:"new-order-cart-item"},r.a.createElement("div",{className:"new-order-cart-item__left"},r.a.createElement(Mo.a,{className:"new-order-cart-item-img",alt:t.name,src:[t.imageLink,"/images/default-image.svg"]}),r.a.createElement("div",{className:"new-order-cart-item-info"},r.a.createElement("span",{className:"new-order-cart-item-info__name"},t.name),t.variantName&&r.a.createElement("span",{className:"new-order-cart-item-info__variant-name"},t.variantName),l)),r.a.createElement("div",{className:"new-order-cart-item__right"},r.a.createElement("div",{className:"new-order-cart-item-price"},r.a.createElement(ut.i,{className:"new-order-cart-item-price__input",min:"0",value:s,onChange:function(e){return o(e,c)},step:"0.01",typeNumber:!0})),r.a.createElement(ut.i,{className:"new-order-cart-item-quantity",min:"0",value:t.quantity,onChange:function(e){return n(e,c)},typeNumber:!0})),r.a.createElement("button",{className:"button-nostyle new-order-cart-item-remove",onClick:function(e){return a(e,c)}},"\u2715"))},nd=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={errors:[]},e.handleSearchChange=function(t){var a=t.currentTarget,n=a.name,r=a.value;(0,e.props._updateNewOrderInput)(n,r)},e.handleSearchSubmit=function(t){t.preventDefault();var a=e.props,n=a.newOrder.productSearch;(0,a._runNewOrderSearch)(n)},e.updateCartItemPrice=function(t,a){var n=e.props._updateNewOrderCartPrice,r=t.currentTarget.value;parseFloat(r)&&(r=+parseFloat(r).toFixed(2)),n(a,r)},e.updateCartItemQuantity=function(t,a){var n=e.props._updateNewOrderCartQuantity,r=t.currentTarget.value;n(a,parseInt(r,10))},e.removeItem=function(t,a){t.preventDefault(),t.currentTarget.blur();var n=e.props,r=n.newOrder.cart,o=n._updateCart,c=Object(E.a)(r);c.splice(a,1),o(c)},e.calculateTotalCartQuantity=function(){var t,a=e.props.newOrder.cart,n=0,r=0,o=0,c=!1,l=Object(ne.a)(a);try{for(l.s();!(t=l.n()).done;){var s=t.value;(!s.price||s.price<=0)&&(c=!0);var i=s.quantity||0,m=s.price||0;n+=i,o+=i*m,s.contractIds&&s.contractIds[0]&&(r+=i)}}catch(d){l.e(d)}finally{l.f()}return{totalProductsQuantity:n,matchedProductsQuantity:r,cartTotal:o,missingPrice:c}},e.handleSubmit=function(t,a,n,r){t.preventDefault();var o=e.props,c=o.newOrder.cart,l=o.submitOrder,s=[];c.length<=0&&s.push("submitError"),n&&s.push("priceError"),c.length>0&&a<=0&&s.push("quantityError"),e.setState({errors:s}),0===s.length&&l(r)},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.newOrder,n=a.cart,o=a.productSearch,c=t._moveToCustomerStep,l=this.state.errors,s=this.calculateTotalCartQuantity(),i=s.totalProductsQuantity,m=s.matchedProductsQuantity,d=s.cartTotal,u=s.missingPrice;return r.a.createElement("div",{className:"new-order-cart"},r.a.createElement("form",{className:"new-order-cart__search",onSubmit:this.handleSearchSubmit},r.a.createElement("label",{htmlFor:"search_products",className:"new-order-cart__search__label"},"Search products to add to order:"),r.a.createElement("div",{className:"new-order-cart__search__inputs"},r.a.createElement(ut.i,{id:"search_products",className:"new-order-cart-search__text",onChange:this.handleSearchChange,placeholder:"Product Name or SKU",name:"productSearch",value:o}),r.a.createElement("button",{className:"button-nostyle new-order-cart__search__button"},"Browse products"))),r.a.createElement("div",{className:"new-order-content"},n.length>0&&r.a.createElement("div",{className:"new-order-content__header"},r.a.createElement("div",{className:"new-order-content__header__right"},r.a.createElement("span",{className:"new-order-cart-header-price"},"Price"),r.a.createElement("span",{className:"new-order-cart-header-quantity"},"Quantity"))),r.a.createElement("div",{className:"new-order-content__items"},n.map((function(t,a){return r.a.createElement(ad,{key:"cart-".concat(a),idx:a,product:t,formatMoney:Qn,updateQuantity:e.updateCartItemQuantity,updatePrice:e.updateCartItemPrice,removeItem:e.removeItem})}))),r.a.createElement("div",{className:"new-order-content__summary"},r.a.createElement("div",{className:"new-order-content__summary__center"},r.a.createElement("div",{className:"new-order-cart-summary__text"},r.a.createElement("span",null,"Total products in this order"),r.a.createElement("span",null,i)),r.a.createElement("div",{className:"new-order-cart-summary__text"},r.a.createElement("span",null,"Eligible products in this order"),r.a.createElement("span",null,m)),r.a.createElement("div",{className:"cop-small-modal-line"}),r.a.createElement("div",{className:"new-order-cart-summary__text"},r.a.createElement("span",null,"Order Total"),r.a.createElement("span",null,Qn(d))))),r.a.createElement("div",{className:"new-order-content__actions"},l.indexOf("submitError")>-1&&r.a.createElement("span",{className:"new-order-content__actions__error"},"Cannot record an empty order."),l.indexOf("quantityError")>-1&&r.a.createElement("span",{className:"new-order-content__actions__error"},"Item quantities must be greater than zero."),l.indexOf("priceError")>-1&&r.a.createElement("span",{className:"new-order-content__actions__error"},"Item prices must be provided and greater than zero."),r.a.createElement("button",{id:"confirm-change-order-customer-button",className:"button-nostyle new-order-button new-order-button--empty",onClick:function(t){return e.handleSubmit(t,i,u,!1)}},"Record order"),r.a.createElement("button",{id:"confirm-change-order-customer-button",className:"button-nostyle new-order-button new-order-button--filled",onClick:function(t){return e.handleSubmit(t,i,u,!0)}},"Record order and email purchase link"),r.a.createElement("button",{className:"button-nostyle button-fakelink",onClick:c},"Back to Customer"))))}}]),a}(n.Component),rd=Object(l.b)((function(e){return{platform:e.auth.platform,newOrder:e.newOrder,shopId:e.auth.shopId}}),(function(e){return Object(i.b)({_moveToCustomerStep:gi,_runNewOrderSearch:vi,_updateCart:yi,_updateNewOrderCartPrice:pi,_updateNewOrderCartQuantity:_i,_updateNewOrderInput:hi},e)}))(nd),od=function(e){var t=e.cartproductIds,a=e.formatMoney,n=e.product,o=e.idx,c=e.updateCart;return r.a.createElement("div",{className:"catalogue-item"},r.a.createElement("div",{className:"catalogue-item__left"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"cat_item_checkbox_".concat(o),className:"catalogue-item__check",checked:t.indexOf(n.productId)>-1,onChange:function(e){return c(e,n)}}),r.a.createElement(Mo.a,{className:"catalogue-item-img",alt:n.name,src:[n.imageLink,"/images/default-image.svg"]}),r.a.createElement("div",{className:"catalogue-item-info"},r.a.createElement("span",{className:"catalogue-item-info__name"},n.name),r.a.createElement("span",{className:"catalogue-item-info__sku"},r.a.createElement("strong",null,"SKU: "),n.sku))),r.a.createElement("div",{className:"catalogue-item__right"},r.a.createElement("span",{className:"catalogue-item-info__price"},a(n.price))))},cd=function(e){var t=e.cartproductIds,a=e.formatMoney,n=e.product,o=e.idx,c=e.updateCart;return r.a.createElement("div",{className:"platform-catalogue-item-wrapper"},r.a.createElement("div",{className:"catalogue-item"},r.a.createElement(Mo.a,{className:"catalogue-item-img",alt:n.name,src:[n.imageLink,"/images/default-image.svg"]}),r.a.createElement("div",{className:"catalogue-item-info"},r.a.createElement("span",{className:"catalogue-item-info__name"},n.name))),r.a.createElement("ul",{className:"catalogue-item-variants"},n.variants.map((function(e,n){return r.a.createElement("li",{key:"variant-".concat(n)},r.a.createElement("div",{className:"catalogue-item__left"},r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"cat_item_checkbox_".concat(o),name:"premiumCollected",className:"catalogue-item__check",checked:t.indexOf(e.productId)>-1,onChange:function(t){return c(t,e)}}),r.a.createElement("div",{className:"catalogue-item-info"},r.a.createElement("span",{className:"catalogue-item-info__name"},"Default Title"===e.variantName?"Default Variant":e.variantName))),r.a.createElement("div",{className:"catalogue-item__right"},r.a.createElement("span",{className:"catalogue-item-info__price"},a(e.price))))}))))},ld=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={activePage:1},e.handleSearchChange=function(t){var a=t.currentTarget,n=a.name,r=a.value;(0,e.props._updateNewOrderInput)(n,r)},e.handleSearchSubmit=function(t){t.preventDefault();var a=e.props,n=a.newOrder.productSearch;(0,a._runNewOrderSearch)(n)},e.addOrRemoveFromCart=function(t,a){t.currentTarget.blur();var n=e.props,r=n.newOrder.cart,o=n._updateCart,c=Object(E.a)(r),l=r.findIndex((function(e){return e.productId===a.productId}));if(l>-1)c.splice(l,1);else{var s=a;s.quantity=1,c.push(s)}o(c)},e.handlePageChange=function(t){var a=e.props,n=a.newOrder.productSearch;(0,a._runNewOrderSearch)(n,t),e.setState({activePage:t})},e.selectCatalogueItemComponent=function(){switch(e.props.platform){case"Shopify":case"BigCommerce":return cd;case"Clyde":default:return od}},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.newOrder,n=a.cart,o=a.productCatalogue,c=a.productCatalogueCount,l=a.productSearch,s=t._hideCatalogueModal,i=t.processing,m=this.state.activePage,d=this.selectCatalogueItemComponent(),u=n.map((function(e){return e.productId}));return r.a.createElement("div",{className:"cop-modal-background-light",onClick:s},r.a.createElement("div",{className:"cop-small-modal-foreground catalogue-modal",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"cop-small-modal-header"},r.a.createElement("button",{className:"button-nostyle cop-small-modal-header__cancel",onClick:s},"\u2715"),r.a.createElement("h6",{className:"cop-small-modal-header__header"},"Select products")),i?r.a.createElement("div",{className:"cop-modal--loading"},r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"catalogue-modal__search"},r.a.createElement("form",{className:"catalogue-modal-search__form",onSubmit:this.handleSearchSubmit},r.a.createElement(ut.i,{id:"search_products",className:"catalogue-modal-search__form__text",onChange:this.handleSearchChange,placeholder:"Product Name or SKU",name:"productSearch",value:l})),r.a.createElement(gr.a,{innerClass:"pagination catalogue-modal-search__pagination",itemClass:"page-item",linkClass:"page-link",activePage:m,itemsCountPerPage:25,totalItemsCount:c,pageRangeDisplay:5,onChange:this.handlePageChange})),r.a.createElement("div",{className:"cop-small-modal-line"}),r.a.createElement("div",{className:"cop-small-modal-content"},o.map((function(t,a){return r.a.createElement(d,{key:"cat-".concat(a),product:t,idx:a,cartproductIds:u,formatMoney:Qn,updateCart:e.addOrRemoveFromCart})})))),r.a.createElement("div",{className:"catalogue-modal-bottom"},r.a.createElement("button",{className:"catalogue-modal__button",onClick:s},"Add To Order"),r.a.createElement("span",{className:"catalogue-modal__count"},n.length," ",1===n.length?"item":"items"," in order"))))}}]),a}(n.Component),sd=Object(l.b)((function(e){return{platform:e.auth.platform,newOrder:e.newOrder}}),(function(e){return Object(i.b)({_updateCart:yi,_hideCatalogueModal:ui,_updateNewOrderInput:hi,_runNewOrderSearch:vi},e)}))(ld),id={US:[{value:"AL",name:"Alabama"},{value:"AK",name:"Alaska"},{value:"AZ",name:"Arizona"},{value:"AR",name:"Arkansas"},{value:"CA",name:"California"},{value:"CO",name:"Colorado"},{value:"CT",name:"Connecticut"},{value:"DE",name:"Delaware"},{value:"DC",name:"Washington D.C."},{value:"FL",name:"Florida"},{value:"GA",name:"Georgia"},{value:"HI",name:"Hawaii"},{value:"ID",name:"Idaho"},{value:"IL",name:"Illinois"},{value:"IN",name:"Indiana"},{value:"IA",name:"Iowa"},{value:"KS",name:"Kansas"},{value:"KY",name:"Kentucky"},{value:"LA",name:"Louisiana"},{value:"ME",name:"Maine"},{value:"MD",name:"Maryland"},{value:"MA",name:"Massachusetts"},{value:"MI",name:"Michigan"},{value:"MN",name:"Minnesota"},{value:"MS",name:"Mississippi"},{value:"MO",name:"Missouri"},{value:"MT",name:"Montana"},{value:"NE",name:"Nebraska"},{value:"NV",name:"Nevada"},{value:"NH",name:"New Hampshire"},{value:"NJ",name:"New Jersey"},{value:"NM",name:"New Mexico"},{value:"NY",name:"New York"},{value:"NC",name:"North Carolina"},{value:"ND",name:"North Dakota"},{value:"OH",name:"Ohio"},{value:"OK",name:"Oklahoma"},{value:"OR",name:"Oregon"},{value:"PA",name:"Pennsylvania"},{value:"RI",name:"Rhode Island"},{value:"SC",name:"South Carolina"},{value:"SD",name:"South Dakota"},{value:"TN",name:"Tennessee"},{value:"TX",name:"Texas"},{value:"UT",name:"Utah"},{value:"VT",name:"Vermont"},{value:"VA",name:"Virginia"},{value:"WA",name:"Washington"},{value:"WV",name:"West Virginia"},{value:"WI",name:"Wisconsin"},{value:"WY",name:"Wyoming"}],CA:[{value:"ON",name:"Ontario"},{value:"PE",name:"Prince Edward Island"},{value:"NL",name:"Newfoundland and Labrador"}]},md=function(e){var t=e.customerInfo,a=e.errors,n=e.handleTextChange,o={firstName:"First Name*",lastName:"Last Name*",phone:"Phone*",email:"Email*",address1:"Address 1*",address2:"Address 2",city:"City*",country:"Country*",province:"State/Province*",zip:"Zip Code*"},c=Object.keys(id);return r.a.createElement("div",{className:"customer-form"},r.a.createElement("div",{className:"row"},Object.keys(o).map((function(e){return r.a.createElement("div",{className:"col-6",key:"".concat(e)},r.a.createElement("label",{className:gt()("customer-form-label",{"customer-form-label--error":a.indexOf(e)>=0}),htmlFor:e},o[e]||e),function(e){switch(e){case"province":return r.a.createElement("select",{id:"".concat(e),className:"w-input",defaultValue:t[e]||"",name:e,onChange:n},id[t.country].map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)})));case"country":return r.a.createElement("select",{id:"".concat(e),className:"w-input",defaultValue:t[e]||"",name:e,onChange:n},c.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)})));default:return r.a.createElement(ut.i,{id:"".concat(e),className:"w-input",onChange:n,name:e,value:t[e]||""})}}(e))}))))},dd=function(e){return!(e&&!Da.a.isEmpty(e))||!Da.a.isMobilePhone(e)},ud=function(e,t){var a=Object.keys(id),n=id[t];return!a.find((function(e){return e===t}))||(!n.find((function(t){return t.value===e}))||(!!Da.a.isEmpty(t)||!!Da.a.isEmpty(e)))},pd=function(e,t){for(var a=[],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];if(!t||!t[o])switch(o){case"firstName":case"lastName":case"address1":case"city":Da.a.isEmpty(e[o])&&a.push(o);break;case"email":Da.a.isEmail(e.email)||a.push("email");break;case"phone":dd(e.phone)&&a.push("phone");break;case"province":ud(e.province.toUpperCase(),e.country)&&a.push("province");break;case"country":Da.a.equals(e.country,"US")||Da.a.equals(e.country,"CA")||a.push("country");break;case"zip":!Da.a.isEmpty(e.zip)&&Da.a.isPostalCode(e.zip,e.country)||a.push("zip")}}return a},_d=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={errors:[]},e.handleChange=function(t){var a=e.props._updateNewOrderCustomerInput,n=t.target;a(n.name,n.value)},e.handleSubmit=function(t){t.preventDefault();var a=e.props,n=a.newOrder.customerInfo,r=a._moveToCartStep,o=pd(n,{phone:!0});e.setState({errors:o}),0===o.length&&r()},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this.props.newOrder.customerInfo,t=this.state.errors;return r.a.createElement("div",{className:"new-order-customer"},r.a.createElement("div",{className:"new-order-content"},r.a.createElement(md,{customerInfo:e,errors:t,handleTextChange:this.handleChange}),r.a.createElement("div",{className:"new-order-content__actions"},r.a.createElement("button",{className:"button-nostyle new-order-button new-order-button--filled",onClick:this.handleSubmit},"Add Products To Order"))))}}]),a}(n.Component),hd=Object(l.b)((function(e){return{newOrder:e.newOrder}}),(function(e){return Object(i.b)({_moveToCartStep:Ei,_updateNewOrderCustomerInput:fi},e)}))(_d),Ed=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).submitOrder=function(t){var a=e.props,n=a.newOrder,r=n.cart,o=n.customerInfo;(0,a._submitNewOrder)(r,o,t)},e.stepSwitcher=function(){var t,a;switch(e.props.newOrder.step){case"customer":t="Add a customer",a=r.a.createElement(hd,null);break;case"cart":default:t="Create an order",a=r.a.createElement(rd,{submitOrder:e.submitOrder})}return{headerText:t,contentComponent:a}},e.finishSale=function(){var t=e.props,a=t.newOrder,n=a.orderId,r=a.customerInfo,o=t._finishNewOrder,c=t._populateCustomersStateWithNewOrderInfo;o(),c(n,r)},e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props;(0,e._countProductCatalgoue)(e.shopId)}},{key:"render",value:function(){var e=this.props,t=e.newOrder,a=t.actionComplete,n=t.productCatalogue,o=t.requestProcessing,c=t.showCatalogueModal,l=t.submitProcessing,s=e.shopName,i=e._hideNewOrderModal,m=this.stepSwitcher(),d=m.contentComponent,u=m.headerText;return r.a.createElement("div",{className:"cop-modal-background",onClick:i},r.a.createElement("div",{className:"cop-modal-foreground cop-modal-foreground--cop-bulk-sale",onClick:function(e){return e.stopPropagation()}},c&&r.a.createElement(sd,{processing:o,productCatalogue:n}),a?r.a.createElement("div",{className:"cop-modal-foreground__action-complete"},r.a.createElement(ut.n,{text:"Recorded!",onSuccess:this.finishSale})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-modal-header"},r.a.createElement("button",{className:"button-nostyle cop-modal-header__cancel",onClick:i},"\u2715"),r.a.createElement("p",{className:"cop-modal-header__explanation"},s),r.a.createElement("h1",{className:"cop-modal-header__header"},u)),l?r.a.createElement("div",{className:"cop-modal--loading"},r.a.createElement(ut.l,{dotSize:"large",dotColor:"clydeBlack"})):r.a.createElement("div",{className:"cop-modal-content"},d))))}}]),a}(n.Component),gd=Object(l.b)((function(e){return{newOrder:e.newOrder,shopId:e.auth.shopId,shopName:e.profile.shopName}}),(function(e){return Object(i.b)({_countProductCatalgoue:bi,_finishNewOrder:Oi,_hideNewOrderModal:di,_submitNewOrder:Ni,_populateCustomersStateWithNewOrderInfo:ri},e)}))(Ed),fd=function(e){var t=e.contactInfo,a=e._handleTextChange,n={labels:{address1:"Address 1",address2:"Address 2",country:"Country",city:"City",email:"Email",firstName:"First Name",lastName:"Last Name",phoneNumber:"Phone",province:"State/Province",zip:"Zip"},fields:Object.keys(t)},o=Object.keys(id);return r.a.createElement("div",{className:"cop-change-order-customer__contact-form"},r.a.createElement("div",{className:"row"},n.fields.map((function(e){return r.a.createElement("div",{className:"col-6",key:e},r.a.createElement("label",{htmlFor:e},n.labels[e]||e),function(e){switch(e){case"province":return r.a.createElement("select",{id:"".concat(e),className:"w-input",defaultValue:t[e]||"",name:e,onChange:a},id[t.country||"US"].map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)})));case"country":return r.a.createElement("select",{id:"".concat(e),className:"w-input",defaultValue:t[e]||"US",name:e,onChange:a},o.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})));default:return r.a.createElement(ut.i,{id:"".concat(e),className:"w-input",onChange:a,name:e,value:t[e]||""})}}(e))}))))},bd=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={customerInfo:{email:"",phoneNumber:"",firstName:"",lastName:"",address1:"",address2:"",city:"",country:"US",province:"",zip:""},hasError:null,validRequest:!1,validTransfer:!1},e.submitChange=function(){var t=e.props,a=t.orderId,n=t.userId,r=t._submitChange,o=t.selectedOrder.address.country,c=t.shopId,l=e.state,s=l.customerInfo,i=l.validRequest,m=l.validTransfer,d=null;o!==s.country&&(d="Transfers are only available to customers in ".concat(o)),i&&m||(d="Please verify this transfer is valid");for(var u=0,p=Object.keys(s);u<p.length;u++){var _=p[u];if(!s[_]&&"address2"!==_){d="All fields required (except address 2)";break}}e.setState({hasError:d}),d||r(s,a,n,c,"dashboard")},e.handleChange=function(t){var a=Object(d.a)({},e.state.customerInfo),n=t.target,r=n.name,o=n.value;a[r]=o,e.setState({customerInfo:a,hasError:null})},e.toggleCheck=function(t){var a=t.target,n=a.name,r=a.checked;e.setState(Object(b.a)({},n,r))},e}return Object(ke.a)(a,[{key:"render",value:function(){var e=this.props,t=e.processing,a=e.finished,n=e._closeModal,o=this.state,c=o.customerInfo,l=o.validTransfer,s=o.validRequest,i=o.hasError;return r.a.createElement("div",{className:"cop-modal-background cop-change-order-customer",onClick:n},r.a.createElement("div",{className:"cop-modal-foreground",onClick:function(e){return e.stopPropagation()}},a?r.a.createElement("div",{className:"cop-modal-foreground__action-complete"},r.a.createElement(ut.n,{text:"Order updated!",onSuccess:n})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cop-modal-header"},r.a.createElement("button",{className:"button-no-style cop-modal-header__cancel",onClick:n},"\u2715"),r.a.createElement("p",{className:"cop-modal-header__explanation"},"Change customer information on this specific order"),r.a.createElement("h1",{className:"cop-modal-header__header"},"Update Order Info")),r.a.createElement("div",{className:"cop-modal-content"},r.a.createElement(fd,{contactInfo:c,_handleTextChange:this.handleChange})),r.a.createElement("ul",{className:"cop-change-order-customer__verifications"},r.a.createElement("li",null,r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"validRequest",name:"validRequest",onChange:this.toggleCheck,value:s}),r.a.createElement("label",{className:"checkbox-label cop-change-order-customer__verifications__label",htmlFor:"validRequest"},"I have verified that the individual requesting this update is the same individual that made this order.")),r.a.createElement("li",null,r.a.createElement(ut.b,{backgroundColor:"clydeBlack",id:"validTransfer",name:"validTransfer",onChange:this.toggleCheck,value:l}),r.a.createElement("label",{className:"checkbox-label cop-change-order-customer__verifications__label",htmlFor:"validTransfer"},"If I am transferring this information to a different individual, I have communicated this transfer to the appropriate insurance partner."))),i&&r.a.createElement("p",{className:"cop-change-order-customer__error"},i),r.a.createElement("div",{className:"cop-modal-actions"},r.a.createElement(ut.a,{className:"cop-modal-actions__confirm",id:"confirm-change-order-customer-button",onClick:this.submitChange,processing:t,successText:"Updated!"},"Update Order Info")))))}}]),a}(n.Component),vd=Object(l.b)((function(e){var t=e.auth,a=e.customers;return{finished:a.changeOrderCustomer.finished,orderId:a.selectedOrder.clydeOrderId,processing:a.changeOrderCustomer.processing,userId:t.userId,selectedOrder:a.selectedOrder,shopId:t.shopId}}),(function(e){return{_closeModal:function(){e({type:"HIDE_CHANGE_ORDER_CUSTOMER",payload:{}})},_submitChange:function(t,a,n,r,o){e(function(e,t,a,n,r){return function(o){o({type:"SUBMIT_ORDER_CUSTOMER_PROCESSING",payload:{}}),o(Oe({type:"UPDATE_ORDER_CUSTOMER_REQ",payload:{customer:e,cartId:t,userId:a,shopId:n,source:r}}))}}(t,a,n,r,o))}}}))(bd),yd=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;return Object(je.a)(this,a),(e=t.call(this)).stepSwitcher=function(){var t=e.props,a=t.history,n=t.step,o=t.shopId,c=t.platform;switch(n){case"orders":return r.a.createElement(Di,{shopId:o,platform:c});case"products":case"registrations":return r.a.createElement(vm,{history:a,shopId:o,step:n});case"customers":default:return r.a.createElement(Ii,{shopId:o,platform:c,handleRegistrationCsvExport:e.handleRegistrationCsvExport})}},e.modalSwitcher=function(){var t=e.props,a=t.history,n=t.modal;switch(n?document.body.classList.add("overflow-off"):document.body.classList.remove("overflow-off"),n){case"resendSaleEmail":return r.a.createElement(Nm,null);case"resendPpEmail":return r.a.createElement(Cm,null);case"displayClaimHistory":return r.a.createElement(Im,{history:a});case"fileClaim":return r.a.createElement(Wm,null);case"bulkContractSale":return r.a.createElement(Xm,null);case"cancelContract":return r.a.createElement(Jm,null);case"newOrder":return r.a.createElement(gd,null);case"changeOrderCustomer":return r.a.createElement(vd,null);case"updateOEM":return r.a.createElement(td,null);case null:default:return null}},e.handleRegistrationCsvExport=function(){e.csvLinkRef.current.link.click()},e.csvLinkRef=Object(n.createRef)(),e}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shopId;(0,e._getProductRegistrationsExport)(t)}},{key:"render",value:function(){var e=this.props,t=e.productRegistrationsExport,a=e.step,n=(new Date).toLocaleDateString().replace(/\//g,"_"),o="".concat(n,"_product_registrations.csv");return r.a.createElement("div",{className:"page-container"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | Customers")),r.a.createElement("div",{className:"page-layout"},t.length>0&&"customers"!==a&&r.a.createElement("div",{className:"actions-container"},r.a.createElement(ut.j,{id:"registrations-export",position:"right",label:r.a.createElement("div",{className:"actions-container__tooltip__text"},"Export Product Registrations"),hideIndicator:!0},r.a.createElement("div",{onClick:this.handleRegistrationCsvExport,className:"actions-container__button","data-tip":!0,"data-for":"registrations-export"},r.a.createElement("img",{className:"actions-container__button__image",alt:"Export product registrations",src:"/images/download.svg"})))),r.a.createElement(Do.CSVLink,{ref:this.csvLinkRef,className:"hidden-link",filename:o,data:t}),r.a.createElement("div",{className:"title-wrapper"},this.modalSwitcher(),this.stepSwitcher())))}}]),a}(n.Component),Nd=Object(l.b)((function(e){return{modal:e.customers.modal,step:e.customers.step,platform:e.auth.platform,shopId:e.auth.shopId,productRegistrationsExport:e.productRegistrations.productRegistrationsExport}}),(function(e){return Object(i.b)({_getProductRegistrationsExport:po},e)}))(yd),Od=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){var e;Object(je.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).moment=Object(Fn.extendMoment)(O.a),e.state={dateRange:{startDate:new Date,endDate:new Date},showCalendar:!1},e.handleRangeChange=function(t){e.setState({showCalendar:!1,dateRange:{startDate:t.startDate.format(),endDate:t.endDate.format()}})},e.toggleCalendar=function(t){t.stopPropagation(),e.setState({showCalendar:!e.state.showCalendar})},e.buildDefaultRanges=function(){return{"Past 14 Days":{startDate:e.moment().subtract("14","day"),endDate:e.moment()},"Past Month":{startDate:e.moment().subtract("1","month"),endDate:e.moment()},"Past 3 Months":{startDate:e.moment().subtract("3","month"),endDate:e.moment()},"Past 6 Months":{startDate:e.moment().subtract("6","month"),endDate:e.moment()},"Past Year":{startDate:e.moment().subtract("1","year"),endDate:e.moment()}}},e.handleSubmit=function(){e.props._submitClaimsExport(e.state.dateRange,e.props.allClaims)},e}return Object(ke.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(!0===e.claimExportFile.download){var a=this.props.allClaims?"":"LW ",n=document.createElement("a");n.href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,".concat(e.claimExportFile.data),n.download="".concat(a,"Claims Export - ").concat(qn(this.state.dateRange.startDate),"-").concat(qn(this.state.dateRange.endDate),".xlsx"),n.click(),n.remove(),setTimeout((function(){t.props._setClaimsDownloadFalse(),t.props._cancelClaimsExport()}),500)}}},{key:"componentDidMount",value:function(){this.setState({dateRange:{startDate:this.moment().subtract("14","day"),endDate:this.moment()}})}},{key:"render",value:function(){return r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-container__backdrop"}),r.a.createElement("div",{className:"clyde-modal-content clyde-modal-content--export-modal"},r.a.createElement("div",{className:"export-modal-content"},r.a.createElement("div",{className:"export-modal-content__cancel-export",onClick:this.props._cancelClaimsExport},"\u2715"),r.a.createElement("h1",null,this.props.allClaims?"Export claims data":"Export limited warranty claims data"),r.a.createElement("br",null),r.a.createElement("h5",null,this.props.allClaims?"Download an excel file containing claims recorded between the below dates.":"Download an excel file containing your limited warranty claims recorded between the below dates."),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("div",{className:"export-modal-content__dates",onClick:this.toggleCalendar},r.a.createElement("div",{className:"export-modal-content__dates__group"},r.a.createElement("label",{htmlFor:"startDate"},"Start Date"),r.a.createElement(ut.i,{className:"export-modal-content__dates__group-inputs",name:"startDate",value:qn(this.state.dateRange.startDate),readOnly:!0})),r.a.createElement("div",{className:"export-modal-content__dates__group"},r.a.createElement("label",{htmlFor:"endDate"},"End Date"),r.a.createElement(ut.i,{className:"export-modal-content__dates__group-inputs",name:"endDate",value:qn(this.state.dateRange.endDate),readOnly:!0}))),r.a.createElement("br",null),r.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"export-modal-content__calendar--".concat(this.state.showCalendar?"visible":"invisible")},r.a.createElement(Mn.DateRange,{maxDate:this.moment(),minDate:this.moment("2018-06-01"),ranges:this.buildDefaultRanges(),onChange:this.handleRangeChange,moveRangeOnFirstSelection:!1,twoStepChange:!0,showMonthAndYearPickers:!0,showMonthArrow:!0,showSelectionPreview:!0})))),r.a.createElement("div",{className:"export-modal-content__submit-row"},r.a.createElement(ut.a,{className:"export-modal-content__submit-button",onClick:this.handleSubmit,processing:this.claimExportProcessing,successText:"Done"},"Export")))))}}]),a}(n.Component),Cd=Object(l.b)((function(e){return{claimExportFile:e.claimsList.claimsExportFile,claimExportProcessing:e.claimsList.claimsExportProcessing}}),(function(e){return Object(i.b)({_submitClaimsExport:Pn,_setClaimsDownloadFalse:Tn},e)}))(Od),Sd=[{text:"Requires Action",value:"approved"}].concat(Object(E.a)(Ji.map((function(e){var t=e.value,a=e.label;return"underClydeReview"===t?a="Under Clyde Review":"underAdminReview"===t&&(a="Under Admin Review"),{value:t,text:a}})))),Id=[{text:"Limited Warranty",value:"limitedWarranty"},{text:"Extended Warranty",value:"extendedWarranty"}],Rd=[{text:"Updated",value:"updated"}],Pd=[{text:"Name",value:"name"},{text:"Serial Number",value:"serial"}],Td=(a(664),function(e){var t=e.claims,a=e.claimsCount,o=e.pageNumber,c=e.selectedFilter,l=e.selectedSort,s=e.searchType,i=e.searchValue,m=e.history,d=e.fetchPending,u=e.selectedWarrantyFilter,p=e.manageOEMWarranty,_=e._getShopClaims,h=e._setClaimPageNumber,E=e._setClaimsFilter,g=e._setClaimsSort,f=e._setSearchType,b=e._setSearchValue,v=e._setWarrantyFilter,y=e._getShopSettings,N=Object(n.useState)(!1),O=Object(an.a)(N,2),C=O[0],S=O[1],I=Object(n.useState)(!1),R=Object(an.a)(I,2),P=R[0],T=R[1],w={pageNumber:o,searchType:s,searchValue:i,filter:c,sort:l};Object(n.useEffect)((function(){y()}),[]),Object(n.useEffect)((function(){y()}),[]),Object(n.useEffect)((function(){_({pageNumber:o,searchType:s,searchValue:i,filter:c,sort:l,warrantyFilter:u})}),[_,o,s,i,c,l,u,p]);var j=Pd.find((function(e){return e.value===s})),k=j?j.text:"Email";return r.a.createElement("div",{className:"page-container"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | All Claims")),r.a.createElement("div",{className:"page-layout"},r.a.createElement("div",{className:"actions-container"},r.a.createElement(ut.j,{id:"export-claims",position:"right",label:r.a.createElement("div",{className:"actions-container__tooltip__text"},"Download all claims data"),hideIndicator:!0},r.a.createElement("div",{onClick:function(){return S(!0),void T(!0)},"data-tip":!0,"data-for":"export-invoice",className:"actions-container__button"},r.a.createElement("img",{className:"actions-container__button__image actions-container__button__image--export",alt:"Export rate sheet",src:"/images/Claims.svg"}))),p&&r.a.createElement(ut.j,{id:"export-claims",position:"right",label:r.a.createElement("div",{className:"actions-container__tooltip__text"},"Download limited warranty claims data"),hideIndicator:!0},r.a.createElement("div",{onClick:function(){return S(!0)},"data-tip":!0,"data-for":"export-invoice",className:"actions-container__button"},r.a.createElement("img",{className:"actions-container__button__image actions-container__button__image--export",alt:"Export rate sheet",src:"/images/download.svg"})))),r.a.createElement("div",{className:"claims-summary"},r.a.createElement("h1",null,"Claims"),r.a.createElement("section",{className:"claims-summary__table-info"},r.a.createElement("div",{className:"claims-summary__table-info__scopes"},r.a.createElement("div",{className:"claims-summary__scopes__search"},r.a.createElement("h4",null,"Search by"),r.a.createElement(ut.g,{className:"claims-summary__search__dropdown",name:"claimsSearch",defaultLabel:"Email",onChange:function(e){var t=e.target.value||"email";f(t)},options:Pd})),r.a.createElement("div",{className:"claims-summary__scopes__search"},r.a.createElement("h4",null,k),r.a.createElement(ut.i,{className:"claims-summary__scopes__search__input",name:"claimsSearchValue",onChange:function(e){return b(e.target.value)},value:i,onSubmit:function(){return h(1,w)}})),r.a.createElement("div",{className:"claims-summary__scopes__filter"},r.a.createElement("h4",null,"Filter"),r.a.createElement(ut.g,{className:"claims-summary__filter__dropdown",name:"claimsFilters",defaultValue:c,defaultLabel:"None",onChange:function(e){var t=e.target.value||"none";E(t,w)},options:Sd})),p&&r.a.createElement("div",{className:"claims-summary__scopes__filter"},r.a.createElement("h4",null,"Coverage Type"),r.a.createElement(ut.g,{className:"claims-summary__filter__dropdown",name:"warrantyFilters",defaultValue:u,defaultLabel:"All",onChange:function(e){return v(e.target.value,w)},options:Id})),r.a.createElement("div",{className:"claims-summary__scopes__sort"},r.a.createElement("h4",null,"Sort"),r.a.createElement(ut.g,{className:"claims-summary__sort__dropdown",name:"claimsSort",defaultValue:l,defaultLabel:"Requires Action",onChange:function(e){var t=e.target.value||"requiresAction";g(t,w)},options:Rd}))),r.a.createElement(gr.a,{itemClass:"page-item",linkClass:"page-link",activePage:o,itemsCountPerPage:15,totalItemsCount:a,pageRangeDisplay:5,onChange:function(e){h(e,w)}})),r.a.createElement("table",{className:"claims-summary__table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{className:"claim-summary__table__dot"}),"Email"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Updated"),p&&r.a.createElement("th",null,"Coverage Type"),r.a.createElement("th",null,"Claim Status"),r.a.createElement("th",null,"Needs Resolution"))),r.a.createElement("tbody",{className:"claims-summary__table__body"},t.map((function(e){return r.a.createElement("tr",{key:e.claimResolutionId||e.claimId,onClick:function(){return m.push("/claims/".concat(e.claimId))},className:"claims-summary__table__row--".concat(e.claimClass)},r.a.createElement("td",null,r.a.createElement("span",{className:"claim-summary__table__dot"}),e.email),r.a.createElement("td",null,e.firstName," ",e.lastName),r.a.createElement("td",null,e.lastUpdated),p&&r.a.createElement("td",null,"limitedWarranty"===e.warrantyType?"Limited Warranty":"Extended Warranty"),r.a.createElement("td",null,tm(e.resolutionState||e.claimState)),r.a.createElement("td",null,"approved"!==e.claimState&&"repairInitiated"!==e.claimState||e.claimResolutionId?"No":"Yes"))})),!t.length&&!d&&r.a.createElement("tr",{className:"claims-summary__table__row--empty"},r.a.createElement("td",null,"No Claims Found")))),d&&r.a.createElement(ut.l,{dotColor:"clydeBlack",dotSize:"large"}),C&&r.a.createElement(Cd,{allClaims:P,_cancelClaimsExport:function(){return S(!1),void T(!1)}}))))}),wd=Object(l.b)((function(e){return{claims:e.claimsList.claims,claimsCount:e.claimsList.claimsCount,pageNumber:e.claimsList.pageNumber,selectedFilter:e.claimsList.selectedFilter,selectedSort:e.claimsList.selectedSort,searchType:e.claimsList.searchType,searchValue:e.claimsList.searchValue,fetchPending:e.claimsList.fetchPending,selectedWarrantyFilter:e.claimsList.selectedWarrantyFilter,manageOEMWarranty:e.autopilot.manageOEMWarranty}}),(function(e){return{_getShopClaims:function(t){e(In(t))},_setClaimPageNumber:function(t,a){e(function(e,t){return function(a){a({type:"SET_CLAIMS_PAGE_NUMBER",payload:{pageNumber:e}}),a(In(Object(d.a)(Object(d.a)({},t),{},{pageNumber:e})))}}(t,a))},_setClaimsFilter:function(t,a){e(function(e,t){return function(a){a({type:"SET_CLAIMS_FILTER",payload:{filter:e}}),a(In(Object(d.a)(Object(d.a)({},t),{},{pageNumber:1,filter:e})))}}(t,a))},_setClaimsSort:function(t,a){e(function(e,t){return function(a){a({type:"SET_CLAIMS_SORT",payload:{sort:e}}),a(In(Object(d.a)(Object(d.a)({},t),{},{pageNumber:1,sort:e})))}}(t,a))},_setSearchType:function(t){e(function(e){return function(t){t({type:"SET_CLAIMS_SEARCH_TYPE",payload:{type:e}})}}(t))},_setSearchValue:function(t){e(function(e){return function(t){t({type:"SET_CLAIMS_SEARCH_VALUE",payload:{value:e}})}}(t))},_setWarrantyFilter:function(t,a){e(function(e,t){return function(a){a({type:"SET_WARRANTY_FILTER",payload:{filter:e}}),a(In(Object(d.a)(Object(d.a)({},t),{},{pageNumber:1,warrantyFilter:e})))}}(t,a))},_getShopSettings:function(){e(io())}}}))(Td),jd=function(e){var t=e.supportingInfoProcessing,a=e.supportingInfoFiles,n=e.openImageModal;return t?r.a.createElement(ut.l,{className:"claims-detail-card__group__file-list__loading",dotColor:"clydeBlack",dotSize:"small"}):a&&0!==a.length?r.a.createElement(r.a.Fragment,null,a.map((function(e,t){return r.a.createElement("button",{className:"button-no-style claims-file-button",key:t,onClick:function(t){n(t,e)}},"File ",t+1)}))):r.a.createElement("span",null,"None")},kd=function(e){switch(e){case null:return"Not reported";case!0:return"Yes";case!1:return"No";default:return"Unknown"}},Ad=function(e){var t=e.claim,a=t.claimState,o=t.claimType,c=t.createdAt,l=t.denialReason,s=t.descriptionOfProblem,i=t.failureDate,m=t.productStillFunctional,d=t.productUsedAsIntended,u=(t.programType,t.claimIssueTypes),p=e.claimProcessing,_=e.supportingInfoFiles,h=e.supportingInfoProcessing,E=Object(n.useState)(!1),g=Object(an.a)(E,2),f=g[0],v=g[1],y=Object(n.useState)(""),N=Object(an.a)(y,2),O=N[0],C=N[1],S=Object(n.useState)(""),I=Object(an.a)(S,2),R=I[0],P=I[1],T=c?qn(c):null,w=i?qn(i):null,j=gt()("claim-history-card__event__info",Object(b.a)({},"claim__font--".concat(a),!!a)),k=gt()("claims-detail-card__group__info",{"claims-detail-card__group__info--small-text":s.length>400}),A=(null===u||void 0===u?void 0:u.length)?u.map((function(e){return e.typeLabel})).join(", "):function(e){switch(e){case"arrivedDamaged":return"Arrived Damaged";case"lossOrTheft":return"Loss Or Theft";case"accidentalDamage":return"Accidental Damage";case"stoppedWorking":return"Stopped Working";default:return"None"}}(o);return r.a.createElement("div",{className:"claims-detail-card claims-detail-card--claim"},r.a.createElement(ut.k,{active:f,className:"claim-detail-supporting-file-modal",closeModal:function(){v(!1),P(""),C("")},headerText:"Supporting Info File"},"application/pdf"===R?r.a.createElement("a",{download:"supporting_info.pdf",href:O},"Download PDF"):r.a.createElement("img",{alt:"supporting info file",src:O})),r.a.createElement("h3",null,"Claim"),p?r.a.createElement(ut.l,{className:"claims-detail-card__loading",dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Status:"),r.a.createElement("span",{className:j},tm(a)),l&&r.a.createElement("span",{className:"claims-detail-card__group__title"},om(l))),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Submitted On:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},T)),w&&r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Failure Date:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},w)),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Description:"),r.a.createElement("span",{className:k},s)),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Issue Type:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},A)),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Covered product was used as intended:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},kd(d))),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Covered product is still functional:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},kd(m))),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Files:"),r.a.createElement("div",{className:"claims-detail-card__group__file-list"},r.a.createElement(jd,{supportingInfoProcessing:h,supportingInfoFiles:_,openImageModal:function(e,t){v(!0),P(t.type),C("data:".concat(t.type,";base64,").concat(t.content))}})))))},Dd=function(e){var t=e.claimHistory,a=e.denialReason,n=e.processing,o=(e.serviceType,52*(t.length-1));return r.a.createElement("div",{className:"claim-history-card claims-detail-card--claim-history"},r.a.createElement("h3",null,"Claim history"),n?r.a.createElement(ut.l,{className:"claims-detail-card__loading",dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement(r.a.Fragment,null,t.map((function(e,t){var n=O()(e.createdAt).format("MMMM DD, YYYY \u2013 h:mm A");return r.a.createElement("div",{className:"claim-history-card__event",key:t},r.a.createElement("div",{className:"claim-history-card__dot"}),r.a.createElement("div",null,r.a.createElement("span",{className:"claims-detail-card-event__title"},n),r.a.createElement("span",{className:"claim-history-card__event__info"},tm(e.claimState)),nm(e.claimState)&&r.a.createElement("span",{className:"claims-detail-card-event__title"},om(a))))})),t.length>1&&r.a.createElement("div",{className:"claim-history-card__line",style:{height:"".concat(o,"px")}})))},Ld=function(e){var t=e.contract,a=t.contractAdh,n=t.contractDop,o=t.contractId,c=t.contractTerm,l=t.deliveryDate,s=e.transferHistory,i=e.processing,m="";if(a){var d=l||n;m=O()(d).add(c,"years").format("MMMM DD, YYYY")}else{var u=1===c?"year":"years";m="".concat(c," ").concat(u," after limited warranty")}return r.a.createElement("div",{className:"claims-detail-card claims-detail-card--contract"},r.a.createElement("h3",null,"Contract"),i?r.a.createElement(ut.l,{className:"claims-detail-card__loading",dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Contract ID:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},o)),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Expires:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},m)),s&&s.length&&r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Transferred on:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},O()(s[0].transferDate).format("MMMM DD, YYYY")),r.a.createElement("span",{className:"claims-detail-card__group__info"},s[0].customerEmail))))},xd=function(e){var t=e.customer,a=t.firstName,n=t.lastName,o=t.altName,c=t.addressChangeNote,l=t.email,s=t.phone,i=t.address,m=t.city,d=t.state,u=t.zip,p=e.history,_=e.processing,h=e._populateCopWithCustomer;return r.a.createElement("div",{className:"claims-detail-card claims-detail-card--customer"},r.a.createElement("h3",null,"Customer"),_?r.a.createElement(ut.l,{className:"claims-detail-card__loading",dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Customer:"),r.a.createElement("button",{className:"button-nostyle button-fakelink claims-detail-card__group__info",onClick:function(){var e={firstName:a,lastName:n};l?(e.contact=l,e.contactType="email"):(e.contact=s,e.contactType="phone"),h(e),p.push("/customers")}},a," ",n)),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Email:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},l||"N/A")),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Phone:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},s||"N/A")),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Address:"),o&&r.a.createElement("span",{className:"claims-detail-card__group__info"},o),r.a.createElement("span",{className:"claims-detail-card__group__info"},i),r.a.createElement("span",{className:"claims-detail-card__group__info"},m,", ",d," ",u),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",{className:"claims-detail-card__group__info"},r.a.createElement("strong",null,"Address Was Updated")),r.a.createElement("span",{className:"claims-detail-card__group__info"},"Reason Given: ",c)))))},Fd=function(e){var t=e.product,a=t.productManufacturer,n=t.productName,o=t.productPurchasePrice,c=t.productRetailPrice,l=t.productSku,s=e.processing;return r.a.createElement("div",{className:"claims-detail-card claims-detail-card--product"},r.a.createElement("h3",null,"Product"),s?r.a.createElement(ut.l,{className:"claims-detail-card__loading",dotColor:"clydeBlack",dotSize:"medium"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Product Name:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},n)),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Manufacturer:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},a)),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"SKU:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},l)),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Current Product Price:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},Qn(c))),r.a.createElement("div",{className:"claims-detail-card__group"},r.a.createElement("span",{className:"claims-detail-card__group__title"},"Purchased Product Price:"),r.a.createElement("span",{className:"claims-detail-card__group__info"},Qn(o)))))},Md=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.id;(0,e._fetchClaimData)(t)}},{key:"render",value:function(){var e=this.props,t=e.claim,a=e.claimHistory,n=e.contract,o=e.customer,c=e.history,l=e.match.params.id,s=e.processing,i=e.product,m=e.remainingLimitOfLiability,d=e.productParts,u=e.supportingInfoFiles,p=e.shopClaimSettings,_=e._populateCopWithCustomer,h=e.transferHistory,E="limitedWarranty"===t.warrantyType,g=t.createdAt?O()(t.createdAt).format("MM/DD/YYYY"):null,f="approved"===t.claimState||"resolutionPending"===t.claimState||"repairInitiated"===t.claimState||t.claimState.indexOf("resolve")>-1;return r.a.createElement("div",{className:"page-container"},r.a.createElement(lt.a,null,r.a.createElement("title",null,"Clyde | Claim Detail")),r.a.createElement("div",{className:"page-layout"},r.a.createElement("div",{className:"claims-detail"},r.a.createElement("div",{className:"claims__back"},r.a.createElement("button",{className:"button-nostyle orders__back__button",onClick:function(){return c.push("/claims")}},r.a.createElement("div",{className:"orders__back__button__image"},r.a.createElement("div",{className:"orders__back__button__image__arrow"})),r.a.createElement("span",{className:"orders__back__button__text"},"Back to all Claims"))),r.a.createElement("div",{className:"claims-detail-header"},r.a.createElement("div",{className:"claims-detail-header-container"},r.a.createElement("h1",null,"Claim #",t.claimExternalId||l),E&&r.a.createElement("span",{className:"limited-warranty-pill"},"Limited Warranty")),r.a.createElement("div",{className:"claims-detail-header__info"},r.a.createElement("span",{className:"claims-detail-header__info__date"},"Date Filled: ",g),"approved"===t.claimState&&!t.resolutionId&&r.a.createElement("span",{className:"claims-detail-header__info__state"},"Needs Resolution"))),r.a.createElement("div",{className:"claims-detail-content"},r.a.createElement("div",{className:"claims-detail-content__column"},r.a.createElement(xd,{customer:o,history:c,processing:s.customer,_populateCopWithCustomer:_}),n&&r.a.createElement(Ld,{contract:n,processing:s.contract,transferHistory:h}),r.a.createElement(Fd,{product:i,processing:s.product})),r.a.createElement("div",{className:"claims-detail-content__column"},r.a.createElement(Ad,{claim:t,claimProcessing:s.claim,supportingInfoFiles:u,supportingInfoProcessing:s.supportingInfoFiles}),r.a.createElement(Dd,{claimHistory:a,denialReason:t.denialReason,serviceType:t.serviceType,processing:s.claimHistory}))),f&&r.a.createElement(Um,{claimId:l,remainingLimitOfLiability:m,productParts:d,shopClaimSettings:p,onDetailPage:!0}))))}}]),a}(n.Component),Ud=Object(l.b)((function(e){return Object(d.a)({},e.claimDetail)}),(function(e){return{_fetchClaimData:function(t){e(Am(t))},_populateCopWithCustomer:function(t){e(function(e){return{type:"POPULATE_CUSTOMERS_STATE_WITH_CLAIMS_CUSTOMER_INFO",payload:e}}(t))}}}))(Md),Gd=function(e){var t=e.history,a=e.userId,o=e.location,c=o.pathname,l=o.search,s=e._handleOAuthRedirectData;return Object(n.useEffect)((function(){var e,n=c.split("/"),r=null===(e=n[n.length-1])||void 0===e?void 0:e.trim(),o=Nt.a.parse(l.slice(1));s(a,r,o),t.push("/settings/integrations")}),[]),r.a.createElement("div",null,"...redirecting")},Bd=Object(Fe.a)(Object(l.b)((function(e){return{userId:e.auth.userId}}),(function(e){return{_handleOAuthRedirectData:function(t,a,n){e(function(e,t,a){return function(n){n({type:"INTEGRATIONS_CREATE_FRIGG_O_AUTH_INTEGRATION",payload:a}),n(Oe({type:"INTEGRATIONS_CREATE_FRIGG_O_AUTH_INTEGRATION_REQ",payload:{integrationType:t,oAuthData:a,userId:e}}))}}(t,a,n))}}}))(Gd)),Hd=new u.a,Wd=Object(zt.a)(Object(l.b)((function(e){return{accountType:e.auth.accountType,platform:e.auth.platform}}))((function(e){var t=e.component,a=e.path,n=e.redirect,o=e.accountType||Hd.get("clydeAccountType");return r.a.createElement(xe.a,{path:a,render:function(e){return function(e){switch(o){case"admin":return r.a.createElement(t,e);case"basic":default:return r.a.createElement(ic.a,{to:n})}}(e)}})}))),Vd=a(205),Kd=a.n(Vd),zd=(a(668),a(669),function(){return{type:"CLEAR_ERROR",payload:{}}}),Yd=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(0!==e.errors.length){var t=e.errors[0];if("ShopIdMismatch"===t)window.location.reload();else{var n=pt[t];Kd.a.error(n,{position:"top",effect:"stackslide",timeout:a.getTimeout(t)})}this.props._clearError()}}},{key:"render",value:function(){return r.a.createElement(Kd.a,{stack:{limit:10}})}}],[{key:"getTimeout",value:function(e){return"MissingShopifyShopData"===e?5e3:1500}}]),a}(r.a.Component),Qd=Object(l.b)((function(e){return e.error}),(function(e){return Object(i.b)({_clearError:zd},e)}))(Yd),qd=function(e){Object(Ae.a)(a,e);var t=Object(De.a)(a);function a(){return Object(je.a)(this,a),t.apply(this,arguments)}return Object(ke.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.wsConnect()}},{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement(Le.a,null,r.a.createElement(xe.a,{path:"/connect",component:rt}),r.a.createElement(xe.a,{path:"/login",component:vt}),r.a.createElement(xe.a,{path:"/verify-shopify",component:It}),r.a.createElement(xe.a,{path:"/verify-shopify-user",component:Pt}),r.a.createElement(xe.a,{path:"/verify-bigcommerce",component:jt}),r.a.createElement(xe.a,{path:"/shopify-install",component:At}),r.a.createElement(xe.a,{path:"/bigcommerce-install",component:Lt}),r.a.createElement(xe.a,{path:"/login-processing",component:Ft}),r.a.createElement(xe.a,{path:"/skeleton-key",component:Ct}),r.a.createElement(xe.a,{path:"/welcome",component:Sn}),r.a.createElement(An,null,r.a.createElement(xe.a,{path:"/performance",redirect:"/products",component:Zn}),r.a.createElement(xe.a,{path:"/sales",redirect:"/products",component:wr}),r.a.createElement(Wd,{path:"/contracts",redirect:"/products",component:sc}),r.a.createElement(xe.a,{path:"/products",redirect:"/products",component:oc}),r.a.createElement(Wd,{path:"/customize",redirect:"/products",component:ln}),r.a.createElement(xe.a,{path:"/customers",redirect:"/products",component:Nd}),r.a.createElement(xe.a,{exact:!0,path:"/claims",redirect:"/products",component:wd}),r.a.createElement(xe.a,{path:"/claims/:id",redirect:"/products",component:Ud}),r.a.createElement(xe.a,{path:"/settings",redirect:"/products",component:bs}),r.a.createElement(xe.a,{path:"/oauth/redirect",redirect:"/products",component:Bd}))),r.a.createElement(Qd,null))}}]),a}(n.Component),$d=Object(Fe.a)(Object(l.b)((function(e){return e}),(function(e){return Object(i.b)({wsConnect:Ne},e)}))(qd));c.a.render(r.a.createElement(l.a,{store:we},r.a.createElement(s.a,null,r.a.createElement($d,null))),document.getElementById("root"))}},[[325,1,2]]]);
//# sourceMappingURL=main.8dcf83b8.chunk.js.map